[2026-02-19 10:39:09] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-19 10:39:09] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-19 10:39:09] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-19 10:39:09  
[2026-02-19 10:39:09] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-19 10:39:09] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-19 10:39:09] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-19 10:39:09] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-19 10:39:09] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-19 10:39:09] local.INFO: [WEBHOOK REQUEST] Content-Length: 1243  
[2026-02-19 10:39:09] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-19 10:39:09] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-19 10:39:09] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1243 bytes  
[2026-02-19 10:39:09] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1771472213",
    "amount": 500000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000230596"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-19 10:39:09] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-19 10:39:09] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1771472213",
        "amount": 500000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000230596"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-19 10:39:09] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-19 10:39:09] local.INFO: ================================================================================  
[2026-02-19 10:39:09] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-19 10:39:09] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-19 10:39:09] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-19 10:39:09  
[2026-02-19 10:39:09] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["2be3612a-294e-45c9-94f2-53fff016a10c"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1243"]} 
[2026-02-19 10:39:09] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1771472213","amount":500000},"virtual_account_info":{"virtual_account_number":"1900800000230596"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-19 10:39:09] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-19 10:39:09] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1771472213","transaction_status":"SUCCESS","amount":500000} 
[2026-02-19 10:39:09] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-19 10:39:09] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-19 10:39:09] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-19 10:39:09] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1771472213")->lockForUpdate()...  
[2026-02-19 10:39:09] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-19 10:39:09] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":6,"school_name":"KKKKKK","school_email":"satrioathallah38@gmail.com","current_payment_status":"pending"} 
[2026-02-19 10:39:09] local.INFO: [DOKU WEBHOOK][STEP 5] Memanggil inquiry->update() â€” mengubah payment_status ke "success"...  
[2026-02-19 10:39:09] local.INFO: [DOKU WEBHOOK][STEP 5] Payment status TERUPDATE: {"inquiry_id":6,"new_payment_status":"success","payment_date":"2026-02-19 10:39:09"} 
[2026-02-19 10:39:09] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil School::where("support_email", "satrioathallah38@gmail.com") â€” cek apakah school sudah ada...  
[2026-02-19 10:39:09] local.INFO: [DOKU WEBHOOK][STEP 6] School SUDAH ADA (ID: 7) â€” skip pembuatan  
[2026-02-19 10:39:09] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil school->update() â€” set code dan database_name...  
[2026-02-19 10:39:09] local.INFO: [DOKU WEBHOOK][STEP 6] School TERUPDATE: {"school_id":7,"code":"SCH00007","database_name":"eschool_saas_7_sma-test"} 
[2026-02-19 10:39:09] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil User::where("email", "satrioathallah38@gmail.com") â€” cek apakah admin sudah ada...  
[2026-02-19 10:39:09] local.INFO: [DOKU WEBHOOK][STEP 7] Admin SUDAH ADA (ID: 8) â€” skip pembuatan  
[2026-02-19 10:39:09] local.INFO: [DOKU WEBHOOK][STEP 8] DB::commit() â€” semua data tersimpan ke database  
[2026-02-19 10:39:09] local.INFO: [DOKU WEBHOOK][STEP 9] Memanggil SetupSchoolDatabase::dispatch(...)->afterResponse() â€” membuat database sekolah di background (setelah response)...  
[2026-02-19 10:39:09] local.INFO: [DOKU WEBHOOK][STEP 9] Parameter dispatch: {"school_id":7,"package_id":1,"school_code":"SCH00007"} 
[2026-02-19 10:39:09] local.INFO: [DOKU WEBHOOK] âœ… PROSES SELESAI â€” Sekolah berhasil diaktifkan  
[2026-02-19 10:39:09] local.INFO: [DOKU WEBHOOK] Hasil yang tercipta: {"school_id":7,"school_name":"SMA TEST","school_code":"SCH00007","database_name":"eschool_saas_7_sma-test","admin_email":"satrioathallah38@gmail.com","payment_status":"success","invoice_number":"JT-1771472213"} 
[2026-02-19 10:39:09] local.INFO: ================================================================================  
[2026-02-19 10:39:09] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-19 10:39:09] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-19 10:39:09] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"OK"}  
[2026-02-19 10:39:09] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 157.79 ms  
[2026-02-19 10:39:09] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-19 10:39:47] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-19 10:39:47] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-19 10:39:47] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-19 10:39:47  
[2026-02-19 10:39:47] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-19 10:39:47] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-19 10:39:47] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-19 10:39:47] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-19 10:39:47] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-19 10:39:47] local.INFO: [WEBHOOK REQUEST] Content-Length: 1243  
[2026-02-19 10:39:47] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-19 10:39:47] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-19 10:39:47] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1243 bytes  
[2026-02-19 10:39:47] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1771472213",
    "amount": 500000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000230596"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-19 10:39:47] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-19 10:39:47] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1771472213",
        "amount": 500000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000230596"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-19 10:39:47] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-19 10:39:47] local.INFO: ================================================================================  
[2026-02-19 10:39:47] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-19 10:39:47] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-19 10:39:47] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-19 10:39:47  
[2026-02-19 10:39:47] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["12824847-bdf4-4f60-824b-2843d9a13b07"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1243"]} 
[2026-02-19 10:39:47] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1771472213","amount":500000},"virtual_account_info":{"virtual_account_number":"1900800000230596"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-19 10:39:47] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-19 10:39:47] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1771472213","transaction_status":"SUCCESS","amount":500000} 
[2026-02-19 10:39:47] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-19 10:39:47] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-19 10:39:47] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-19 10:39:47] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1771472213")->lockForUpdate()...  
[2026-02-19 10:39:47] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-19 10:39:47] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":6,"school_name":"KKKKKK","school_email":"satrioathallah38@gmail.com","current_payment_status":"success"} 
[2026-02-19 10:39:47] local.INFO: [DOKU WEBHOOK][STEP 4] Invoice SUDAH PERNAH DIBAYAR â€” skip proses  
[2026-02-19 10:39:47] local.INFO: ================================================================================  
[2026-02-19 10:39:47] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-19 10:39:47] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-19 10:39:47] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"Already processed"}  
[2026-02-19 10:39:47] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 43.3 ms  
[2026-02-19 10:39:47] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-19 11:49:24] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-19 11:49:24] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-19 11:49:24] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-19 11:49:24  
[2026-02-19 11:49:24] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-19 11:49:24] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-19 11:49:24] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-19 11:49:24] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-19 11:49:24] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-19 11:49:24] local.INFO: [WEBHOOK REQUEST] Content-Length: 1243  
[2026-02-19 11:49:24] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-19 11:49:24] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-19 11:49:24] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1243 bytes  
[2026-02-19 11:49:24] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1771476525",
    "amount": 500000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000230596"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-19 11:49:24] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-19 11:49:24] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1771476525",
        "amount": 500000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000230596"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-19 11:49:24] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-19 11:49:24] local.INFO: ================================================================================  
[2026-02-19 11:49:24] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-19 11:49:24] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-19 11:49:24] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-19 11:49:24  
[2026-02-19 11:49:24] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["4f5c3b95-97aa-4eac-b221-85db1378c5f0"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1243"]} 
[2026-02-19 11:49:24] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1771476525","amount":500000},"virtual_account_info":{"virtual_account_number":"1900800000230596"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-19 11:49:24] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-19 11:49:24] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1771476525","transaction_status":"SUCCESS","amount":500000} 
[2026-02-19 11:49:24] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-19 11:49:24] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-19 11:49:24] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-19 11:49:24] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1771476525")->lockForUpdate()...  
[2026-02-19 11:49:24] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-19 11:49:24] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":58,"school_name":"NNNNNN","school_email":"nnn@email.com","current_payment_status":"pending"} 
[2026-02-19 11:49:24] local.INFO: [DOKU WEBHOOK][STEP 5] Memanggil inquiry->update() â€” mengubah payment_status ke "success"...  
[2026-02-19 11:49:24] local.INFO: [DOKU WEBHOOK][STEP 5] Payment status TERUPDATE: {"inquiry_id":58,"new_payment_status":"success","payment_date":"2026-02-19 11:49:24"} 
[2026-02-19 11:49:24] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil School::where("support_email", "nnn@email.com") â€” cek apakah school sudah ada...  
[2026-02-19 11:49:24] local.INFO: [DOKU WEBHOOK][STEP 6] School BELUM ADA â€” memanggil School::create() untuk membuat school baru...  
[2026-02-19 11:49:24] local.INFO: [DOKU WEBHOOK][STEP 6] School BARU TERCIPTA: {"school_id":33,"name":"NNNNNN","support_email":"nnn@email.com"} 
[2026-02-19 11:49:24] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil school->update() â€” set code dan database_name...  
[2026-02-19 11:49:24] local.INFO: [DOKU WEBHOOK][STEP 6] School TERUPDATE: {"school_id":33,"code":"SCH00033","database_name":"eschool_saas_33_nnnnnn"} 
[2026-02-19 11:49:24] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil User::where("email", "nnn@email.com") â€” cek apakah admin sudah ada...  
[2026-02-19 11:49:24] local.INFO: [DOKU WEBHOOK][STEP 7] Admin BELUM ADA â€” memanggil User::create() untuk membuat admin baru...  
[2026-02-19 11:49:24] local.INFO: [DOKU WEBHOOK][STEP 7] Admin user TERCIPTA: {"user_id":34,"email":"nnn@email.com","school_id":33} 
[2026-02-19 11:49:24] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil Role::updateOrCreate() â€” assign role "School Admin"...  
[2026-02-19 11:49:24] local.INFO: [DOKU WEBHOOK][STEP 7] Role TERCIPTA/TERUPDATE: {"role_id":30,"role_name":"School Admin"} 
[2026-02-19 11:49:24] local.INFO: [DOKU WEBHOOK][STEP 7] School admin_id diupdate ke: 34  
[2026-02-19 11:49:24] local.INFO: [DOKU WEBHOOK][STEP 8] DB::commit() â€” semua data tersimpan ke database  
[2026-02-19 11:49:24] local.INFO: [DOKU WEBHOOK][STEP 9] Memanggil SetupSchoolDatabase::dispatch(...)->afterResponse() â€” membuat database sekolah di background (setelah response)...  
[2026-02-19 11:49:24] local.INFO: [DOKU WEBHOOK][STEP 9] Parameter dispatch: {"school_id":33,"package_id":1,"school_code":"SCH00033"} 
[2026-02-19 11:49:24] local.INFO: [DOKU WEBHOOK] âœ… PROSES SELESAI â€” Sekolah berhasil diaktifkan  
[2026-02-19 11:49:24] local.INFO: [DOKU WEBHOOK] Hasil yang tercipta: {"school_id":33,"school_name":"NNNNNN","school_code":"SCH00033","database_name":"eschool_saas_33_nnnnnn","admin_email":"nnn@email.com","payment_status":"success","invoice_number":"JT-1771476525"} 
[2026-02-19 11:49:24] local.INFO: ================================================================================  
[2026-02-19 11:49:24] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-19 11:49:24] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-19 11:49:24] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"OK"}  
[2026-02-19 11:49:24] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 494.12 ms  
[2026-02-19 11:49:24] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-19 12:09:49] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-19 12:09:49] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-19 12:09:49] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-19 12:09:49  
[2026-02-19 12:09:49] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-19 12:09:49] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-19 12:09:49] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-19 12:09:49] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-19 12:09:49] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-19 12:09:49] local.INFO: [WEBHOOK REQUEST] Content-Length: 1243  
[2026-02-19 12:09:49] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-19 12:09:49] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-19 12:09:49] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1243 bytes  
[2026-02-19 12:09:49] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1771477496",
    "amount": 500000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000230596"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-19 12:09:49] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-19 12:09:49] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1771477496",
        "amount": 500000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000230596"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-19 12:09:49] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-19 12:09:49] local.INFO: ================================================================================  
[2026-02-19 12:09:49] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-19 12:09:49] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-19 12:09:49] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-19 12:09:49  
[2026-02-19 12:09:49] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["4d9e9a34-89fe-4510-8820-02422026b49c"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1243"]} 
[2026-02-19 12:09:49] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1771477496","amount":500000},"virtual_account_info":{"virtual_account_number":"1900800000230596"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-19 12:09:49] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-19 12:09:49] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1771477496","transaction_status":"SUCCESS","amount":500000} 
[2026-02-19 12:09:49] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-19 12:09:49] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-19 12:09:49] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-19 12:09:49] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1771477496")->lockForUpdate()...  
[2026-02-19 12:09:49] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-19 12:09:50] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":59,"school_name":"OOOOOO","school_email":"ooo@gmail.com","current_payment_status":"pending"} 
[2026-02-19 12:09:50] local.INFO: [DOKU WEBHOOK][STEP 5] Memanggil inquiry->update() â€” mengubah payment_status ke "success"...  
[2026-02-19 12:09:50] local.INFO: [DOKU WEBHOOK][STEP 5] Payment status TERUPDATE: {"inquiry_id":59,"new_payment_status":"success","payment_date":"2026-02-19 12:09:50"} 
[2026-02-19 12:09:50] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil School::where("support_email", "ooo@gmail.com") â€” cek apakah school sudah ada...  
[2026-02-19 12:09:50] local.INFO: [DOKU WEBHOOK][STEP 6] School BELUM ADA â€” memanggil School::create() untuk membuat school baru...  
[2026-02-19 12:09:50] local.INFO: [DOKU WEBHOOK][STEP 6] School BARU TERCIPTA: {"school_id":34,"name":"OOOOOO","support_email":"ooo@gmail.com"} 
[2026-02-19 12:09:50] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil school->update() â€” set code dan database_name...  
[2026-02-19 12:09:50] local.INFO: [DOKU WEBHOOK][STEP 6] School TERUPDATE: {"school_id":34,"code":"SCH00034","database_name":"eschool_saas_34_oooooo"} 
[2026-02-19 12:09:50] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil User::where("email", "ooo@gmail.com") â€” cek apakah admin sudah ada...  
[2026-02-19 12:09:50] local.INFO: [DOKU WEBHOOK][STEP 7] Admin BELUM ADA â€” memanggil User::create() untuk membuat admin baru...  
[2026-02-19 12:09:50] local.INFO: [DOKU WEBHOOK][STEP 7] Admin user TERCIPTA: {"user_id":35,"email":"ooo@gmail.com","school_id":34} 
[2026-02-19 12:09:50] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil Role::updateOrCreate() â€” assign role "School Admin"...  
[2026-02-19 12:09:50] local.INFO: [DOKU WEBHOOK][STEP 7] Role TERCIPTA/TERUPDATE: {"role_id":31,"role_name":"School Admin"} 
[2026-02-19 12:09:50] local.INFO: [DOKU WEBHOOK][STEP 7] School admin_id diupdate ke: 35  
[2026-02-19 12:09:50] local.INFO: [DOKU WEBHOOK][STEP 8] DB::commit() â€” semua data tersimpan ke database  
[2026-02-19 12:09:50] local.INFO: [DOKU WEBHOOK][STEP 9] Memanggil SetupSchoolDatabase::dispatch(...)->afterResponse() â€” membuat database sekolah di background (setelah response)...  
[2026-02-19 12:09:50] local.INFO: [DOKU WEBHOOK][STEP 9] Parameter dispatch: {"school_id":34,"package_id":1,"school_code":"SCH00034"} 
[2026-02-19 12:09:50] local.INFO: [DOKU WEBHOOK] âœ… PROSES SELESAI â€” Sekolah berhasil diaktifkan  
[2026-02-19 12:09:50] local.INFO: [DOKU WEBHOOK] Hasil yang tercipta: {"school_id":34,"school_name":"OOOOOO","school_code":"SCH00034","database_name":"eschool_saas_34_oooooo","admin_email":"ooo@gmail.com","payment_status":"success","invoice_number":"JT-1771477496"} 
[2026-02-19 12:09:50] local.INFO: ================================================================================  
[2026-02-19 12:09:50] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-19 12:09:50] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-19 12:09:50] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"OK"}  
[2026-02-19 12:09:50] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 806.11 ms  
[2026-02-19 12:09:50] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-19 12:20:14] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-19 12:20:14] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-19 12:20:14] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-19 12:20:14  
[2026-02-19 12:20:14] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-19 12:20:14] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-19 12:20:14] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-19 12:20:14] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-19 12:20:14] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-19 12:20:14] local.INFO: [WEBHOOK REQUEST] Content-Length: 1243  
[2026-02-19 12:20:14] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-19 12:20:14] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-19 12:20:14] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1243 bytes  
[2026-02-19 12:20:14] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1771478314",
    "amount": 500000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000230596"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-19 12:20:14] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-19 12:20:14] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1771478314",
        "amount": 500000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000230596"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-19 12:20:14] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-19 12:20:14] local.INFO: ================================================================================  
[2026-02-19 12:20:14] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-19 12:20:14] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-19 12:20:14] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-19 12:20:14  
[2026-02-19 12:20:14] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["1e337245-f225-4ada-bc56-b88c637d2883"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1243"]} 
[2026-02-19 12:20:14] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1771478314","amount":500000},"virtual_account_info":{"virtual_account_number":"1900800000230596"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-19 12:20:14] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-19 12:20:14] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1771478314","transaction_status":"SUCCESS","amount":500000} 
[2026-02-19 12:20:14] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-19 12:20:14] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-19 12:20:14] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-19 12:20:14] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1771478314")->lockForUpdate()...  
[2026-02-19 12:20:14] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-19 12:20:14] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":60,"school_name":"PPPPP","school_email":"pupi@email.com","current_payment_status":"pending"} 
[2026-02-19 12:20:14] local.INFO: [DOKU WEBHOOK][STEP 5] Memanggil inquiry->update() â€” mengubah payment_status ke "success"...  
[2026-02-19 12:20:14] local.INFO: [DOKU WEBHOOK][STEP 5] Payment status TERUPDATE: {"inquiry_id":60,"new_payment_status":"success","payment_date":"2026-02-19 12:20:14"} 
[2026-02-19 12:20:14] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil School::where("support_email", "pupi@email.com") â€” cek apakah school sudah ada...  
[2026-02-19 12:20:14] local.INFO: [DOKU WEBHOOK][STEP 6] School BELUM ADA â€” memanggil School::create() untuk membuat school baru...  
[2026-02-19 12:20:14] local.INFO: [DOKU WEBHOOK][STEP 6] School BARU TERCIPTA: {"school_id":35,"name":"PPPPP","support_email":"pupi@email.com"} 
[2026-02-19 12:20:14] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil school->update() â€” set code dan database_name...  
[2026-02-19 12:20:14] local.INFO: [DOKU WEBHOOK][STEP 6] School TERUPDATE: {"school_id":35,"code":"SCH00035","database_name":"eschool_saas_35_ppppp"} 
[2026-02-19 12:20:14] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil User::where("email", "pupi@email.com") â€” cek apakah admin sudah ada...  
[2026-02-19 12:20:14] local.INFO: [DOKU WEBHOOK][STEP 7] Admin BELUM ADA â€” memanggil User::create() untuk membuat admin baru...  
[2026-02-19 12:20:14] local.INFO: [DOKU WEBHOOK][STEP 7] Admin user TERCIPTA: {"user_id":36,"email":"pupi@email.com","school_id":35} 
[2026-02-19 12:20:14] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil Role::updateOrCreate() â€” assign role "School Admin"...  
[2026-02-19 12:20:14] local.INFO: [DOKU WEBHOOK][STEP 7] Role TERCIPTA/TERUPDATE: {"role_id":32,"role_name":"School Admin"} 
[2026-02-19 12:20:14] local.INFO: [DOKU WEBHOOK][STEP 7] School admin_id diupdate ke: 36  
[2026-02-19 12:20:14] local.INFO: [DOKU WEBHOOK][STEP 8] DB::commit() â€” semua data tersimpan ke database  
[2026-02-19 12:20:14] local.INFO: [DOKU WEBHOOK][STEP 9] Memanggil SetupSchoolDatabase::dispatch(...)->afterResponse() â€” membuat database sekolah di background (setelah response)...  
[2026-02-19 12:20:14] local.INFO: [DOKU WEBHOOK][STEP 9] Parameter dispatch: {"school_id":35,"package_id":1,"school_code":"SCH00035"} 
[2026-02-19 12:20:14] local.INFO: [DOKU WEBHOOK] âœ… PROSES SELESAI â€” Sekolah berhasil diaktifkan  
[2026-02-19 12:20:14] local.INFO: [DOKU WEBHOOK] Hasil yang tercipta: {"school_id":35,"school_name":"PPPPP","school_code":"SCH00035","database_name":"eschool_saas_35_ppppp","admin_email":"pupi@email.com","payment_status":"success","invoice_number":"JT-1771478314"} 
[2026-02-19 12:20:14] local.INFO: ================================================================================  
[2026-02-19 12:20:14] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-19 12:20:14] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-19 12:20:14] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"OK"}  
[2026-02-19 12:20:14] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 682.04 ms  
[2026-02-19 12:20:14] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-19 13:07:12] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-19 13:07:12] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-19 13:07:12] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-19 13:07:12  
[2026-02-19 13:07:12] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-19 13:07:12] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-19 13:07:12] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-19 13:07:12] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-19 13:07:12] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-19 13:07:12] local.INFO: [WEBHOOK REQUEST] Content-Length: 1243  
[2026-02-19 13:07:12] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-19 13:07:12] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-19 13:07:12] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1243 bytes  
[2026-02-19 13:07:12] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1771481182",
    "amount": 500000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000230596"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-19 13:07:12] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-19 13:07:13] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1771481182",
        "amount": 500000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000230596"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-19 13:07:13] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-19 13:07:13] local.INFO: ================================================================================  
[2026-02-19 13:07:13] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-19 13:07:13] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-19 13:07:13] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-19 13:07:13  
[2026-02-19 13:07:13] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["1cd16818-2a5d-47ec-bbbc-b058da9b67a6"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1243"]} 
[2026-02-19 13:07:13] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1771481182","amount":500000},"virtual_account_info":{"virtual_account_number":"1900800000230596"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-19 13:07:13] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-19 13:07:13] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1771481182","transaction_status":"SUCCESS","amount":500000} 
[2026-02-19 13:07:13] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-19 13:07:13] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-19 13:07:13] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-19 13:07:13] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1771481182")->lockForUpdate()...  
[2026-02-19 13:07:13] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-19 13:07:13] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":61,"school_name":"QQQQQQ","school_email":"qqq@email.com","current_payment_status":"pending"} 
[2026-02-19 13:07:13] local.INFO: [DOKU WEBHOOK][STEP 5] Memanggil inquiry->update() â€” mengubah payment_status ke "success"...  
[2026-02-19 13:07:13] local.INFO: [DOKU WEBHOOK][STEP 5] Payment status TERUPDATE: {"inquiry_id":61,"new_payment_status":"success","payment_date":"2026-02-19 13:07:13"} 
[2026-02-19 13:07:13] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil School::where("support_email", "qqq@email.com") â€” cek apakah school sudah ada...  
[2026-02-19 13:07:13] local.INFO: [DOKU WEBHOOK][STEP 6] School BELUM ADA â€” memanggil School::create() untuk membuat school baru...  
[2026-02-19 13:07:13] local.INFO: [DOKU WEBHOOK][STEP 6] School BARU TERCIPTA: {"school_id":36,"name":"QQQQQQ","support_email":"qqq@email.com"} 
[2026-02-19 13:07:13] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil school->update() â€” set code dan database_name...  
[2026-02-19 13:07:13] local.INFO: [DOKU WEBHOOK][STEP 6] School TERUPDATE: {"school_id":36,"code":"SCH00036","database_name":"eschool_saas_36_qqqqqq"} 
[2026-02-19 13:07:13] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil User::where("email", "qqq@email.com") â€” cek apakah admin sudah ada...  
[2026-02-19 13:07:13] local.INFO: [DOKU WEBHOOK][STEP 7] Admin BELUM ADA â€” memanggil User::create() untuk membuat admin baru...  
[2026-02-19 13:07:13] local.INFO: [DOKU WEBHOOK][STEP 7] Admin user TERCIPTA: {"user_id":37,"email":"qqq@email.com","school_id":36} 
[2026-02-19 13:07:13] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil Role::updateOrCreate() â€” assign role "School Admin"...  
[2026-02-19 13:07:13] local.INFO: [DOKU WEBHOOK][STEP 7] Role TERCIPTA/TERUPDATE: {"role_id":33,"role_name":"School Admin"} 
[2026-02-19 13:07:13] local.INFO: [DOKU WEBHOOK][STEP 7] School admin_id diupdate ke: 37  
[2026-02-19 13:07:13] local.INFO: [DOKU WEBHOOK][STEP 8] DB::commit() â€” semua data tersimpan ke database  
[2026-02-19 13:07:13] local.INFO: [DOKU WEBHOOK][STEP 9] Memanggil SetupSchoolDatabase::dispatch(...)->afterResponse() â€” membuat database sekolah di background (setelah response)...  
[2026-02-19 13:07:13] local.INFO: [DOKU WEBHOOK][STEP 9] Parameter dispatch: {"school_id":36,"package_id":1,"school_code":"SCH00036"} 
[2026-02-19 13:07:13] local.INFO: [DOKU WEBHOOK] âœ… PROSES SELESAI â€” Sekolah berhasil diaktifkan  
[2026-02-19 13:07:13] local.INFO: [DOKU WEBHOOK] Hasil yang tercipta: {"school_id":36,"school_name":"QQQQQQ","school_code":"SCH00036","database_name":"eschool_saas_36_qqqqqq","admin_email":"qqq@email.com","payment_status":"success","invoice_number":"JT-1771481182"} 
[2026-02-19 13:07:13] local.INFO: ================================================================================  
[2026-02-19 13:07:13] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-19 13:07:13] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-19 13:07:13] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"OK"}  
[2026-02-19 13:07:13] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 459.41 ms  
[2026-02-19 13:07:13] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-19 13:15:26] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-19 13:15:26] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-19 13:15:26] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-19 13:15:26  
[2026-02-19 13:15:26] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-19 13:15:26] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-19 13:15:26] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-19 13:15:26] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-19 13:15:26] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-19 13:15:26] local.INFO: [WEBHOOK REQUEST] Content-Length: 1243  
[2026-02-19 13:15:26] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-19 13:15:26] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-19 13:15:26] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1243 bytes  
[2026-02-19 13:15:26] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1771481687",
    "amount": 500000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000230596"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-19 13:15:26] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-19 13:15:26] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1771481687",
        "amount": 500000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000230596"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-19 13:15:26] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-19 13:15:26] local.INFO: ================================================================================  
[2026-02-19 13:15:26] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-19 13:15:26] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-19 13:15:26] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-19 13:15:26  
[2026-02-19 13:15:26] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["a86c77f6-64c0-4401-b1f3-207be2302f85"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1243"]} 
[2026-02-19 13:15:26] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1771481687","amount":500000},"virtual_account_info":{"virtual_account_number":"1900800000230596"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-19 13:15:26] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-19 13:15:26] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1771481687","transaction_status":"SUCCESS","amount":500000} 
[2026-02-19 13:15:26] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-19 13:15:26] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-19 13:15:26] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-19 13:15:26] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1771481687")->lockForUpdate()...  
[2026-02-19 13:15:26] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-19 13:15:26] local.WARNING: [DOKU WEBHOOK][STEP 4] Inquiry TIDAK DITEMUKAN untuk invoice: JT-1771481687  
[2026-02-19 13:15:26] local.INFO: ================================================================================  
[2026-02-19 13:15:26] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-19 13:15:26] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-19 13:15:26] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"OK"}  
[2026-02-19 13:15:26] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 115.49 ms  
[2026-02-19 13:15:26] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-19 13:41:24] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-19 13:41:24] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-19 13:41:24] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-19 13:41:24  
[2026-02-19 13:41:24] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-19 13:41:24] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-19 13:41:24] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-19 13:41:24] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-19 13:41:24] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-19 13:41:24] local.INFO: [WEBHOOK REQUEST] Content-Length: 1243  
[2026-02-19 13:41:24] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-19 13:41:24] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-19 13:41:24] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1243 bytes  
[2026-02-19 13:41:24] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1771483219",
    "amount": 500000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000230596"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-19 13:41:24] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-19 13:41:24] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1771483219",
        "amount": 500000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000230596"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-19 13:41:24] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-19 13:41:24] local.INFO: ================================================================================  
[2026-02-19 13:41:24] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-19 13:41:24] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-19 13:41:24] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-19 13:41:24  
[2026-02-19 13:41:24] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["fe73ea6b-2c5d-40d6-843c-6b0712109aff"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1243"]} 
[2026-02-19 13:41:24] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1771483219","amount":500000},"virtual_account_info":{"virtual_account_number":"1900800000230596"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-19 13:41:24] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-19 13:41:24] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1771483219","transaction_status":"SUCCESS","amount":500000} 
[2026-02-19 13:41:24] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-19 13:41:24] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-19 13:41:24] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-19 13:41:24] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1771483219")->lockForUpdate()...  
[2026-02-19 13:41:24] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-19 13:41:24] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":62,"school_name":"RRRRRR","school_email":"rrr@email.com","current_payment_status":"pending"} 
[2026-02-19 13:41:24] local.INFO: [DOKU WEBHOOK][STEP 5] Memanggil inquiry->update() â€” mengubah payment_status ke "success"...  
[2026-02-19 13:41:24] local.INFO: [DOKU WEBHOOK][STEP 5] Payment status TERUPDATE: {"inquiry_id":62,"new_payment_status":"success","payment_date":"2026-02-19 13:41:24"} 
[2026-02-19 13:41:24] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil School::where("support_email", "rrr@email.com") â€” cek apakah school sudah ada...  
[2026-02-19 13:41:24] local.INFO: [DOKU WEBHOOK][STEP 6] School BELUM ADA â€” memanggil School::create() untuk membuat school baru...  
[2026-02-19 13:41:24] local.INFO: [DOKU WEBHOOK][STEP 6] School BARU TERCIPTA: {"school_id":37,"name":"RRRRRR","support_email":"rrr@email.com"} 
[2026-02-19 13:41:24] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil school->update() â€” set code dan database_name...  
[2026-02-19 13:41:24] local.INFO: [DOKU WEBHOOK][STEP 6] School TERUPDATE: {"school_id":37,"code":"SCH00037","database_name":"eschool_saas_37_rrrrrr"} 
[2026-02-19 13:41:24] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil User::where("email", "rrr@email.com") â€” cek apakah admin sudah ada...  
[2026-02-19 13:41:24] local.INFO: [DOKU WEBHOOK][STEP 7] Admin BELUM ADA â€” memanggil User::create() untuk membuat admin baru...  
[2026-02-19 13:41:24] local.INFO: [DOKU WEBHOOK][STEP 7] Admin user TERCIPTA: {"user_id":38,"email":"rrr@email.com","school_id":37} 
[2026-02-19 13:41:24] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil Role::updateOrCreate() â€” assign role "School Admin"...  
[2026-02-19 13:41:24] local.INFO: [DOKU WEBHOOK][STEP 7] Role TERCIPTA/TERUPDATE: {"role_id":34,"role_name":"School Admin"} 
[2026-02-19 13:41:24] local.INFO: [DOKU WEBHOOK][STEP 7] School admin_id diupdate ke: 38  
[2026-02-19 13:41:24] local.INFO: [DOKU WEBHOOK][STEP 8] DB::commit() â€” semua data tersimpan ke database  
[2026-02-19 13:41:24] local.INFO: [DOKU WEBHOOK][STEP 9] Memanggil SetupSchoolDatabase::dispatch(...)->afterResponse() â€” membuat database sekolah di background (setelah response)...  
[2026-02-19 13:41:24] local.INFO: [DOKU WEBHOOK][STEP 9] Parameter dispatch: {"school_id":37,"package_id":1,"school_code":"SCH00037"} 
[2026-02-19 13:41:24] local.INFO: [DOKU WEBHOOK] âœ… PROSES SELESAI â€” Sekolah berhasil diaktifkan  
[2026-02-19 13:41:24] local.INFO: [DOKU WEBHOOK] Hasil yang tercipta: {"school_id":37,"school_name":"RRRRRR","school_code":"SCH00037","database_name":"eschool_saas_37_rrrrrr","admin_email":"rrr@email.com","payment_status":"success","invoice_number":"JT-1771483219"} 
[2026-02-19 13:41:24] local.INFO: ================================================================================  
[2026-02-19 13:41:24] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-19 13:41:24] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-19 13:41:24] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"OK"}  
[2026-02-19 13:41:24] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 474.29 ms  
[2026-02-19 13:41:24] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-19 13:55:17] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-19 13:55:17] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-19 13:55:17] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-19 13:55:17  
[2026-02-19 13:55:17] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-19 13:55:17] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-19 13:55:17] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-19 13:55:17] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-19 13:55:17] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-19 13:55:17] local.INFO: [WEBHOOK REQUEST] Content-Length: 1243  
[2026-02-19 13:55:17] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-19 13:55:17] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-19 13:55:17] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1243 bytes  
[2026-02-19 13:55:17] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1771484077",
    "amount": 500000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000230596"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-19 13:55:17] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-19 13:55:17] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1771484077",
        "amount": 500000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000230596"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-19 13:55:17] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-19 13:55:17] local.INFO: ================================================================================  
[2026-02-19 13:55:17] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-19 13:55:17] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-19 13:55:17] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-19 13:55:17  
[2026-02-19 13:55:17] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["266dade4-b969-418a-9b2b-ba7818b86876"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1243"]} 
[2026-02-19 13:55:17] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1771484077","amount":500000},"virtual_account_info":{"virtual_account_number":"1900800000230596"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-19 13:55:17] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-19 13:55:17] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1771484077","transaction_status":"SUCCESS","amount":500000} 
[2026-02-19 13:55:17] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-19 13:55:17] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-19 13:55:17] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-19 13:55:17] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1771484077")->lockForUpdate()...  
[2026-02-19 13:55:17] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-19 13:55:17] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":63,"school_name":"SSSSSS","school_email":"sss@gmail.com","current_payment_status":"pending"} 
[2026-02-19 13:55:17] local.INFO: [DOKU WEBHOOK][STEP 5] Memanggil inquiry->update() â€” mengubah payment_status ke "success"...  
[2026-02-19 13:55:17] local.INFO: [DOKU WEBHOOK][STEP 5] Payment status TERUPDATE: {"inquiry_id":63,"new_payment_status":"success","payment_date":"2026-02-19 13:55:17"} 
[2026-02-19 13:55:17] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil School::where("support_email", "sss@gmail.com") â€” cek apakah school sudah ada...  
[2026-02-19 13:55:17] local.INFO: [DOKU WEBHOOK][STEP 6] School BELUM ADA â€” memanggil School::create() untuk membuat school baru...  
[2026-02-19 13:55:17] local.INFO: [DOKU WEBHOOK][STEP 6] School BARU TERCIPTA: {"school_id":38,"name":"SSSSSS","support_email":"sss@gmail.com"} 
[2026-02-19 13:55:17] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil school->update() â€” set code dan database_name...  
[2026-02-19 13:55:17] local.INFO: [DOKU WEBHOOK][STEP 6] School TERUPDATE: {"school_id":38,"code":"SCH00038","database_name":"eschool_saas_38_ssssss"} 
[2026-02-19 13:55:17] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil User::where("email", "sss@gmail.com") â€” cek apakah admin sudah ada...  
[2026-02-19 13:55:17] local.INFO: [DOKU WEBHOOK][STEP 7] Admin BELUM ADA â€” memanggil User::create() untuk membuat admin baru...  
[2026-02-19 13:55:17] local.INFO: [DOKU WEBHOOK][STEP 7] Admin user TERCIPTA: {"user_id":39,"email":"sss@gmail.com","school_id":38} 
[2026-02-19 13:55:17] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil Role::updateOrCreate() â€” assign role "School Admin"...  
[2026-02-19 13:55:17] local.INFO: [DOKU WEBHOOK][STEP 7] Role TERCIPTA/TERUPDATE: {"role_id":35,"role_name":"School Admin"} 
[2026-02-19 13:55:17] local.INFO: [DOKU WEBHOOK][STEP 7] School admin_id diupdate ke: 39  
[2026-02-19 13:55:17] local.INFO: [DOKU WEBHOOK][STEP 8] DB::commit() â€” semua data tersimpan ke database  
[2026-02-19 13:55:17] local.INFO: [DOKU WEBHOOK][STEP 9] Memanggil SetupSchoolDatabase::dispatch(...)->afterResponse() â€” membuat database sekolah di background (setelah response)...  
[2026-02-19 13:55:17] local.INFO: [DOKU WEBHOOK][STEP 9] Parameter dispatch: {"school_id":38,"package_id":1,"school_code":"SCH00038"} 
[2026-02-19 13:55:17] local.INFO: [DOKU WEBHOOK] âœ… PROSES SELESAI â€” Sekolah berhasil diaktifkan  
[2026-02-19 13:55:17] local.INFO: [DOKU WEBHOOK] Hasil yang tercipta: {"school_id":38,"school_name":"SSSSSS","school_code":"SCH00038","database_name":"eschool_saas_38_ssssss","admin_email":"sss@gmail.com","payment_status":"success","invoice_number":"JT-1771484077"} 
[2026-02-19 13:55:17] local.INFO: ================================================================================  
[2026-02-19 13:55:17] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-19 13:55:17] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-19 13:55:17] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"OK"}  
[2026-02-19 13:55:17] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 275.44 ms  
[2026-02-19 13:55:17] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-21 04:46:46] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-21 04:46:46] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-21 04:46:46] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-21 04:46:46  
[2026-02-21 04:46:46] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-21 04:46:46] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-21 04:46:46] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-21 04:46:46] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-21 04:46:46] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-21 04:46:46] local.INFO: [WEBHOOK REQUEST] Content-Length: 1243  
[2026-02-21 04:46:46] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-21 04:46:46] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-21 04:46:46] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1243 bytes  
[2026-02-21 04:46:46] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1771623806",
    "amount": 500000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000230596"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-21 04:46:46] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-21 04:46:46] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1771623806",
        "amount": 500000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000230596"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-21 04:46:46] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-21 04:46:46] local.INFO: ================================================================================  
[2026-02-21 04:46:46] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-21 04:46:46] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-21 04:46:46] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-21 04:46:46  
[2026-02-21 04:46:46] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["bac4054f-9b7b-410f-bfca-eecdac6f60cd"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1243"]} 
[2026-02-21 04:46:46] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1771623806","amount":500000},"virtual_account_info":{"virtual_account_number":"1900800000230596"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-21 04:46:46] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-21 04:46:46] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1771623806","transaction_status":"SUCCESS","amount":500000} 
[2026-02-21 04:46:46] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-21 04:46:46] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-21 04:46:46] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-21 04:46:46] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1771623806")->lockForUpdate()...  
[2026-02-21 04:46:46] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-21 04:46:46] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":70,"school_name":"09po","school_email":"09po@email.com","current_payment_status":"pending"} 
[2026-02-21 04:46:46] local.INFO: [DOKU WEBHOOK][STEP 5] Memanggil inquiry->update() â€” mengubah payment_status ke "success"...  
[2026-02-21 04:46:46] local.INFO: [DOKU WEBHOOK][STEP 5] Payment status TERUPDATE: {"inquiry_id":70,"new_payment_status":"success","payment_date":"2026-02-21 04:46:46"} 
[2026-02-21 04:46:46] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil School::where("support_email", "09po@email.com") â€” cek apakah school sudah ada...  
[2026-02-21 04:46:46] local.INFO: [DOKU WEBHOOK][STEP 6] School BELUM ADA â€” memanggil School::create() untuk membuat school baru...  
[2026-02-21 04:46:46] local.INFO: [DOKU WEBHOOK][STEP 6] School BARU TERCIPTA: {"school_id":39,"name":"09po","support_email":"09po@email.com"} 
[2026-02-21 04:46:46] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil school->update() â€” set code dan database_name...  
[2026-02-21 04:46:46] local.INFO: [DOKU WEBHOOK][STEP 6] School TERUPDATE: {"school_id":39,"code":"SCH00039","database_name":"eschool_saas_39_09po"} 
[2026-02-21 04:46:46] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil User::where("email", "09po@email.com") â€” cek apakah admin sudah ada...  
[2026-02-21 04:46:46] local.INFO: [DOKU WEBHOOK][STEP 7] Admin BELUM ADA â€” memanggil User::create() untuk membuat admin baru...  
[2026-02-21 04:46:47] local.INFO: [DOKU WEBHOOK][STEP 7] Admin user TERCIPTA: {"user_id":40,"email":"09po@email.com","school_id":39} 
[2026-02-21 04:46:47] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil Role::updateOrCreate() â€” assign role "School Admin"...  
[2026-02-21 04:46:47] local.INFO: [DOKU WEBHOOK][STEP 7] Role TERCIPTA/TERUPDATE: {"role_id":36,"role_name":"School Admin"} 
[2026-02-21 04:46:47] local.INFO: [DOKU WEBHOOK][STEP 7] School admin_id diupdate ke: 40  
[2026-02-21 04:46:47] local.INFO: [DOKU WEBHOOK][STEP 8] DB::commit() â€” semua data tersimpan ke database  
[2026-02-21 04:46:47] local.INFO: [DOKU WEBHOOK][STEP 9] Memanggil SetupSchoolDatabase::dispatch(...)->afterResponse() â€” membuat database sekolah di background (setelah response)...  
[2026-02-21 04:46:47] local.INFO: [DOKU WEBHOOK][STEP 9] Parameter dispatch: {"school_id":39,"package_id":1,"school_code":"SCH00039"} 
[2026-02-21 04:46:47] local.INFO: [DOKU WEBHOOK] âœ… PROSES SELESAI â€” Sekolah berhasil diaktifkan  
[2026-02-21 04:46:47] local.INFO: [DOKU WEBHOOK] Hasil yang tercipta: {"school_id":39,"school_name":"09po","school_code":"SCH00039","database_name":"eschool_saas_39_09po","admin_email":"09po@email.com","payment_status":"success","invoice_number":"JT-1771623806"} 
[2026-02-21 04:46:47] local.INFO: ================================================================================  
[2026-02-21 04:46:47] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-21 04:46:47] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-21 04:46:47] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"OK"}  
[2026-02-21 04:46:47] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 507.29 ms  
[2026-02-21 04:46:47] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-21 10:13:41] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-21 10:13:41] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-21 10:13:41] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-21 10:13:41  
[2026-02-21 10:13:41] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-21 10:13:41] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-21 10:13:41] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-21 10:13:41] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-21 10:13:41] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-21 10:13:41] local.INFO: [WEBHOOK REQUEST] Content-Length: 1243  
[2026-02-21 10:13:41] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-21 10:13:41] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-21 10:13:41] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1243 bytes  
[2026-02-21 10:13:41] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1771643572",
    "amount": 500000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000230596"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-21 10:13:41] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-21 10:13:41] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1771643572",
        "amount": 500000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000230596"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-21 10:13:41] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-21 10:13:41] local.INFO: ================================================================================  
[2026-02-21 10:13:41] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-21 10:13:41] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-21 10:13:41] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-21 10:13:41  
[2026-02-21 10:13:41] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["d31607e2-90a4-41b3-919c-c3c48980f422"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1243"]} 
[2026-02-21 10:13:41] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1771643572","amount":500000},"virtual_account_info":{"virtual_account_number":"1900800000230596"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-21 10:13:41] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-21 10:13:41] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1771643572","transaction_status":"SUCCESS","amount":500000} 
[2026-02-21 10:13:41] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-21 10:13:41] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-21 10:13:41] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-21 10:13:41] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1771643572")->lockForUpdate()...  
[2026-02-21 10:13:41] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-21 10:13:41] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":71,"school_name":"platoon","school_email":"platoon@email.com","current_payment_status":"pending"} 
[2026-02-21 10:13:41] local.INFO: [DOKU WEBHOOK][STEP 5] Memanggil inquiry->update() â€” mengubah payment_status ke "success"...  
[2026-02-21 10:13:41] local.INFO: [DOKU WEBHOOK][STEP 5] Payment status TERUPDATE: {"inquiry_id":71,"new_payment_status":"success","payment_date":"2026-02-21 10:13:41"} 
[2026-02-21 10:13:41] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil School::where("support_email", "platoon@email.com") â€” cek apakah school sudah ada...  
[2026-02-21 10:13:41] local.INFO: [DOKU WEBHOOK][STEP 6] School BELUM ADA â€” memanggil School::create() untuk membuat school baru...  
[2026-02-21 10:13:41] local.INFO: [DOKU WEBHOOK][STEP 6] School BARU TERCIPTA: {"school_id":40,"name":"platoon","support_email":"platoon@email.com"} 
[2026-02-21 10:13:41] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil school->update() â€” set code dan database_name...  
[2026-02-21 10:13:41] local.INFO: [DOKU WEBHOOK][STEP 6] School TERUPDATE: {"school_id":40,"code":"SCH00040","database_name":"eschool_saas_40_platoon"} 
[2026-02-21 10:13:41] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil User::where("email", "platoon@email.com") â€” cek apakah admin sudah ada...  
[2026-02-21 10:13:41] local.INFO: [DOKU WEBHOOK][STEP 7] Admin BELUM ADA â€” memanggil User::create() untuk membuat admin baru...  
[2026-02-21 10:13:41] local.INFO: [DOKU WEBHOOK][STEP 7] Admin user TERCIPTA: {"user_id":41,"email":"platoon@email.com","school_id":40} 
[2026-02-21 10:13:41] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil Role::updateOrCreate() â€” assign role "School Admin"...  
[2026-02-21 10:13:41] local.INFO: [DOKU WEBHOOK][STEP 7] Role TERCIPTA/TERUPDATE: {"role_id":37,"role_name":"School Admin"} 
[2026-02-21 10:13:41] local.INFO: [DOKU WEBHOOK][STEP 7] School admin_id diupdate ke: 41  
[2026-02-21 10:13:41] local.INFO: [DOKU WEBHOOK][STEP 8] DB::commit() â€” semua data tersimpan ke database  
[2026-02-21 10:13:41] local.INFO: [DOKU WEBHOOK][STEP 9] Memanggil SetupSchoolDatabase::dispatch(...)->afterResponse() â€” membuat database sekolah di background (setelah response)...  
[2026-02-21 10:13:41] local.INFO: [DOKU WEBHOOK][STEP 9] Parameter dispatch: {"school_id":40,"package_id":3,"school_code":"SCH00040"} 
[2026-02-21 10:13:41] local.INFO: [DOKU WEBHOOK] âœ… PROSES SELESAI â€” Sekolah berhasil diaktifkan  
[2026-02-21 10:13:41] local.INFO: [DOKU WEBHOOK] Hasil yang tercipta: {"school_id":40,"school_name":"platoon","school_code":"SCH00040","database_name":"eschool_saas_40_platoon","admin_email":"platoon@email.com","payment_status":"success","invoice_number":"JT-1771643572"} 
[2026-02-21 10:13:41] local.INFO: ================================================================================  
[2026-02-21 10:13:41] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-21 10:13:41] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-21 10:13:41] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"OK"}  
[2026-02-21 10:13:41] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 483.49 ms  
[2026-02-21 10:13:41] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-21 16:09:29] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-21 16:09:29] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-21 16:09:29] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-21 16:09:29  
[2026-02-21 16:09:29] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-21 16:09:29] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-21 16:09:29] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-21 16:09:29] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-21 16:09:29] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-21 16:09:29] local.INFO: [WEBHOOK REQUEST] Content-Length: 1243  
[2026-02-21 16:09:29] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-21 16:09:29] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-21 16:09:29] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1243 bytes  
[2026-02-21 16:09:29] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1771664906",
    "amount": 500000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000230596"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-21 16:09:29] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-21 16:09:29] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1771664906",
        "amount": 500000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000230596"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-21 16:09:29] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-21 16:09:29] local.INFO: ================================================================================  
[2026-02-21 16:09:29] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-21 16:09:29] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-21 16:09:29] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-21 16:09:29  
[2026-02-21 16:09:29] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["d45d115b-909b-4503-882f-cfd0b5582ca1"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1243"]} 
[2026-02-21 16:09:29] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1771664906","amount":500000},"virtual_account_info":{"virtual_account_number":"1900800000230596"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-21 16:09:29] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-21 16:09:29] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1771664906","transaction_status":"SUCCESS","amount":500000} 
[2026-02-21 16:09:29] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-21 16:09:29] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-21 16:09:29] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-21 16:09:29] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1771664906")->lockForUpdate()...  
[2026-02-21 16:09:29] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-21 16:09:29] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":72,"school_name":"TATATA","school_email":"tatata@email.com","current_payment_status":"pending"} 
[2026-02-21 16:09:29] local.INFO: [DOKU WEBHOOK][STEP 5] Memanggil inquiry->update() â€” mengubah payment_status ke "success"...  
[2026-02-21 16:09:29] local.INFO: [DOKU WEBHOOK][STEP 5] Payment status TERUPDATE: {"inquiry_id":72,"new_payment_status":"success","payment_date":"2026-02-21 16:09:29"} 
[2026-02-21 16:09:29] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil School::where("support_email", "tatata@email.com") â€” cek apakah school sudah ada...  
[2026-02-21 16:09:29] local.INFO: [DOKU WEBHOOK][STEP 6] School BELUM ADA â€” memanggil School::create() untuk membuat school baru...  
[2026-02-21 16:09:29] local.INFO: [DOKU WEBHOOK][STEP 6] School BARU TERCIPTA: {"school_id":41,"name":"TATATA","support_email":"tatata@email.com"} 
[2026-02-21 16:09:29] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil school->update() â€” set code dan database_name...  
[2026-02-21 16:09:29] local.INFO: [DOKU WEBHOOK][STEP 6] School TERUPDATE: {"school_id":41,"code":"SCH00041","database_name":"eschool_saas_41_tatata"} 
[2026-02-21 16:09:29] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil User::where("email", "tatata@email.com") â€” cek apakah admin sudah ada...  
[2026-02-21 16:09:29] local.INFO: [DOKU WEBHOOK][STEP 7] Admin BELUM ADA â€” memanggil User::create() untuk membuat admin baru...  
[2026-02-21 16:09:29] local.INFO: [DOKU WEBHOOK][STEP 7] Admin user TERCIPTA: {"user_id":42,"email":"tatata@email.com","school_id":41} 
[2026-02-21 16:09:29] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil Role::updateOrCreate() â€” assign role "School Admin"...  
[2026-02-21 16:09:29] local.INFO: [DOKU WEBHOOK][STEP 7] Role TERCIPTA/TERUPDATE: {"role_id":38,"role_name":"School Admin"} 
[2026-02-21 16:09:29] local.INFO: [DOKU WEBHOOK][STEP 7] School admin_id diupdate ke: 42  
[2026-02-21 16:09:29] local.INFO: [DOKU WEBHOOK][STEP 8] DB::commit() â€” semua data tersimpan ke database  
[2026-02-21 16:09:29] local.INFO: [DOKU WEBHOOK][STEP 9] Memanggil SetupSchoolDatabase::dispatch(...)->afterResponse() â€” membuat database sekolah di background (setelah response)...  
[2026-02-21 16:09:29] local.INFO: [DOKU WEBHOOK][STEP 9] Parameter dispatch: {"school_id":41,"package_id":1,"school_code":"SCH00041"} 
[2026-02-21 16:09:29] local.INFO: [DOKU WEBHOOK] âœ… PROSES SELESAI â€” Sekolah berhasil diaktifkan  
[2026-02-21 16:09:29] local.INFO: [DOKU WEBHOOK] Hasil yang tercipta: {"school_id":41,"school_name":"TATATA","school_code":"SCH00041","database_name":"eschool_saas_41_tatata","admin_email":"tatata@email.com","payment_status":"success","invoice_number":"JT-1771664906"} 
[2026-02-21 16:09:29] local.INFO: ================================================================================  
[2026-02-21 16:09:29] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-21 16:09:29] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-21 16:09:29] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"OK"}  
[2026-02-21 16:09:29] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 239.85 ms  
[2026-02-21 16:09:29] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-21 19:31:29] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-21 19:31:29] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-21 19:31:29] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-21 19:31:29  
[2026-02-21 19:31:29] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-21 19:31:29] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-21 19:31:29] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-21 19:31:29] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-21 19:31:29] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-21 19:31:29] local.INFO: [WEBHOOK REQUEST] Content-Length: 1243  
[2026-02-21 19:31:29] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-21 19:31:29] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-21 19:31:29] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1243 bytes  
[2026-02-21 19:31:29] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1771676891",
    "amount": 500000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000230596"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-21 19:31:29] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-21 19:31:29] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1771676891",
        "amount": 500000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000230596"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-21 19:31:29] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-21 19:31:29] local.INFO: ================================================================================  
[2026-02-21 19:31:29] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-21 19:31:29] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-21 19:31:29] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-21 19:31:29  
[2026-02-21 19:31:29] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["b162b6cf-7e8e-464e-ac68-48ce58819855"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1243"]} 
[2026-02-21 19:31:29] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1771676891","amount":500000},"virtual_account_info":{"virtual_account_number":"1900800000230596"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-21 19:31:29] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-21 19:31:29] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1771676891","transaction_status":"SUCCESS","amount":500000} 
[2026-02-21 19:31:29] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-21 19:31:29] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-21 19:31:29] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-21 19:31:29] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1771676891")->lockForUpdate()...  
[2026-02-21 19:31:29] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-21 19:31:29] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":73,"school_name":"BRUBRU","school_email":"brbr@email.com","current_payment_status":"pending"} 
[2026-02-21 19:31:29] local.INFO: [DOKU WEBHOOK][STEP 5] Memanggil inquiry->update() â€” mengubah payment_status ke "success"...  
[2026-02-21 19:31:29] local.INFO: [DOKU WEBHOOK][STEP 5] Payment status TERUPDATE: {"inquiry_id":73,"new_payment_status":"success","payment_date":"2026-02-21 19:31:29"} 
[2026-02-21 19:31:29] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil School::where("support_email", "brbr@email.com") â€” cek apakah school sudah ada...  
[2026-02-21 19:31:29] local.INFO: [DOKU WEBHOOK][STEP 6] School BELUM ADA â€” memanggil School::create() untuk membuat school baru...  
[2026-02-21 19:31:29] local.INFO: [DOKU WEBHOOK][STEP 6] School BARU TERCIPTA: {"school_id":42,"name":"BRUBRU","support_email":"brbr@email.com"} 
[2026-02-21 19:31:29] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil school->update() â€” set code dan database_name...  
[2026-02-21 19:31:29] local.INFO: [DOKU WEBHOOK][STEP 6] School TERUPDATE: {"school_id":42,"code":"SCH00042","database_name":"eschool_saas_42_brubru"} 
[2026-02-21 19:31:29] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil User::where("email", "brbr@email.com") â€” cek apakah admin sudah ada...  
[2026-02-21 19:31:29] local.INFO: [DOKU WEBHOOK][STEP 7] Admin BELUM ADA â€” memanggil User::create() untuk membuat admin baru...  
[2026-02-21 19:31:29] local.INFO: [DOKU WEBHOOK][STEP 7] Admin user TERCIPTA: {"user_id":43,"email":"brbr@email.com","school_id":42} 
[2026-02-21 19:31:29] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil Role::updateOrCreate() â€” assign role "School Admin"...  
[2026-02-21 19:31:30] local.INFO: [DOKU WEBHOOK][STEP 7] Role TERCIPTA/TERUPDATE: {"role_id":39,"role_name":"School Admin"} 
[2026-02-21 19:31:30] local.INFO: [DOKU WEBHOOK][STEP 7] School admin_id diupdate ke: 43  
[2026-02-21 19:31:30] local.INFO: [DOKU WEBHOOK][STEP 8] DB::commit() â€” semua data tersimpan ke database  
[2026-02-21 19:31:30] local.INFO: [DOKU WEBHOOK][STEP 9] Memanggil SetupSchoolDatabase::dispatch(...)->afterResponse() â€” membuat database sekolah di background (setelah response)...  
[2026-02-21 19:31:30] local.INFO: [DOKU WEBHOOK][STEP 9] Parameter dispatch: {"school_id":42,"package_id":1,"school_code":"SCH00042"} 
[2026-02-21 19:31:31] local.INFO: [DOKU WEBHOOK] âœ… PROSES SELESAI â€” Sekolah berhasil diaktifkan  
[2026-02-21 19:31:31] local.INFO: [DOKU WEBHOOK] Hasil yang tercipta: {"school_id":42,"school_name":"BRUBRU","school_code":"SCH00042","database_name":"eschool_saas_42_brubru","admin_email":"brbr@email.com","payment_status":"success","invoice_number":"JT-1771676891"} 
[2026-02-21 19:31:31] local.INFO: ================================================================================  
[2026-02-21 19:31:31] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-21 19:31:31] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-21 19:31:31] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"OK"}  
[2026-02-21 19:31:31] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 1876.36 ms  
[2026-02-21 19:31:31] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-21 20:39:37] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-21 20:39:37] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-21 20:39:37] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-21 20:39:37  
[2026-02-21 20:39:37] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-21 20:39:37] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-21 20:39:37] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-21 20:39:37] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-21 20:39:37] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-21 20:39:37] local.INFO: [WEBHOOK REQUEST] Content-Length: 1243  
[2026-02-21 20:39:37] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-21 20:39:37] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-21 20:39:37] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1243 bytes  
[2026-02-21 20:39:37] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1771681150",
    "amount": 500000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000230596"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-21 20:39:37] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-21 20:39:37] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1771681150",
        "amount": 500000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000230596"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-21 20:39:37] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-21 20:39:37] local.INFO: ================================================================================  
[2026-02-21 20:39:37] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-21 20:39:37] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-21 20:39:37] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-21 20:39:37  
[2026-02-21 20:39:37] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["bcc9b9d3-e842-445c-898f-7eabbbbda115"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1243"]} 
[2026-02-21 20:39:37] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1771681150","amount":500000},"virtual_account_info":{"virtual_account_number":"1900800000230596"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-21 20:39:37] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-21 20:39:37] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1771681150","transaction_status":"SUCCESS","amount":500000} 
[2026-02-21 20:39:37] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-21 20:39:37] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-21 20:39:37] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-21 20:39:37] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1771681150")->lockForUpdate()...  
[2026-02-21 20:39:37] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-21 20:39:37] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":74,"school_name":"jejeje","school_email":"jjj@email.com","current_payment_status":"pending"} 
[2026-02-21 20:39:37] local.INFO: [DOKU WEBHOOK][STEP 5] Memanggil inquiry->update() â€” mengubah payment_status ke "success"...  
[2026-02-21 20:39:37] local.INFO: [DOKU WEBHOOK][STEP 5] Payment status TERUPDATE: {"inquiry_id":74,"new_payment_status":"success","payment_date":"2026-02-21 20:39:37"} 
[2026-02-21 20:39:37] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil School::where("support_email", "jjj@email.com") â€” cek apakah school sudah ada...  
[2026-02-21 20:39:37] local.INFO: [DOKU WEBHOOK][STEP 6] School BELUM ADA â€” memanggil School::create() untuk membuat school baru...  
[2026-02-21 20:39:37] local.INFO: [DOKU WEBHOOK][STEP 6] School BARU TERCIPTA: {"school_id":43,"name":"jejeje","support_email":"jjj@email.com"} 
[2026-02-21 20:39:37] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil school->update() â€” set code dan database_name...  
[2026-02-21 20:39:37] local.INFO: [DOKU WEBHOOK][STEP 6] School TERUPDATE: {"school_id":43,"code":"SCH00043","database_name":"eschool_saas_43_jejeje"} 
[2026-02-21 20:39:37] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil User::where("email", "jjj@email.com") â€” cek apakah admin sudah ada...  
[2026-02-21 20:39:37] local.INFO: [DOKU WEBHOOK][STEP 7] Admin BELUM ADA â€” memanggil User::create() untuk membuat admin baru...  
[2026-02-21 20:39:37] local.INFO: [DOKU WEBHOOK][STEP 7] Admin user TERCIPTA: {"user_id":44,"email":"jjj@email.com","school_id":43} 
[2026-02-21 20:39:37] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil Role::updateOrCreate() â€” assign role "School Admin"...  
[2026-02-21 20:39:37] local.INFO: [DOKU WEBHOOK][STEP 7] Role TERCIPTA/TERUPDATE: {"role_id":40,"role_name":"School Admin"} 
[2026-02-21 20:39:37] local.INFO: [DOKU WEBHOOK][STEP 7] School admin_id diupdate ke: 44  
[2026-02-21 20:39:37] local.INFO: [DOKU WEBHOOK][STEP 8] DB::commit() â€” semua data tersimpan ke database  
[2026-02-21 20:39:37] local.INFO: [DOKU WEBHOOK][STEP 9] Memanggil SetupSchoolDatabase::dispatch(...)->afterResponse() â€” membuat database sekolah di background (setelah response)...  
[2026-02-21 20:39:37] local.INFO: [DOKU WEBHOOK][STEP 9] Parameter dispatch: {"school_id":43,"package_id":1,"school_code":"SCH00043"} 
[2026-02-21 20:39:37] local.INFO: [DOKU WEBHOOK] âœ… PROSES SELESAI â€” Sekolah berhasil diaktifkan  
[2026-02-21 20:39:37] local.INFO: [DOKU WEBHOOK] Hasil yang tercipta: {"school_id":43,"school_name":"jejeje","school_code":"SCH00043","database_name":"eschool_saas_43_jejeje","admin_email":"jjj@email.com","payment_status":"success","invoice_number":"JT-1771681150"} 
[2026-02-21 20:39:37] local.INFO: ================================================================================  
[2026-02-21 20:39:37] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-21 20:39:37] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-21 20:39:37] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"OK"}  
[2026-02-21 20:39:37] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 599.31 ms  
[2026-02-21 20:39:37] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-23 08:52:36] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-23 08:52:36] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-23 08:52:36] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-23 08:52:36  
[2026-02-23 08:52:36] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-23 08:52:36] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-23 08:52:36] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-23 08:52:36] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-23 08:52:36] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-23 08:52:36] local.INFO: [WEBHOOK REQUEST] Content-Length: 1243  
[2026-02-23 08:52:36] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-23 08:52:36] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-23 08:52:36] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1243 bytes  
[2026-02-23 08:52:36] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1771811485",
    "amount": 500000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000230596"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-23 08:52:36] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-23 08:52:36] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1771811485",
        "amount": 500000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000230596"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-23 08:52:36] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-23 08:52:36] local.INFO: ================================================================================  
[2026-02-23 08:52:36] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-23 08:52:36] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-23 08:52:36] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-23 08:52:36  
[2026-02-23 08:52:36] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["ac9f6957-d931-431e-bf5a-1f46beaea34e"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1243"]} 
[2026-02-23 08:52:36] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1771811485","amount":500000},"virtual_account_info":{"virtual_account_number":"1900800000230596"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-23 08:52:36] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-23 08:52:36] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1771811485","transaction_status":"SUCCESS","amount":500000} 
[2026-02-23 08:52:36] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-23 08:52:36] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-23 08:52:36] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-23 08:52:36] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1771811485")->lockForUpdate()...  
[2026-02-23 08:52:36] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-23 08:52:36] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":75,"school_name":"test fitur all unlocked","school_email":"fitur@email.com","current_payment_status":"pending"} 
[2026-02-23 08:52:36] local.INFO: [DOKU WEBHOOK][STEP 5] Memanggil inquiry->update() â€” mengubah payment_status ke "success"...  
[2026-02-23 08:52:36] local.INFO: [DOKU WEBHOOK][STEP 5] Payment status TERUPDATE: {"inquiry_id":75,"new_payment_status":"success","payment_date":"2026-02-23 08:52:36"} 
[2026-02-23 08:52:36] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil School::where("support_email", "fitur@email.com") â€” cek apakah school sudah ada...  
[2026-02-23 08:52:36] local.INFO: [DOKU WEBHOOK][STEP 6] School BELUM ADA â€” memanggil School::create() untuk membuat school baru...  
[2026-02-23 08:52:36] local.INFO: [DOKU WEBHOOK][STEP 6] School BARU TERCIPTA: {"school_id":44,"name":"test fitur all unlocked","support_email":"fitur@email.com"} 
[2026-02-23 08:52:36] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil school->update() â€” set code dan database_name...  
[2026-02-23 08:52:36] local.INFO: [DOKU WEBHOOK][STEP 6] School TERUPDATE: {"school_id":44,"code":"SCH00044","database_name":"eschool_saas_44_test-fitur-all-unlocked"} 
[2026-02-23 08:52:36] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil User::where("email", "fitur@email.com") â€” cek apakah admin sudah ada...  
[2026-02-23 08:52:36] local.INFO: [DOKU WEBHOOK][STEP 7] Admin BELUM ADA â€” memanggil User::create() untuk membuat admin baru...  
[2026-02-23 08:52:36] local.INFO: [DOKU WEBHOOK][STEP 7] Admin user TERCIPTA: {"user_id":45,"email":"fitur@email.com","school_id":44} 
[2026-02-23 08:52:36] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil Role::updateOrCreate() â€” assign role "School Admin"...  
[2026-02-23 08:52:36] local.INFO: [DOKU WEBHOOK][STEP 7] Role TERCIPTA/TERUPDATE: {"role_id":41,"role_name":"School Admin"} 
[2026-02-23 08:52:36] local.INFO: [DOKU WEBHOOK][STEP 7] School admin_id diupdate ke: 45  
[2026-02-23 08:52:36] local.INFO: [DOKU WEBHOOK][STEP 8] DB::commit() â€” semua data tersimpan ke database  
[2026-02-23 08:52:36] local.INFO: [DOKU WEBHOOK][STEP 9] Memanggil SetupSchoolDatabase::dispatch(...)->afterResponse() â€” membuat database sekolah di background (setelah response)...  
[2026-02-23 08:52:36] local.INFO: [DOKU WEBHOOK][STEP 9] Parameter dispatch: {"school_id":44,"package_id":3,"school_code":"SCH00044"} 
[2026-02-23 08:52:36] local.INFO: [DOKU WEBHOOK] âœ… PROSES SELESAI â€” Sekolah berhasil diaktifkan  
[2026-02-23 08:52:36] local.INFO: [DOKU WEBHOOK] Hasil yang tercipta: {"school_id":44,"school_name":"test fitur all unlocked","school_code":"SCH00044","database_name":"eschool_saas_44_test-fitur-all-unlocked","admin_email":"fitur@email.com","payment_status":"success","invoice_number":"JT-1771811485"} 
[2026-02-23 08:52:36] local.INFO: ================================================================================  
[2026-02-23 08:52:36] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-23 08:52:36] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-23 08:52:36] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"OK"}  
[2026-02-23 08:52:36] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 684 ms  
[2026-02-23 08:52:36] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-24 11:17:02] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-24 11:17:02] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-24 11:17:02] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-24 11:17:02  
[2026-02-24 11:17:02] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-24 11:17:02] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-24 11:17:02] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-24 11:17:02] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-24 11:17:02] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-24 11:17:02] local.INFO: [WEBHOOK REQUEST] Content-Length: 1243  
[2026-02-24 11:17:02] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-24 11:17:02] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-24 11:17:02] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1243 bytes  
[2026-02-24 11:17:02] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1771906416",
    "amount": 500000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000230596"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-24 11:17:02] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-24 11:17:02] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1771906416",
        "amount": 500000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000230596"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-24 11:17:02] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-24 11:17:02] local.INFO: ================================================================================  
[2026-02-24 11:17:02] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-24 11:17:02] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-24 11:17:02] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-24 11:17:02  
[2026-02-24 11:17:02] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["fdb0a5db-7123-43e4-ac58-654ab3b128ca"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1243"]} 
[2026-02-24 11:17:02] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1771906416","amount":500000},"virtual_account_info":{"virtual_account_number":"1900800000230596"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-24 11:17:02] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-24 11:17:02] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1771906416","transaction_status":"SUCCESS","amount":500000} 
[2026-02-24 11:17:02] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-24 11:17:02] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-24 11:17:02] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-24 11:17:02] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1771906416")->lockForUpdate()...  
[2026-02-24 11:17:02] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-24 11:17:02] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":1,"school_name":"pleydugh","school_email":"pdl@email.com","current_payment_status":"pending"} 
[2026-02-24 11:17:02] local.INFO: [DOKU WEBHOOK][STEP 5] Memanggil inquiry->update() â€” mengubah payment_status ke "success"...  
[2026-02-24 11:17:02] local.INFO: [DOKU WEBHOOK][STEP 5] Payment status TERUPDATE: {"inquiry_id":1,"new_payment_status":"success","payment_date":"2026-02-24 11:17:02"} 
[2026-02-24 11:17:02] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil School::where("support_email", "pdl@email.com") â€” cek apakah school sudah ada...  
[2026-02-24 11:17:02] local.INFO: [DOKU WEBHOOK][STEP 6] School BELUM ADA â€” memanggil School::create() untuk membuat school baru...  
[2026-02-24 11:17:02] local.INFO: [DOKU WEBHOOK][STEP 6] School BARU TERCIPTA: {"school_id":2,"name":"pleydugh","support_email":"pdl@email.com"} 
[2026-02-24 11:17:02] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil school->update() â€” set code dan database_name...  
[2026-02-24 11:17:02] local.INFO: [DOKU WEBHOOK][STEP 6] School TERUPDATE: {"school_id":2,"code":"SCH00002","database_name":"eschool_saas_2_pleydugh"} 
[2026-02-24 11:17:02] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil User::where("email", "pdl@email.com") â€” cek apakah admin sudah ada...  
[2026-02-24 11:17:02] local.INFO: [DOKU WEBHOOK][STEP 7] Admin BELUM ADA â€” memanggil User::create() untuk membuat admin baru...  
[2026-02-24 11:17:02] local.INFO: [DOKU WEBHOOK][STEP 7] Admin user TERCIPTA: {"user_id":3,"email":"pdl@email.com","school_id":2} 
[2026-02-24 11:17:02] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil Role::updateOrCreate() â€” assign role "School Admin"...  
[2026-02-24 11:17:02] local.INFO: [DOKU WEBHOOK][STEP 7] Role TERCIPTA/TERUPDATE: {"role_id":2,"role_name":"School Admin"} 
[2026-02-24 11:17:02] local.INFO: [DOKU WEBHOOK][STEP 7] School admin_id diupdate ke: 3  
[2026-02-24 11:17:02] local.INFO: [DOKU WEBHOOK][STEP 8] DB::commit() â€” semua data tersimpan ke database  
[2026-02-24 11:17:02] local.INFO: [DOKU WEBHOOK][STEP 9] Memanggil SetupSchoolDatabase::dispatch(...)->afterResponse() â€” membuat database sekolah di background (setelah response)...  
[2026-02-24 11:17:02] local.INFO: [DOKU WEBHOOK][STEP 9] Parameter dispatch: {"school_id":2,"package_id":1,"school_code":"SCH00002"} 
[2026-02-24 11:17:02] local.INFO: [DOKU WEBHOOK] âœ… PROSES SELESAI â€” Sekolah berhasil diaktifkan  
[2026-02-24 11:17:02] local.INFO: [DOKU WEBHOOK] Hasil yang tercipta: {"school_id":2,"school_name":"pleydugh","school_code":"SCH00002","database_name":"eschool_saas_2_pleydugh","admin_email":"pdl@email.com","payment_status":"success","invoice_number":"JT-1771906416"} 
[2026-02-24 11:17:02] local.INFO: ================================================================================  
[2026-02-24 11:17:02] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-24 11:17:02] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-24 11:17:02] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"OK"}  
[2026-02-24 11:17:02] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 789.74 ms  
[2026-02-24 11:17:02] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-25 09:38:20] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-25 09:38:20] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-25 09:38:20] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-25 09:38:20  
[2026-02-25 09:38:20] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-25 09:38:20] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-25 09:38:20] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-25 09:38:20] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-25 09:38:20] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-25 09:38:20] local.INFO: [WEBHOOK REQUEST] Content-Length: 1243  
[2026-02-25 09:38:20] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-25 09:38:20] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-25 09:38:20] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1243 bytes  
[2026-02-25 09:38:20] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1771987014",
    "amount": 500000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000230596"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-25 09:38:20] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-25 09:38:20] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1771987014",
        "amount": 500000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000230596"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-25 09:38:20] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-25 09:38:20] local.INFO: ================================================================================  
[2026-02-25 09:38:20] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-25 09:38:20] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-25 09:38:20] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-25 09:38:20  
[2026-02-25 09:38:20] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["94128932-cff2-4e05-8f58-b2f5d1bd8476"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1243"]} 
[2026-02-25 09:38:20] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1771987014","amount":500000},"virtual_account_info":{"virtual_account_number":"1900800000230596"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-25 09:38:20] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-25 09:38:20] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1771987014","transaction_status":"SUCCESS","amount":500000} 
[2026-02-25 09:38:20] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-25 09:38:20] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-25 09:38:20] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-25 09:38:20] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1771987014")->lockForUpdate()...  
[2026-02-25 09:38:20] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-25 09:38:20] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":2,"school_name":"SMAN 1 JAKARTA","school_email":"kantor@sman.sch.id","current_payment_status":"pending"} 
[2026-02-25 09:38:20] local.INFO: [DOKU WEBHOOK][STEP 5] Memanggil inquiry->update() â€” mengubah payment_status ke "success"...  
[2026-02-25 09:38:20] local.INFO: [DOKU WEBHOOK][STEP 5] Payment status TERUPDATE: {"inquiry_id":2,"new_payment_status":"success","payment_date":"2026-02-25 09:38:20"} 
[2026-02-25 09:38:20] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil School::where("support_email", "kantor@sman.sch.id") â€” cek apakah school sudah ada...  
[2026-02-25 09:38:20] local.INFO: [DOKU WEBHOOK][STEP 6] School BELUM ADA â€” memanggil School::create() untuk membuat school baru...  
[2026-02-25 09:38:20] local.INFO: [DOKU WEBHOOK][STEP 6] School BARU TERCIPTA: {"school_id":3,"name":"SMAN 1 JAKARTA","support_email":"kantor@sman.sch.id"} 
[2026-02-25 09:38:20] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil school->update() â€” set code dan database_name...  
[2026-02-25 09:38:20] local.INFO: [DOKU WEBHOOK][STEP 6] School TERUPDATE: {"school_id":3,"code":"SCH00003","database_name":"eschool_saas_3_sman-1-jakarta"} 
[2026-02-25 09:38:20] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil User::where("email", "kantor@sman.sch.id") â€” cek apakah admin sudah ada...  
[2026-02-25 09:38:20] local.INFO: [DOKU WEBHOOK][STEP 7] Admin BELUM ADA â€” memanggil User::create() untuk membuat admin baru...  
[2026-02-25 09:38:21] local.INFO: [DOKU WEBHOOK][STEP 7] Admin user TERCIPTA: {"user_id":4,"email":"kantor@sman.sch.id","school_id":3} 
[2026-02-25 09:38:21] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil Role::updateOrCreate() â€” assign role "School Admin"...  
[2026-02-25 09:38:21] local.INFO: [DOKU WEBHOOK][STEP 7] Role TERCIPTA/TERUPDATE: {"role_id":3,"role_name":"School Admin"} 
[2026-02-25 09:38:21] local.INFO: [DOKU WEBHOOK][STEP 7] School admin_id diupdate ke: 4  
[2026-02-25 09:38:21] local.INFO: [DOKU WEBHOOK][STEP 8] DB::commit() â€” semua data tersimpan ke database  
[2026-02-25 09:38:21] local.INFO: [DOKU WEBHOOK][STEP 9] Memanggil SetupSchoolDatabase::dispatch(...)->afterResponse() â€” membuat database sekolah di background (setelah response)...  
[2026-02-25 09:38:21] local.INFO: [DOKU WEBHOOK][STEP 9] Parameter dispatch: {"school_id":3,"package_id":1,"school_code":"SCH00003"} 
[2026-02-25 09:38:21] local.INFO: [DOKU WEBHOOK] âœ… PROSES SELESAI â€” Sekolah berhasil diaktifkan  
[2026-02-25 09:38:21] local.INFO: [DOKU WEBHOOK] Hasil yang tercipta: {"school_id":3,"school_name":"SMAN 1 JAKARTA","school_code":"SCH00003","database_name":"eschool_saas_3_sman-1-jakarta","admin_email":"kantor@sman.sch.id","payment_status":"success","invoice_number":"JT-1771987014"} 
[2026-02-25 09:38:21] local.INFO: ================================================================================  
[2026-02-25 09:38:21] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-25 09:38:21] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-25 09:38:21] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"OK"}  
[2026-02-25 09:38:21] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 281.63 ms  
[2026-02-25 09:38:21] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-25 11:25:48] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-25 11:25:48] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-25 11:25:48] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-25 11:25:48  
[2026-02-25 11:25:48] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-25 11:25:48] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-25 11:25:48] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-25 11:25:48] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-25 11:25:48] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-25 11:25:48] local.INFO: [WEBHOOK REQUEST] Content-Length: 1243  
[2026-02-25 11:25:48] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-25 11:25:48] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-25 11:25:48] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1243 bytes  
[2026-02-25 11:25:48] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1771993514",
    "amount": 500000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000230596"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-25 11:25:48] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-25 11:25:48] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1771993514",
        "amount": 500000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000230596"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-25 11:25:48] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-25 11:25:48] local.INFO: ================================================================================  
[2026-02-25 11:25:48] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-25 11:25:48] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-25 11:25:48] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-25 11:25:48  
[2026-02-25 11:25:48] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["e631141b-9b1d-4f2b-9dd0-cab8d53e4644"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1243"]} 
[2026-02-25 11:25:48] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1771993514","amount":500000},"virtual_account_info":{"virtual_account_number":"1900800000230596"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-25 11:25:48] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-25 11:25:48] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1771993514","transaction_status":"SUCCESS","amount":500000} 
[2026-02-25 11:25:48] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-25 11:25:48] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-25 11:25:48] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-25 11:25:48] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1771993514")->lockForUpdate()...  
[2026-02-25 11:25:48] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-25 11:25:48] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":3,"school_name":"test payment redirection","school_email":"payment@email.com","current_payment_status":"pending"} 
[2026-02-25 11:25:48] local.INFO: [DOKU WEBHOOK][STEP 5] Memanggil inquiry->update() â€” mengubah payment_status ke "success"...  
[2026-02-25 11:25:48] local.INFO: [DOKU WEBHOOK][STEP 5] Payment status TERUPDATE: {"inquiry_id":3,"new_payment_status":"success","payment_date":"2026-02-25 11:25:48"} 
[2026-02-25 11:25:48] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil School::where("support_email", "payment@email.com") â€” cek apakah school sudah ada...  
[2026-02-25 11:25:48] local.INFO: [DOKU WEBHOOK][STEP 6] School BELUM ADA â€” memanggil School::create() untuk membuat school baru...  
[2026-02-25 11:25:48] local.INFO: [DOKU WEBHOOK][STEP 6] School BARU TERCIPTA: {"school_id":4,"name":"test payment redirection","support_email":"payment@email.com"} 
[2026-02-25 11:25:48] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil school->update() â€” set code dan database_name...  
[2026-02-25 11:25:48] local.INFO: [DOKU WEBHOOK][STEP 6] School TERUPDATE: {"school_id":4,"code":"SCH00004","database_name":"eschool_saas_4_test-payment-redirection"} 
[2026-02-25 11:25:48] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil User::where("email", "payment@email.com") â€” cek apakah admin sudah ada...  
[2026-02-25 11:25:48] local.INFO: [DOKU WEBHOOK][STEP 7] Admin BELUM ADA â€” memanggil User::create() untuk membuat admin baru...  
[2026-02-25 11:25:48] local.INFO: [DOKU WEBHOOK][STEP 7] Admin user TERCIPTA: {"user_id":5,"email":"payment@email.com","school_id":4} 
[2026-02-25 11:25:48] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil Role::updateOrCreate() â€” assign role "School Admin"...  
[2026-02-25 11:25:48] local.INFO: [DOKU WEBHOOK][STEP 7] Role TERCIPTA/TERUPDATE: {"role_id":4,"role_name":"School Admin"} 
[2026-02-25 11:25:48] local.INFO: [DOKU WEBHOOK][STEP 7] School admin_id diupdate ke: 5  
[2026-02-25 11:25:48] local.INFO: [DOKU WEBHOOK][STEP 8] DB::commit() â€” semua data tersimpan ke database  
[2026-02-25 11:25:48] local.INFO: [DOKU WEBHOOK][STEP 9] Memanggil SetupSchoolDatabase::dispatch(...)->afterResponse() â€” membuat database sekolah di background (setelah response)...  
[2026-02-25 11:25:48] local.INFO: [DOKU WEBHOOK][STEP 9] Parameter dispatch: {"school_id":4,"package_id":1,"school_code":"SCH00004"} 
[2026-02-25 11:25:48] local.INFO: [DOKU WEBHOOK] âœ… PROSES SELESAI â€” Sekolah berhasil diaktifkan  
[2026-02-25 11:25:48] local.INFO: [DOKU WEBHOOK] Hasil yang tercipta: {"school_id":4,"school_name":"test payment redirection","school_code":"SCH00004","database_name":"eschool_saas_4_test-payment-redirection","admin_email":"payment@email.com","payment_status":"success","invoice_number":"JT-1771993514"} 
[2026-02-25 11:25:48] local.INFO: ================================================================================  
[2026-02-25 11:25:48] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-25 11:25:48] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-25 11:25:48] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"OK"}  
[2026-02-25 11:25:48] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 416.98 ms  
[2026-02-25 11:25:48] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-25 11:26:41] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-25 11:26:41] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-25 11:26:41] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-25 11:26:41  
[2026-02-25 11:26:41] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-25 11:26:41] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-25 11:26:41] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-25 11:26:41] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-25 11:26:41] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-25 11:26:41] local.INFO: [WEBHOOK REQUEST] Content-Length: 1243  
[2026-02-25 11:26:41] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-25 11:26:41] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-25 11:26:41] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1243 bytes  
[2026-02-25 11:26:41] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1771993514",
    "amount": 500000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000232845"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-25 11:26:41] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-25 11:26:41] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1771993514",
        "amount": 500000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000232845"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-25 11:26:41] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-25 11:26:41] local.INFO: ================================================================================  
[2026-02-25 11:26:41] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-25 11:26:41] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-25 11:26:41] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-25 11:26:41  
[2026-02-25 11:26:41] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["a9cd97ab-8527-4fb9-9e35-63c2a46b9156"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1243"]} 
[2026-02-25 11:26:41] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1771993514","amount":500000},"virtual_account_info":{"virtual_account_number":"1900800000232845"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-25 11:26:41] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-25 11:26:41] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1771993514","transaction_status":"SUCCESS","amount":500000} 
[2026-02-25 11:26:41] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-25 11:26:41] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-25 11:26:41] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-25 11:26:41] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1771993514")->lockForUpdate()...  
[2026-02-25 11:26:41] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-25 11:26:41] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":3,"school_name":"test payment redirection","school_email":"payment@email.com","current_payment_status":"success"} 
[2026-02-25 11:26:41] local.INFO: [DOKU WEBHOOK][STEP 4] Invoice SUDAH PERNAH DIBAYAR â€” skip proses  
[2026-02-25 11:26:41] local.INFO: ================================================================================  
[2026-02-25 11:26:41] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-25 11:26:41] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-25 11:26:41] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"Already processed"}  
[2026-02-25 11:26:41] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 45.71 ms  
[2026-02-25 11:26:41] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-25 11:30:06] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-25 11:30:06] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-25 11:30:06] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-25 11:30:06  
[2026-02-25 11:30:06] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-25 11:30:06] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-25 11:30:06] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-25 11:30:06] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-25 11:30:06] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-25 11:30:06] local.INFO: [WEBHOOK REQUEST] Content-Length: 1244  
[2026-02-25 11:30:06] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-25 11:30:06] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-25 11:30:06] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1244 bytes  
[2026-02-25 11:30:06] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1771993744",
    "amount": 3000000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000232846"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-25 11:30:06] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-25 11:30:06] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1771993744",
        "amount": 3000000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000232846"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-25 11:30:06] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-25 11:30:06] local.INFO: ================================================================================  
[2026-02-25 11:30:06] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-25 11:30:06] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-25 11:30:06] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-25 11:30:06  
[2026-02-25 11:30:06] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["2051353b-2461-4103-9322-338dc0d3ae6e"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1244"]} 
[2026-02-25 11:30:06] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1771993744","amount":3000000},"virtual_account_info":{"virtual_account_number":"1900800000232846"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-25 11:30:06] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-25 11:30:06] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1771993744","transaction_status":"SUCCESS","amount":3000000} 
[2026-02-25 11:30:06] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-25 11:30:06] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-25 11:30:06] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-25 11:30:06] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1771993744")->lockForUpdate()...  
[2026-02-25 11:30:06] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-25 11:30:06] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":5,"school_name":"redirect 3jt","school_email":"re@email.com","current_payment_status":"pending"} 
[2026-02-25 11:30:06] local.INFO: [DOKU WEBHOOK][STEP 5] Memanggil inquiry->update() â€” mengubah payment_status ke "success"...  
[2026-02-25 11:30:06] local.INFO: [DOKU WEBHOOK][STEP 5] Payment status TERUPDATE: {"inquiry_id":5,"new_payment_status":"success","payment_date":"2026-02-25 11:30:06"} 
[2026-02-25 11:30:06] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil School::where("support_email", "re@email.com") â€” cek apakah school sudah ada...  
[2026-02-25 11:30:06] local.INFO: [DOKU WEBHOOK][STEP 6] School BELUM ADA â€” memanggil School::create() untuk membuat school baru...  
[2026-02-25 11:30:06] local.INFO: [DOKU WEBHOOK][STEP 6] School BARU TERCIPTA: {"school_id":5,"name":"redirect 3jt","support_email":"re@email.com"} 
[2026-02-25 11:30:06] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil school->update() â€” set code dan database_name...  
[2026-02-25 11:30:06] local.INFO: [DOKU WEBHOOK][STEP 6] School TERUPDATE: {"school_id":5,"code":"SCH00005","database_name":"eschool_saas_5_redirect-3jt"} 
[2026-02-25 11:30:06] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil User::where("email", "re@email.com") â€” cek apakah admin sudah ada...  
[2026-02-25 11:30:06] local.INFO: [DOKU WEBHOOK][STEP 7] Admin BELUM ADA â€” memanggil User::create() untuk membuat admin baru...  
[2026-02-25 11:30:06] local.INFO: [DOKU WEBHOOK][STEP 7] Admin user TERCIPTA: {"user_id":6,"email":"re@email.com","school_id":5} 
[2026-02-25 11:30:06] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil Role::updateOrCreate() â€” assign role "School Admin"...  
[2026-02-25 11:30:06] local.INFO: [DOKU WEBHOOK][STEP 7] Role TERCIPTA/TERUPDATE: {"role_id":5,"role_name":"School Admin"} 
[2026-02-25 11:30:06] local.INFO: [DOKU WEBHOOK][STEP 7] School admin_id diupdate ke: 6  
[2026-02-25 11:30:06] local.INFO: [DOKU WEBHOOK][STEP 8] DB::commit() â€” semua data tersimpan ke database  
[2026-02-25 11:30:06] local.INFO: [DOKU WEBHOOK][STEP 9] Memanggil SetupSchoolDatabase::dispatch(...)->afterResponse() â€” membuat database sekolah di background (setelah response)...  
[2026-02-25 11:30:06] local.INFO: [DOKU WEBHOOK][STEP 9] Parameter dispatch: {"school_id":5,"package_id":2,"school_code":"SCH00005"} 
[2026-02-25 11:30:06] local.INFO: [DOKU WEBHOOK] âœ… PROSES SELESAI â€” Sekolah berhasil diaktifkan  
[2026-02-25 11:30:06] local.INFO: [DOKU WEBHOOK] Hasil yang tercipta: {"school_id":5,"school_name":"redirect 3jt","school_code":"SCH00005","database_name":"eschool_saas_5_redirect-3jt","admin_email":"re@email.com","payment_status":"success","invoice_number":"JT-1771993744"} 
[2026-02-25 11:30:06] local.INFO: ================================================================================  
[2026-02-25 11:30:06] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-25 11:30:06] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-25 11:30:06] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"OK"}  
[2026-02-25 11:30:06] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 347.93 ms  
[2026-02-25 11:30:06] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-25 12:29:03] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-25 12:29:03] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-25 12:29:03] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-25 12:29:03  
[2026-02-25 12:29:03] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-25 12:29:03] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-25 12:29:03] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-25 12:29:03] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-25 12:29:03] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-25 12:29:03] local.INFO: [WEBHOOK REQUEST] Content-Length: 1244  
[2026-02-25 12:29:03] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-25 12:29:03] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-25 12:29:03] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1244 bytes  
[2026-02-25 12:29:03] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1771997295",
    "amount": 6000000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000232846"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-25 12:29:03] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-25 12:29:03] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1771997295",
        "amount": 6000000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000232846"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-25 12:29:03] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-25 12:29:03] local.INFO: ================================================================================  
[2026-02-25 12:29:03] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-25 12:29:03] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-25 12:29:03] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-25 12:29:03  
[2026-02-25 12:29:03] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["e8609583-dae9-41fd-9e3c-74d8967d0203"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1244"]} 
[2026-02-25 12:29:03] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1771997295","amount":6000000},"virtual_account_info":{"virtual_account_number":"1900800000232846"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-25 12:29:03] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-25 12:29:03] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1771997295","transaction_status":"SUCCESS","amount":6000000} 
[2026-02-25 12:29:03] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-25 12:29:03] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-25 12:29:03] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-25 12:29:03] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1771997295")->lockForUpdate()...  
[2026-02-25 12:29:03] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-25 12:29:03] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":7,"school_name":"Satrio Athallah Kresno Pramudya","school_email":"satrioathallah38@email.com","current_payment_status":"pending"} 
[2026-02-25 12:29:03] local.INFO: [DOKU WEBHOOK][STEP 5] Memanggil inquiry->update() â€” mengubah payment_status ke "success"...  
[2026-02-25 12:29:03] local.INFO: [DOKU WEBHOOK][STEP 5] Payment status TERUPDATE: {"inquiry_id":7,"new_payment_status":"success","payment_date":"2026-02-25 12:29:03"} 
[2026-02-25 12:29:03] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil School::where("support_email", "satrioathallah38@email.com") â€” cek apakah school sudah ada...  
[2026-02-25 12:29:03] local.INFO: [DOKU WEBHOOK][STEP 6] School BELUM ADA â€” memanggil School::create() untuk membuat school baru...  
[2026-02-25 12:29:03] local.INFO: [DOKU WEBHOOK][STEP 6] School BARU TERCIPTA: {"school_id":6,"name":"Satrio Athallah Kresno Pramudya","support_email":"satrioathallah38@email.com"} 
[2026-02-25 12:29:03] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil school->update() â€” set code dan database_name...  
[2026-02-25 12:29:03] local.INFO: [DOKU WEBHOOK][STEP 6] School TERUPDATE: {"school_id":6,"code":"SCH00006","database_name":"eschool_saas_6_satrio-athallah-kresno-pramudya"} 
[2026-02-25 12:29:03] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil User::where("email", "satrioathallah38@email.com") â€” cek apakah admin sudah ada...  
[2026-02-25 12:29:03] local.INFO: [DOKU WEBHOOK][STEP 7] Admin BELUM ADA â€” memanggil User::create() untuk membuat admin baru...  
[2026-02-25 12:29:03] local.INFO: [DOKU WEBHOOK][STEP 7] Admin user TERCIPTA: {"user_id":7,"email":"satrioathallah38@email.com","school_id":6} 
[2026-02-25 12:29:03] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil Role::updateOrCreate() â€” assign role "School Admin"...  
[2026-02-25 12:29:03] local.INFO: [DOKU WEBHOOK][STEP 7] Role TERCIPTA/TERUPDATE: {"role_id":6,"role_name":"School Admin"} 
[2026-02-25 12:29:03] local.INFO: [DOKU WEBHOOK][STEP 7] School admin_id diupdate ke: 7  
[2026-02-25 12:29:03] local.INFO: [DOKU WEBHOOK][STEP 8] DB::commit() â€” semua data tersimpan ke database  
[2026-02-25 12:29:03] local.INFO: [DOKU WEBHOOK][STEP 9] Memanggil SetupSchoolDatabase::dispatch(...)->afterResponse() â€” membuat database sekolah di background (setelah response)...  
[2026-02-25 12:29:03] local.INFO: [DOKU WEBHOOK][STEP 9] Parameter dispatch: {"school_id":6,"package_id":3,"school_code":"SCH00006"} 
[2026-02-25 12:29:03] local.INFO: [DOKU WEBHOOK] âœ… PROSES SELESAI â€” Sekolah berhasil diaktifkan  
[2026-02-25 12:29:03] local.INFO: [DOKU WEBHOOK] Hasil yang tercipta: {"school_id":6,"school_name":"Satrio Athallah Kresno Pramudya","school_code":"SCH00006","database_name":"eschool_saas_6_satrio-athallah-kresno-pramudya","admin_email":"satrioathallah38@email.com","payment_status":"success","invoice_number":"JT-1771997295"} 
[2026-02-25 12:29:03] local.INFO: ================================================================================  
[2026-02-25 12:29:03] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-25 12:29:03] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-25 12:29:03] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"OK"}  
[2026-02-25 12:29:03] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 302.74 ms  
[2026-02-25 12:29:03] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:20:37] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:20:37] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-26 09:20:37] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-26 09:20:37  
[2026-02-26 09:20:37] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-26 09:20:37] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-26 09:20:37] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-26 09:20:37] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-26 09:20:37] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-26 09:20:37] local.INFO: [WEBHOOK REQUEST] Content-Length: 1244  
[2026-02-26 09:20:37] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-26 09:20:37] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-26 09:20:37] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1244 bytes  
[2026-02-26 09:20:37] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1772072392",
    "amount": 6000000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000232846"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-26 09:20:37] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-26 09:20:37] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1772072392",
        "amount": 6000000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000232846"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-26 09:20:37] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:20:37] local.INFO: ================================================================================  
[2026-02-26 09:20:37] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-26 09:20:37] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-26 09:20:37] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-26 09:20:37  
[2026-02-26 09:20:37] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["42326d6e-c95f-43ff-92f0-a6497112ba35"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1244"]} 
[2026-02-26 09:20:37] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1772072392","amount":6000000},"virtual_account_info":{"virtual_account_number":"1900800000232846"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-26 09:20:37] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-26 09:20:37] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1772072392","transaction_status":"SUCCESS","amount":6000000} 
[2026-02-26 09:20:37] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-26 09:20:37] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-26 09:20:37] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-26 09:20:37] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1772072392")->lockForUpdate()...  
[2026-02-26 09:20:37] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-26 09:20:37] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":8,"school_name":"uji coba tes struk pembayaran","school_email":"email@email.com","current_payment_status":"pending"} 
[2026-02-26 09:20:37] local.INFO: [DOKU WEBHOOK][STEP 5] Memanggil inquiry->update() â€” mengubah payment_status ke "success"...  
[2026-02-26 09:20:37] local.INFO: [DOKU WEBHOOK][STEP 5] Payment status TERUPDATE: {"inquiry_id":8,"new_payment_status":"success","payment_date":"2026-02-26 09:20:37"} 
[2026-02-26 09:20:37] local.INFO: [DOKU WEBHOOK][STEP 5b] Creating DokuPaymentReceipt record...  
[2026-02-26 09:20:37] local.ERROR: [DOKU WEBHOOK] âŒ EXCEPTION TERJADI â€” DB::rollBack() dipanggil {"error":"SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`laravel`.`doku_payment_receipts`, CONSTRAINT `doku_payment_receipts_school_id_foreign` FOREIGN KEY (`school_id`) REFERENCES `schools` (`id`) ON DELETE CASCADE) (Connection: mysql, SQL: insert into `doku_payment_receipts` (`school_inquiry_id`, `school_id`, `invoice_number`, `amount`, `payment_status`, `payment_gateway`, `payment_date`, `doku_transaction_id`, `raw_payload`, `package_name`, `school_name`, `school_email`, `updated_at`, `created_at`) values (8, 0, JT-1772072392, 6000000.00, success, DOKU, 2026-02-26 09:20:37, ?, {\"service\":{\"id\":\"VIRTUAL_ACCOUNT\"},\"acquirer\":{\"id\":\"BCA\"},\"channel\":{\"id\":\"VIRTUAL_ACCOUNT_BCA\"},\"order\":{\"invoice_number\":\"JT-1772072392\",\"amount\":6000000},\"virtual_account_info\":{\"virtual_account_number\":\"1900800000232846\"},\"virtual_account_payment\":{\"date\":\"20260218135742\",\"systrace_number\":\"128311\",\"reference_number\":\"97748\",\"channel_code\":null,\"request_id\":\"820799\",\"identifier\":[{\"name\":\"REQUEST_ID\",\"value\":\"820799\"},{\"name\":\"REFERENCE\",\"value\":\"97748\"},{\"name\":\"CHANNEL_TYPE\",\"value\":\"6014\"}]},\"transaction\":{\"status\":\"SUCCESS\",\"date\":\"2026-02-18T06:57:42Z\",\"original_request_id\":\"bdf0aedd-d630-4c31-be10-6334cfb3e1f9\"},\"additional_info\":{\"origin\":{\"source\":\"direct\",\"system\":\"mid-jokul-checkout-system\",\"product\":\"CHECKOUT\",\"apiFormat\":\"JOKUL\"},\"line_items\":[{\"name\":\"Subscription Package\",\"price\":\"500000\",\"quantity\":1}]}}, Paket Platinum, uji coba tes struk pembayaran, email@email.com, 2026-02-26 09:20:37, 2026-02-26 09:20:37))","file":"C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php","line":829,"trace":"#0 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(783): Illuminate\\Database\\Connection->runQueryCallback('insert into `do...', Array, Object(Closure))
#1 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\MySqlConnection.php(34): Illuminate\\Database\\Connection->run('insert into `do...', Array, Object(Closure))
#2 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Query\\Processors\\MySqlProcessor.php(35): Illuminate\\Database\\MySqlConnection->insert('insert into `do...', Array, 'id')
#3 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Query\\Builder.php(3549): Illuminate\\Database\\Query\\Processors\\MySqlProcessor->processInsertGetId(Object(Illuminate\\Database\\Query\\Builder), 'insert into `do...', Array, 'id')
#4 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Builder.php(1982): Illuminate\\Database\\Query\\Builder->insertGetId(Array, 'id')
#5 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(1334): Illuminate\\Database\\Eloquent\\Builder->__call('insertGetId', Array)
#6 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(1299): Illuminate\\Database\\Eloquent\\Model->insertAndSetId(Object(Illuminate\\Database\\Eloquent\\Builder), Array)
#7 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(1138): Illuminate\\Database\\Eloquent\\Model->performInsert(Object(Illuminate\\Database\\Eloquent\\Builder))
#8 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Builder.php(1025): Illuminate\\Database\\Eloquent\\Model->save()
#9 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Support\\helpers.php(307): Illuminate\\Database\\Eloquent\\Builder->Illuminate\\Database\\Eloquent\\{closure}(Object(App\\Models\\DokuPaymentReceipt))
#10 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Builder.php(1024): tap(Object(App\\Models\\DokuPaymentReceipt), Object(Closure))
#11 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Support\\Traits\\ForwardsCalls.php(23): Illuminate\\Database\\Eloquent\\Builder->create(Array)
#12 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(2335): Illuminate\\Database\\Eloquent\\Model->forwardCallTo(Object(Illuminate\\Database\\Eloquent\\Builder), 'create', Array)
#13 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(2347): Illuminate\\Database\\Eloquent\\Model->__call('create', Array)
#14 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\app\\Http\\Controllers\\Api\\PaymentApiController.php(391): Illuminate\\Database\\Eloquent\\Model::__callStatic('create', Array)
#15 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Controller.php(54): App\\Http\\Controllers\\Api\\PaymentApiController->dokuWebhook(Object(Illuminate\\Http\\Request))
#16 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\ControllerDispatcher.php(43): Illuminate\\Routing\\Controller->callAction('dokuWebhook', Array)
#17 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(259): Illuminate\\Routing\\ControllerDispatcher->dispatch(Object(Illuminate\\Routing\\Route), Object(App\\Http\\Controllers\\Api\\PaymentApiController), 'dokuWebhook')
#18 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(205): Illuminate\\Routing\\Route->runController()
#19 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(806): Illuminate\\Routing\\Route->run()
#20 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(144): Illuminate\\Routing\\Router->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#21 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\app\\Http\\Middleware\\LogDokuWebhook.php(63): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#22 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): App\\Http\\Middleware\\LogDokuWebhook->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#23 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(119): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#24 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(805): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#25 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(784): Illuminate\\Routing\\Router->runRouteWithinStack(Object(Illuminate\\Routing\\Route), Object(Illuminate\\Http\\Request))
#26 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(748): Illuminate\\Routing\\Router->runRoute(Object(Illuminate\\Http\\Request), Object(Illuminate\\Routing\\Route))
#27 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(737): Illuminate\\Routing\\Router->dispatchToRoute(Object(Illuminate\\Http\\Request))
#28 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(200): Illuminate\\Routing\\Router->dispatch(Object(Illuminate\\Http\\Request))
#29 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(144): Illuminate\\Foundation\\Http\\Kernel->Illuminate\\Foundation\\Http\\{closure}(Object(Illuminate\\Http\\Request))
#30 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\beyondcode\\laravel-query-detector\\src\\QueryDetectorMiddleware.php(33): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#31 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): BeyondCode\\QueryDetector\\QueryDetectorMiddleware->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#32 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\barryvdh\\laravel-debugbar\\src\\Middleware\\InjectDebugbar.php(66): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#33 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Barryvdh\\Debugbar\\Middleware\\InjectDebugbar->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#34 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#35 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull.php(31): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#36 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#37 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#38 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TrimStrings.php(40): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#39 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\TrimStrings->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#40 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize.php(27): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#41 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#42 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance.php(99): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#43 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#44 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\HandleCors.php(62): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#45 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Http\\Middleware\\HandleCors->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#46 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\TrustProxies.php(39): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#47 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Http\\Middleware\\TrustProxies->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#48 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(119): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#49 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(175): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#50 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(144): Illuminate\\Foundation\\Http\\Kernel->sendRequestThroughRouter(Object(Illuminate\\Http\\Request))
#51 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\public\\index.php(51): Illuminate\\Foundation\\Http\\Kernel->handle(Object(Illuminate\\Http\\Request))
#52 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\resources\\server.php(16): require_once('C:\\\\Users\\\\satri\\\\...')
#53 {main}"} 
[2026-02-26 09:20:37] local.INFO: ================================================================================  
[2026-02-26 09:20:37] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-26 09:20:37] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-26 09:20:37] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"OK"}  
[2026-02-26 09:20:37] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 97.92 ms  
[2026-02-26 09:20:37] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:21:32] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:21:32] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-26 09:21:32] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-26 09:21:32  
[2026-02-26 09:21:32] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-26 09:21:32] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-26 09:21:32] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-26 09:21:32] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-26 09:21:32] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-26 09:21:32] local.INFO: [WEBHOOK REQUEST] Content-Length: 1244  
[2026-02-26 09:21:32] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-26 09:21:32] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-26 09:21:32] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1244 bytes  
[2026-02-26 09:21:32] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1772072392",
    "amount": 6000000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000232846"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-26 09:21:32] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-26 09:21:32] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1772072392",
        "amount": 6000000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000232846"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-26 09:21:32] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:21:32] local.INFO: ================================================================================  
[2026-02-26 09:21:32] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-26 09:21:32] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-26 09:21:32] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-26 09:21:32  
[2026-02-26 09:21:32] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["486621ed-f58c-4449-95f7-3c905b7ffe31"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1244"]} 
[2026-02-26 09:21:32] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1772072392","amount":6000000},"virtual_account_info":{"virtual_account_number":"1900800000232846"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-26 09:21:32] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-26 09:21:32] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1772072392","transaction_status":"SUCCESS","amount":6000000} 
[2026-02-26 09:21:32] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-26 09:21:32] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-26 09:21:32] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-26 09:21:32] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1772072392")->lockForUpdate()...  
[2026-02-26 09:21:32] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-26 09:21:32] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":8,"school_name":"uji coba tes struk pembayaran","school_email":"email@email.com","current_payment_status":"pending"} 
[2026-02-26 09:21:32] local.INFO: [DOKU WEBHOOK][STEP 5] Memanggil inquiry->update() â€” mengubah payment_status ke "success"...  
[2026-02-26 09:21:32] local.INFO: [DOKU WEBHOOK][STEP 5] Payment status TERUPDATE: {"inquiry_id":8,"new_payment_status":"success","payment_date":"2026-02-26 09:21:32"} 
[2026-02-26 09:21:32] local.INFO: [DOKU WEBHOOK][STEP 5b] Creating DokuPaymentReceipt record...  
[2026-02-26 09:21:32] local.ERROR: [DOKU WEBHOOK] âŒ EXCEPTION TERJADI â€” DB::rollBack() dipanggil {"error":"SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`laravel`.`doku_payment_receipts`, CONSTRAINT `doku_payment_receipts_school_id_foreign` FOREIGN KEY (`school_id`) REFERENCES `schools` (`id`) ON DELETE CASCADE) (Connection: mysql, SQL: insert into `doku_payment_receipts` (`school_inquiry_id`, `school_id`, `invoice_number`, `amount`, `payment_status`, `payment_gateway`, `payment_date`, `doku_transaction_id`, `raw_payload`, `package_name`, `school_name`, `school_email`, `updated_at`, `created_at`) values (8, 0, JT-1772072392, 6000000.00, success, DOKU, 2026-02-26 09:21:32, ?, {\"service\":{\"id\":\"VIRTUAL_ACCOUNT\"},\"acquirer\":{\"id\":\"BCA\"},\"channel\":{\"id\":\"VIRTUAL_ACCOUNT_BCA\"},\"order\":{\"invoice_number\":\"JT-1772072392\",\"amount\":6000000},\"virtual_account_info\":{\"virtual_account_number\":\"1900800000232846\"},\"virtual_account_payment\":{\"date\":\"20260218135742\",\"systrace_number\":\"128311\",\"reference_number\":\"97748\",\"channel_code\":null,\"request_id\":\"820799\",\"identifier\":[{\"name\":\"REQUEST_ID\",\"value\":\"820799\"},{\"name\":\"REFERENCE\",\"value\":\"97748\"},{\"name\":\"CHANNEL_TYPE\",\"value\":\"6014\"}]},\"transaction\":{\"status\":\"SUCCESS\",\"date\":\"2026-02-18T06:57:42Z\",\"original_request_id\":\"bdf0aedd-d630-4c31-be10-6334cfb3e1f9\"},\"additional_info\":{\"origin\":{\"source\":\"direct\",\"system\":\"mid-jokul-checkout-system\",\"product\":\"CHECKOUT\",\"apiFormat\":\"JOKUL\"},\"line_items\":[{\"name\":\"Subscription Package\",\"price\":\"500000\",\"quantity\":1}]}}, Paket Platinum, uji coba tes struk pembayaran, email@email.com, 2026-02-26 09:21:32, 2026-02-26 09:21:32))","file":"C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php","line":829,"trace":"#0 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(783): Illuminate\\Database\\Connection->runQueryCallback('insert into `do...', Array, Object(Closure))
#1 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\MySqlConnection.php(34): Illuminate\\Database\\Connection->run('insert into `do...', Array, Object(Closure))
#2 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Query\\Processors\\MySqlProcessor.php(35): Illuminate\\Database\\MySqlConnection->insert('insert into `do...', Array, 'id')
#3 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Query\\Builder.php(3549): Illuminate\\Database\\Query\\Processors\\MySqlProcessor->processInsertGetId(Object(Illuminate\\Database\\Query\\Builder), 'insert into `do...', Array, 'id')
#4 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Builder.php(1982): Illuminate\\Database\\Query\\Builder->insertGetId(Array, 'id')
#5 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(1334): Illuminate\\Database\\Eloquent\\Builder->__call('insertGetId', Array)
#6 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(1299): Illuminate\\Database\\Eloquent\\Model->insertAndSetId(Object(Illuminate\\Database\\Eloquent\\Builder), Array)
#7 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(1138): Illuminate\\Database\\Eloquent\\Model->performInsert(Object(Illuminate\\Database\\Eloquent\\Builder))
#8 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Builder.php(1025): Illuminate\\Database\\Eloquent\\Model->save()
#9 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Support\\helpers.php(307): Illuminate\\Database\\Eloquent\\Builder->Illuminate\\Database\\Eloquent\\{closure}(Object(App\\Models\\DokuPaymentReceipt))
#10 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Builder.php(1024): tap(Object(App\\Models\\DokuPaymentReceipt), Object(Closure))
#11 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Support\\Traits\\ForwardsCalls.php(23): Illuminate\\Database\\Eloquent\\Builder->create(Array)
#12 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(2335): Illuminate\\Database\\Eloquent\\Model->forwardCallTo(Object(Illuminate\\Database\\Eloquent\\Builder), 'create', Array)
#13 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(2347): Illuminate\\Database\\Eloquent\\Model->__call('create', Array)
#14 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\app\\Http\\Controllers\\Api\\PaymentApiController.php(391): Illuminate\\Database\\Eloquent\\Model::__callStatic('create', Array)
#15 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Controller.php(54): App\\Http\\Controllers\\Api\\PaymentApiController->dokuWebhook(Object(Illuminate\\Http\\Request))
#16 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\ControllerDispatcher.php(43): Illuminate\\Routing\\Controller->callAction('dokuWebhook', Array)
#17 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(259): Illuminate\\Routing\\ControllerDispatcher->dispatch(Object(Illuminate\\Routing\\Route), Object(App\\Http\\Controllers\\Api\\PaymentApiController), 'dokuWebhook')
#18 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(205): Illuminate\\Routing\\Route->runController()
#19 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(806): Illuminate\\Routing\\Route->run()
#20 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(144): Illuminate\\Routing\\Router->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#21 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\app\\Http\\Middleware\\LogDokuWebhook.php(63): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#22 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): App\\Http\\Middleware\\LogDokuWebhook->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#23 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(119): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#24 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(805): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#25 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(784): Illuminate\\Routing\\Router->runRouteWithinStack(Object(Illuminate\\Routing\\Route), Object(Illuminate\\Http\\Request))
#26 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(748): Illuminate\\Routing\\Router->runRoute(Object(Illuminate\\Http\\Request), Object(Illuminate\\Routing\\Route))
#27 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(737): Illuminate\\Routing\\Router->dispatchToRoute(Object(Illuminate\\Http\\Request))
#28 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(200): Illuminate\\Routing\\Router->dispatch(Object(Illuminate\\Http\\Request))
#29 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(144): Illuminate\\Foundation\\Http\\Kernel->Illuminate\\Foundation\\Http\\{closure}(Object(Illuminate\\Http\\Request))
#30 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\beyondcode\\laravel-query-detector\\src\\QueryDetectorMiddleware.php(33): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#31 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): BeyondCode\\QueryDetector\\QueryDetectorMiddleware->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#32 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\barryvdh\\laravel-debugbar\\src\\Middleware\\InjectDebugbar.php(66): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#33 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Barryvdh\\Debugbar\\Middleware\\InjectDebugbar->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#34 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#35 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull.php(31): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#36 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#37 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#38 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TrimStrings.php(40): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#39 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\TrimStrings->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#40 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize.php(27): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#41 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#42 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance.php(99): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#43 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#44 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\HandleCors.php(62): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#45 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Http\\Middleware\\HandleCors->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#46 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\TrustProxies.php(39): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#47 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Http\\Middleware\\TrustProxies->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#48 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(119): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#49 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(175): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#50 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(144): Illuminate\\Foundation\\Http\\Kernel->sendRequestThroughRouter(Object(Illuminate\\Http\\Request))
#51 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\public\\index.php(51): Illuminate\\Foundation\\Http\\Kernel->handle(Object(Illuminate\\Http\\Request))
#52 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\resources\\server.php(16): require_once('C:\\\\Users\\\\satri\\\\...')
#53 {main}"} 
[2026-02-26 09:21:32] local.INFO: ================================================================================  
[2026-02-26 09:21:32] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-26 09:21:32] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-26 09:21:32] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"OK"}  
[2026-02-26 09:21:32] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 61.41 ms  
[2026-02-26 09:21:32] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:22:05] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:22:05] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-26 09:22:05] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-26 09:22:05  
[2026-02-26 09:22:05] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-26 09:22:05] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-26 09:22:05] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-26 09:22:05] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-26 09:22:05] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-26 09:22:05] local.INFO: [WEBHOOK REQUEST] Content-Length: 1244  
[2026-02-26 09:22:05] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-26 09:22:05] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-26 09:22:05] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1244 bytes  
[2026-02-26 09:22:05] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1772072392",
    "amount": 6000000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000232846"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-26 09:22:05] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-26 09:22:05] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1772072392",
        "amount": 6000000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000232846"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-26 09:22:05] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:22:05] local.INFO: ================================================================================  
[2026-02-26 09:22:05] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-26 09:22:05] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-26 09:22:05] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-26 09:22:05  
[2026-02-26 09:22:05] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["86e854e3-9252-4032-b3f6-01b2f80960ac"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1244"]} 
[2026-02-26 09:22:05] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1772072392","amount":6000000},"virtual_account_info":{"virtual_account_number":"1900800000232846"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-26 09:22:05] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-26 09:22:05] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1772072392","transaction_status":"SUCCESS","amount":6000000} 
[2026-02-26 09:22:05] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-26 09:22:05] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-26 09:22:05] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-26 09:22:05] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1772072392")->lockForUpdate()...  
[2026-02-26 09:22:05] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-26 09:22:05] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":8,"school_name":"uji coba tes struk pembayaran","school_email":"email@email.com","current_payment_status":"pending"} 
[2026-02-26 09:22:05] local.INFO: [DOKU WEBHOOK][STEP 5] Memanggil inquiry->update() â€” mengubah payment_status ke "success"...  
[2026-02-26 09:22:05] local.INFO: [DOKU WEBHOOK][STEP 5] Payment status TERUPDATE: {"inquiry_id":8,"new_payment_status":"success","payment_date":"2026-02-26 09:22:05"} 
[2026-02-26 09:22:05] local.INFO: [DOKU WEBHOOK][STEP 5b] Creating DokuPaymentReceipt record...  
[2026-02-26 09:22:05] local.ERROR: [DOKU WEBHOOK] âŒ EXCEPTION TERJADI â€” DB::rollBack() dipanggil {"error":"SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`laravel`.`doku_payment_receipts`, CONSTRAINT `doku_payment_receipts_school_id_foreign` FOREIGN KEY (`school_id`) REFERENCES `schools` (`id`) ON DELETE CASCADE) (Connection: mysql, SQL: insert into `doku_payment_receipts` (`school_inquiry_id`, `school_id`, `invoice_number`, `amount`, `payment_status`, `payment_gateway`, `payment_date`, `doku_transaction_id`, `raw_payload`, `package_name`, `school_name`, `school_email`, `updated_at`, `created_at`) values (8, 0, JT-1772072392, 6000000.00, success, DOKU, 2026-02-26 09:22:05, ?, {\"service\":{\"id\":\"VIRTUAL_ACCOUNT\"},\"acquirer\":{\"id\":\"BCA\"},\"channel\":{\"id\":\"VIRTUAL_ACCOUNT_BCA\"},\"order\":{\"invoice_number\":\"JT-1772072392\",\"amount\":6000000},\"virtual_account_info\":{\"virtual_account_number\":\"1900800000232846\"},\"virtual_account_payment\":{\"date\":\"20260218135742\",\"systrace_number\":\"128311\",\"reference_number\":\"97748\",\"channel_code\":null,\"request_id\":\"820799\",\"identifier\":[{\"name\":\"REQUEST_ID\",\"value\":\"820799\"},{\"name\":\"REFERENCE\",\"value\":\"97748\"},{\"name\":\"CHANNEL_TYPE\",\"value\":\"6014\"}]},\"transaction\":{\"status\":\"SUCCESS\",\"date\":\"2026-02-18T06:57:42Z\",\"original_request_id\":\"bdf0aedd-d630-4c31-be10-6334cfb3e1f9\"},\"additional_info\":{\"origin\":{\"source\":\"direct\",\"system\":\"mid-jokul-checkout-system\",\"product\":\"CHECKOUT\",\"apiFormat\":\"JOKUL\"},\"line_items\":[{\"name\":\"Subscription Package\",\"price\":\"500000\",\"quantity\":1}]}}, Paket Platinum, uji coba tes struk pembayaran, email@email.com, 2026-02-26 09:22:05, 2026-02-26 09:22:05))","file":"C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php","line":829,"trace":"#0 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(783): Illuminate\\Database\\Connection->runQueryCallback('insert into `do...', Array, Object(Closure))
#1 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\MySqlConnection.php(34): Illuminate\\Database\\Connection->run('insert into `do...', Array, Object(Closure))
#2 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Query\\Processors\\MySqlProcessor.php(35): Illuminate\\Database\\MySqlConnection->insert('insert into `do...', Array, 'id')
#3 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Query\\Builder.php(3549): Illuminate\\Database\\Query\\Processors\\MySqlProcessor->processInsertGetId(Object(Illuminate\\Database\\Query\\Builder), 'insert into `do...', Array, 'id')
#4 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Builder.php(1982): Illuminate\\Database\\Query\\Builder->insertGetId(Array, 'id')
#5 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(1334): Illuminate\\Database\\Eloquent\\Builder->__call('insertGetId', Array)
#6 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(1299): Illuminate\\Database\\Eloquent\\Model->insertAndSetId(Object(Illuminate\\Database\\Eloquent\\Builder), Array)
#7 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(1138): Illuminate\\Database\\Eloquent\\Model->performInsert(Object(Illuminate\\Database\\Eloquent\\Builder))
#8 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Builder.php(1025): Illuminate\\Database\\Eloquent\\Model->save()
#9 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Support\\helpers.php(307): Illuminate\\Database\\Eloquent\\Builder->Illuminate\\Database\\Eloquent\\{closure}(Object(App\\Models\\DokuPaymentReceipt))
#10 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Builder.php(1024): tap(Object(App\\Models\\DokuPaymentReceipt), Object(Closure))
#11 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Support\\Traits\\ForwardsCalls.php(23): Illuminate\\Database\\Eloquent\\Builder->create(Array)
#12 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(2335): Illuminate\\Database\\Eloquent\\Model->forwardCallTo(Object(Illuminate\\Database\\Eloquent\\Builder), 'create', Array)
#13 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(2347): Illuminate\\Database\\Eloquent\\Model->__call('create', Array)
#14 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\app\\Http\\Controllers\\Api\\PaymentApiController.php(391): Illuminate\\Database\\Eloquent\\Model::__callStatic('create', Array)
#15 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Controller.php(54): App\\Http\\Controllers\\Api\\PaymentApiController->dokuWebhook(Object(Illuminate\\Http\\Request))
#16 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\ControllerDispatcher.php(43): Illuminate\\Routing\\Controller->callAction('dokuWebhook', Array)
#17 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(259): Illuminate\\Routing\\ControllerDispatcher->dispatch(Object(Illuminate\\Routing\\Route), Object(App\\Http\\Controllers\\Api\\PaymentApiController), 'dokuWebhook')
#18 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(205): Illuminate\\Routing\\Route->runController()
#19 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(806): Illuminate\\Routing\\Route->run()
#20 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(144): Illuminate\\Routing\\Router->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#21 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\app\\Http\\Middleware\\LogDokuWebhook.php(63): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#22 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): App\\Http\\Middleware\\LogDokuWebhook->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#23 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(119): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#24 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(805): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#25 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(784): Illuminate\\Routing\\Router->runRouteWithinStack(Object(Illuminate\\Routing\\Route), Object(Illuminate\\Http\\Request))
#26 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(748): Illuminate\\Routing\\Router->runRoute(Object(Illuminate\\Http\\Request), Object(Illuminate\\Routing\\Route))
#27 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(737): Illuminate\\Routing\\Router->dispatchToRoute(Object(Illuminate\\Http\\Request))
#28 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(200): Illuminate\\Routing\\Router->dispatch(Object(Illuminate\\Http\\Request))
#29 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(144): Illuminate\\Foundation\\Http\\Kernel->Illuminate\\Foundation\\Http\\{closure}(Object(Illuminate\\Http\\Request))
#30 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\beyondcode\\laravel-query-detector\\src\\QueryDetectorMiddleware.php(33): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#31 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): BeyondCode\\QueryDetector\\QueryDetectorMiddleware->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#32 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\barryvdh\\laravel-debugbar\\src\\Middleware\\InjectDebugbar.php(66): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#33 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Barryvdh\\Debugbar\\Middleware\\InjectDebugbar->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#34 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#35 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull.php(31): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#36 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#37 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#38 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TrimStrings.php(40): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#39 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\TrimStrings->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#40 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize.php(27): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#41 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#42 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance.php(99): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#43 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#44 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\HandleCors.php(62): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#45 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Http\\Middleware\\HandleCors->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#46 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\TrustProxies.php(39): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#47 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Http\\Middleware\\TrustProxies->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#48 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(119): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#49 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(175): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#50 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(144): Illuminate\\Foundation\\Http\\Kernel->sendRequestThroughRouter(Object(Illuminate\\Http\\Request))
#51 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\public\\index.php(51): Illuminate\\Foundation\\Http\\Kernel->handle(Object(Illuminate\\Http\\Request))
#52 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\resources\\server.php(16): require_once('C:\\\\Users\\\\satri\\\\...')
#53 {main}"} 
[2026-02-26 09:22:05] local.INFO: ================================================================================  
[2026-02-26 09:22:05] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-26 09:22:05] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-26 09:22:05] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"OK"}  
[2026-02-26 09:22:05] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 62.35 ms  
[2026-02-26 09:22:05] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:22:06] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:22:06] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-26 09:22:06] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-26 09:22:06  
[2026-02-26 09:22:06] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-26 09:22:06] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-26 09:22:06] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-26 09:22:06] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-26 09:22:06] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-26 09:22:06] local.INFO: [WEBHOOK REQUEST] Content-Length: 1244  
[2026-02-26 09:22:06] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-26 09:22:06] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-26 09:22:06] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1244 bytes  
[2026-02-26 09:22:06] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1772072392",
    "amount": 6000000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000232846"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-26 09:22:06] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-26 09:22:06] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1772072392",
        "amount": 6000000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000232846"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-26 09:22:06] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:22:06] local.INFO: ================================================================================  
[2026-02-26 09:22:06] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-26 09:22:06] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-26 09:22:06] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-26 09:22:06  
[2026-02-26 09:22:06] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["829a1dbc-d87c-4ad5-98e5-687174fee204"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1244"]} 
[2026-02-26 09:22:06] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1772072392","amount":6000000},"virtual_account_info":{"virtual_account_number":"1900800000232846"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-26 09:22:06] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-26 09:22:06] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1772072392","transaction_status":"SUCCESS","amount":6000000} 
[2026-02-26 09:22:06] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-26 09:22:06] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-26 09:22:06] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-26 09:22:06] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1772072392")->lockForUpdate()...  
[2026-02-26 09:22:06] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-26 09:22:06] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":8,"school_name":"uji coba tes struk pembayaran","school_email":"email@email.com","current_payment_status":"pending"} 
[2026-02-26 09:22:06] local.INFO: [DOKU WEBHOOK][STEP 5] Memanggil inquiry->update() â€” mengubah payment_status ke "success"...  
[2026-02-26 09:22:06] local.INFO: [DOKU WEBHOOK][STEP 5] Payment status TERUPDATE: {"inquiry_id":8,"new_payment_status":"success","payment_date":"2026-02-26 09:22:06"} 
[2026-02-26 09:22:06] local.INFO: [DOKU WEBHOOK][STEP 5b] Creating DokuPaymentReceipt record...  
[2026-02-26 09:22:06] local.ERROR: [DOKU WEBHOOK] âŒ EXCEPTION TERJADI â€” DB::rollBack() dipanggil {"error":"SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`laravel`.`doku_payment_receipts`, CONSTRAINT `doku_payment_receipts_school_id_foreign` FOREIGN KEY (`school_id`) REFERENCES `schools` (`id`) ON DELETE CASCADE) (Connection: mysql, SQL: insert into `doku_payment_receipts` (`school_inquiry_id`, `school_id`, `invoice_number`, `amount`, `payment_status`, `payment_gateway`, `payment_date`, `doku_transaction_id`, `raw_payload`, `package_name`, `school_name`, `school_email`, `updated_at`, `created_at`) values (8, 0, JT-1772072392, 6000000.00, success, DOKU, 2026-02-26 09:22:06, ?, {\"service\":{\"id\":\"VIRTUAL_ACCOUNT\"},\"acquirer\":{\"id\":\"BCA\"},\"channel\":{\"id\":\"VIRTUAL_ACCOUNT_BCA\"},\"order\":{\"invoice_number\":\"JT-1772072392\",\"amount\":6000000},\"virtual_account_info\":{\"virtual_account_number\":\"1900800000232846\"},\"virtual_account_payment\":{\"date\":\"20260218135742\",\"systrace_number\":\"128311\",\"reference_number\":\"97748\",\"channel_code\":null,\"request_id\":\"820799\",\"identifier\":[{\"name\":\"REQUEST_ID\",\"value\":\"820799\"},{\"name\":\"REFERENCE\",\"value\":\"97748\"},{\"name\":\"CHANNEL_TYPE\",\"value\":\"6014\"}]},\"transaction\":{\"status\":\"SUCCESS\",\"date\":\"2026-02-18T06:57:42Z\",\"original_request_id\":\"bdf0aedd-d630-4c31-be10-6334cfb3e1f9\"},\"additional_info\":{\"origin\":{\"source\":\"direct\",\"system\":\"mid-jokul-checkout-system\",\"product\":\"CHECKOUT\",\"apiFormat\":\"JOKUL\"},\"line_items\":[{\"name\":\"Subscription Package\",\"price\":\"500000\",\"quantity\":1}]}}, Paket Platinum, uji coba tes struk pembayaran, email@email.com, 2026-02-26 09:22:06, 2026-02-26 09:22:06))","file":"C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php","line":829,"trace":"#0 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(783): Illuminate\\Database\\Connection->runQueryCallback('insert into `do...', Array, Object(Closure))
#1 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\MySqlConnection.php(34): Illuminate\\Database\\Connection->run('insert into `do...', Array, Object(Closure))
#2 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Query\\Processors\\MySqlProcessor.php(35): Illuminate\\Database\\MySqlConnection->insert('insert into `do...', Array, 'id')
#3 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Query\\Builder.php(3549): Illuminate\\Database\\Query\\Processors\\MySqlProcessor->processInsertGetId(Object(Illuminate\\Database\\Query\\Builder), 'insert into `do...', Array, 'id')
#4 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Builder.php(1982): Illuminate\\Database\\Query\\Builder->insertGetId(Array, 'id')
#5 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(1334): Illuminate\\Database\\Eloquent\\Builder->__call('insertGetId', Array)
#6 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(1299): Illuminate\\Database\\Eloquent\\Model->insertAndSetId(Object(Illuminate\\Database\\Eloquent\\Builder), Array)
#7 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(1138): Illuminate\\Database\\Eloquent\\Model->performInsert(Object(Illuminate\\Database\\Eloquent\\Builder))
#8 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Builder.php(1025): Illuminate\\Database\\Eloquent\\Model->save()
#9 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Support\\helpers.php(307): Illuminate\\Database\\Eloquent\\Builder->Illuminate\\Database\\Eloquent\\{closure}(Object(App\\Models\\DokuPaymentReceipt))
#10 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Builder.php(1024): tap(Object(App\\Models\\DokuPaymentReceipt), Object(Closure))
#11 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Support\\Traits\\ForwardsCalls.php(23): Illuminate\\Database\\Eloquent\\Builder->create(Array)
#12 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(2335): Illuminate\\Database\\Eloquent\\Model->forwardCallTo(Object(Illuminate\\Database\\Eloquent\\Builder), 'create', Array)
#13 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(2347): Illuminate\\Database\\Eloquent\\Model->__call('create', Array)
#14 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\app\\Http\\Controllers\\Api\\PaymentApiController.php(391): Illuminate\\Database\\Eloquent\\Model::__callStatic('create', Array)
#15 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Controller.php(54): App\\Http\\Controllers\\Api\\PaymentApiController->dokuWebhook(Object(Illuminate\\Http\\Request))
#16 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\ControllerDispatcher.php(43): Illuminate\\Routing\\Controller->callAction('dokuWebhook', Array)
#17 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(259): Illuminate\\Routing\\ControllerDispatcher->dispatch(Object(Illuminate\\Routing\\Route), Object(App\\Http\\Controllers\\Api\\PaymentApiController), 'dokuWebhook')
#18 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(205): Illuminate\\Routing\\Route->runController()
#19 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(806): Illuminate\\Routing\\Route->run()
#20 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(144): Illuminate\\Routing\\Router->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#21 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\app\\Http\\Middleware\\LogDokuWebhook.php(63): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#22 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): App\\Http\\Middleware\\LogDokuWebhook->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#23 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(119): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#24 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(805): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#25 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(784): Illuminate\\Routing\\Router->runRouteWithinStack(Object(Illuminate\\Routing\\Route), Object(Illuminate\\Http\\Request))
#26 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(748): Illuminate\\Routing\\Router->runRoute(Object(Illuminate\\Http\\Request), Object(Illuminate\\Routing\\Route))
#27 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(737): Illuminate\\Routing\\Router->dispatchToRoute(Object(Illuminate\\Http\\Request))
#28 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(200): Illuminate\\Routing\\Router->dispatch(Object(Illuminate\\Http\\Request))
#29 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(144): Illuminate\\Foundation\\Http\\Kernel->Illuminate\\Foundation\\Http\\{closure}(Object(Illuminate\\Http\\Request))
#30 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\beyondcode\\laravel-query-detector\\src\\QueryDetectorMiddleware.php(33): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#31 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): BeyondCode\\QueryDetector\\QueryDetectorMiddleware->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#32 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\barryvdh\\laravel-debugbar\\src\\Middleware\\InjectDebugbar.php(66): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#33 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Barryvdh\\Debugbar\\Middleware\\InjectDebugbar->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#34 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#35 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull.php(31): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#36 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#37 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#38 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TrimStrings.php(40): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#39 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\TrimStrings->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#40 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize.php(27): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#41 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#42 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance.php(99): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#43 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#44 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\HandleCors.php(62): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#45 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Http\\Middleware\\HandleCors->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#46 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\TrustProxies.php(39): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#47 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Http\\Middleware\\TrustProxies->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#48 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(119): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#49 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(175): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#50 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(144): Illuminate\\Foundation\\Http\\Kernel->sendRequestThroughRouter(Object(Illuminate\\Http\\Request))
#51 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\public\\index.php(51): Illuminate\\Foundation\\Http\\Kernel->handle(Object(Illuminate\\Http\\Request))
#52 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\resources\\server.php(16): require_once('C:\\\\Users\\\\satri\\\\...')
#53 {main}"} 
[2026-02-26 09:22:06] local.INFO: ================================================================================  
[2026-02-26 09:22:06] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-26 09:22:06] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-26 09:22:06] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"OK"}  
[2026-02-26 09:22:06] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 55.55 ms  
[2026-02-26 09:22:06] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:22:27] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:22:27] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-26 09:22:27] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-26 09:22:27  
[2026-02-26 09:22:27] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-26 09:22:27] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-26 09:22:27] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-26 09:22:27] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-26 09:22:27] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-26 09:22:27] local.INFO: [WEBHOOK REQUEST] Content-Length: 1244  
[2026-02-26 09:22:27] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-26 09:22:27] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-26 09:22:27] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1244 bytes  
[2026-02-26 09:22:27] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1772072392",
    "amount": 6000000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000233080"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-26 09:22:27] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-26 09:22:27] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1772072392",
        "amount": 6000000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000233080"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-26 09:22:27] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:22:27] local.INFO: ================================================================================  
[2026-02-26 09:22:27] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-26 09:22:27] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-26 09:22:27] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-26 09:22:27  
[2026-02-26 09:22:27] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["c1125652-db97-45a2-86cd-5dca03430b2f"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1244"]} 
[2026-02-26 09:22:27] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1772072392","amount":6000000},"virtual_account_info":{"virtual_account_number":"1900800000233080"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-26 09:22:27] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-26 09:22:27] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1772072392","transaction_status":"SUCCESS","amount":6000000} 
[2026-02-26 09:22:27] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-26 09:22:27] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-26 09:22:27] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-26 09:22:27] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1772072392")->lockForUpdate()...  
[2026-02-26 09:22:27] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-26 09:22:27] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":8,"school_name":"uji coba tes struk pembayaran","school_email":"email@email.com","current_payment_status":"pending"} 
[2026-02-26 09:22:27] local.INFO: [DOKU WEBHOOK][STEP 5] Memanggil inquiry->update() â€” mengubah payment_status ke "success"...  
[2026-02-26 09:22:27] local.INFO: [DOKU WEBHOOK][STEP 5] Payment status TERUPDATE: {"inquiry_id":8,"new_payment_status":"success","payment_date":"2026-02-26 09:22:27"} 
[2026-02-26 09:22:27] local.INFO: [DOKU WEBHOOK][STEP 5b] Creating DokuPaymentReceipt record...  
[2026-02-26 09:22:27] local.ERROR: [DOKU WEBHOOK] âŒ EXCEPTION TERJADI â€” DB::rollBack() dipanggil {"error":"SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`laravel`.`doku_payment_receipts`, CONSTRAINT `doku_payment_receipts_school_id_foreign` FOREIGN KEY (`school_id`) REFERENCES `schools` (`id`) ON DELETE CASCADE) (Connection: mysql, SQL: insert into `doku_payment_receipts` (`school_inquiry_id`, `school_id`, `invoice_number`, `amount`, `payment_status`, `payment_gateway`, `payment_date`, `doku_transaction_id`, `raw_payload`, `package_name`, `school_name`, `school_email`, `updated_at`, `created_at`) values (8, 0, JT-1772072392, 6000000.00, success, DOKU, 2026-02-26 09:22:27, ?, {\"service\":{\"id\":\"VIRTUAL_ACCOUNT\"},\"acquirer\":{\"id\":\"BCA\"},\"channel\":{\"id\":\"VIRTUAL_ACCOUNT_BCA\"},\"order\":{\"invoice_number\":\"JT-1772072392\",\"amount\":6000000},\"virtual_account_info\":{\"virtual_account_number\":\"1900800000233080\"},\"virtual_account_payment\":{\"date\":\"20260218135742\",\"systrace_number\":\"128311\",\"reference_number\":\"97748\",\"channel_code\":null,\"request_id\":\"820799\",\"identifier\":[{\"name\":\"REQUEST_ID\",\"value\":\"820799\"},{\"name\":\"REFERENCE\",\"value\":\"97748\"},{\"name\":\"CHANNEL_TYPE\",\"value\":\"6014\"}]},\"transaction\":{\"status\":\"SUCCESS\",\"date\":\"2026-02-18T06:57:42Z\",\"original_request_id\":\"bdf0aedd-d630-4c31-be10-6334cfb3e1f9\"},\"additional_info\":{\"origin\":{\"source\":\"direct\",\"system\":\"mid-jokul-checkout-system\",\"product\":\"CHECKOUT\",\"apiFormat\":\"JOKUL\"},\"line_items\":[{\"name\":\"Subscription Package\",\"price\":\"500000\",\"quantity\":1}]}}, Paket Platinum, uji coba tes struk pembayaran, email@email.com, 2026-02-26 09:22:27, 2026-02-26 09:22:27))","file":"C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php","line":829,"trace":"#0 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(783): Illuminate\\Database\\Connection->runQueryCallback('insert into `do...', Array, Object(Closure))
#1 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\MySqlConnection.php(34): Illuminate\\Database\\Connection->run('insert into `do...', Array, Object(Closure))
#2 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Query\\Processors\\MySqlProcessor.php(35): Illuminate\\Database\\MySqlConnection->insert('insert into `do...', Array, 'id')
#3 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Query\\Builder.php(3549): Illuminate\\Database\\Query\\Processors\\MySqlProcessor->processInsertGetId(Object(Illuminate\\Database\\Query\\Builder), 'insert into `do...', Array, 'id')
#4 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Builder.php(1982): Illuminate\\Database\\Query\\Builder->insertGetId(Array, 'id')
#5 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(1334): Illuminate\\Database\\Eloquent\\Builder->__call('insertGetId', Array)
#6 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(1299): Illuminate\\Database\\Eloquent\\Model->insertAndSetId(Object(Illuminate\\Database\\Eloquent\\Builder), Array)
#7 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(1138): Illuminate\\Database\\Eloquent\\Model->performInsert(Object(Illuminate\\Database\\Eloquent\\Builder))
#8 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Builder.php(1025): Illuminate\\Database\\Eloquent\\Model->save()
#9 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Support\\helpers.php(307): Illuminate\\Database\\Eloquent\\Builder->Illuminate\\Database\\Eloquent\\{closure}(Object(App\\Models\\DokuPaymentReceipt))
#10 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Builder.php(1024): tap(Object(App\\Models\\DokuPaymentReceipt), Object(Closure))
#11 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Support\\Traits\\ForwardsCalls.php(23): Illuminate\\Database\\Eloquent\\Builder->create(Array)
#12 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(2335): Illuminate\\Database\\Eloquent\\Model->forwardCallTo(Object(Illuminate\\Database\\Eloquent\\Builder), 'create', Array)
#13 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(2347): Illuminate\\Database\\Eloquent\\Model->__call('create', Array)
#14 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\app\\Http\\Controllers\\Api\\PaymentApiController.php(391): Illuminate\\Database\\Eloquent\\Model::__callStatic('create', Array)
#15 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Controller.php(54): App\\Http\\Controllers\\Api\\PaymentApiController->dokuWebhook(Object(Illuminate\\Http\\Request))
#16 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\ControllerDispatcher.php(43): Illuminate\\Routing\\Controller->callAction('dokuWebhook', Array)
#17 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(259): Illuminate\\Routing\\ControllerDispatcher->dispatch(Object(Illuminate\\Routing\\Route), Object(App\\Http\\Controllers\\Api\\PaymentApiController), 'dokuWebhook')
#18 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(205): Illuminate\\Routing\\Route->runController()
#19 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(806): Illuminate\\Routing\\Route->run()
#20 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(144): Illuminate\\Routing\\Router->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#21 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\app\\Http\\Middleware\\LogDokuWebhook.php(63): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#22 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): App\\Http\\Middleware\\LogDokuWebhook->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#23 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(119): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#24 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(805): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#25 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(784): Illuminate\\Routing\\Router->runRouteWithinStack(Object(Illuminate\\Routing\\Route), Object(Illuminate\\Http\\Request))
#26 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(748): Illuminate\\Routing\\Router->runRoute(Object(Illuminate\\Http\\Request), Object(Illuminate\\Routing\\Route))
#27 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(737): Illuminate\\Routing\\Router->dispatchToRoute(Object(Illuminate\\Http\\Request))
#28 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(200): Illuminate\\Routing\\Router->dispatch(Object(Illuminate\\Http\\Request))
#29 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(144): Illuminate\\Foundation\\Http\\Kernel->Illuminate\\Foundation\\Http\\{closure}(Object(Illuminate\\Http\\Request))
#30 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\beyondcode\\laravel-query-detector\\src\\QueryDetectorMiddleware.php(33): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#31 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): BeyondCode\\QueryDetector\\QueryDetectorMiddleware->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#32 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\barryvdh\\laravel-debugbar\\src\\Middleware\\InjectDebugbar.php(66): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#33 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Barryvdh\\Debugbar\\Middleware\\InjectDebugbar->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#34 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#35 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull.php(31): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#36 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#37 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#38 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TrimStrings.php(40): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#39 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\TrimStrings->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#40 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize.php(27): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#41 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#42 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance.php(99): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#43 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#44 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\HandleCors.php(62): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#45 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Http\\Middleware\\HandleCors->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#46 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\TrustProxies.php(39): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#47 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Http\\Middleware\\TrustProxies->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#48 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(119): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#49 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(175): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#50 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(144): Illuminate\\Foundation\\Http\\Kernel->sendRequestThroughRouter(Object(Illuminate\\Http\\Request))
#51 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\public\\index.php(51): Illuminate\\Foundation\\Http\\Kernel->handle(Object(Illuminate\\Http\\Request))
#52 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\resources\\server.php(16): require_once('C:\\\\Users\\\\satri\\\\...')
#53 {main}"} 
[2026-02-26 09:22:27] local.INFO: ================================================================================  
[2026-02-26 09:22:27] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-26 09:22:27] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-26 09:22:27] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"OK"}  
[2026-02-26 09:22:27] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 56.01 ms  
[2026-02-26 09:22:27] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:22:29] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:22:29] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-26 09:22:29] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-26 09:22:29  
[2026-02-26 09:22:29] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-26 09:22:29] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-26 09:22:29] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-26 09:22:29] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-26 09:22:29] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-26 09:22:29] local.INFO: [WEBHOOK REQUEST] Content-Length: 1244  
[2026-02-26 09:22:29] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-26 09:22:29] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-26 09:22:29] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1244 bytes  
[2026-02-26 09:22:29] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1772072392",
    "amount": 6000000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000233080"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-26 09:22:29] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-26 09:22:29] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1772072392",
        "amount": 6000000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000233080"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-26 09:22:29] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:22:29] local.INFO: ================================================================================  
[2026-02-26 09:22:29] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-26 09:22:29] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-26 09:22:29] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-26 09:22:29  
[2026-02-26 09:22:29] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["770876df-15d8-419a-a2b3-7f8a8cd330ce"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1244"]} 
[2026-02-26 09:22:29] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1772072392","amount":6000000},"virtual_account_info":{"virtual_account_number":"1900800000233080"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-26 09:22:29] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-26 09:22:29] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1772072392","transaction_status":"SUCCESS","amount":6000000} 
[2026-02-26 09:22:29] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-26 09:22:29] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-26 09:22:29] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-26 09:22:29] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1772072392")->lockForUpdate()...  
[2026-02-26 09:22:29] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-26 09:22:29] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":8,"school_name":"uji coba tes struk pembayaran","school_email":"email@email.com","current_payment_status":"pending"} 
[2026-02-26 09:22:29] local.INFO: [DOKU WEBHOOK][STEP 5] Memanggil inquiry->update() â€” mengubah payment_status ke "success"...  
[2026-02-26 09:22:29] local.INFO: [DOKU WEBHOOK][STEP 5] Payment status TERUPDATE: {"inquiry_id":8,"new_payment_status":"success","payment_date":"2026-02-26 09:22:29"} 
[2026-02-26 09:22:29] local.INFO: [DOKU WEBHOOK][STEP 5b] Creating DokuPaymentReceipt record...  
[2026-02-26 09:22:29] local.ERROR: [DOKU WEBHOOK] âŒ EXCEPTION TERJADI â€” DB::rollBack() dipanggil {"error":"SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`laravel`.`doku_payment_receipts`, CONSTRAINT `doku_payment_receipts_school_id_foreign` FOREIGN KEY (`school_id`) REFERENCES `schools` (`id`) ON DELETE CASCADE) (Connection: mysql, SQL: insert into `doku_payment_receipts` (`school_inquiry_id`, `school_id`, `invoice_number`, `amount`, `payment_status`, `payment_gateway`, `payment_date`, `doku_transaction_id`, `raw_payload`, `package_name`, `school_name`, `school_email`, `updated_at`, `created_at`) values (8, 0, JT-1772072392, 6000000.00, success, DOKU, 2026-02-26 09:22:29, ?, {\"service\":{\"id\":\"VIRTUAL_ACCOUNT\"},\"acquirer\":{\"id\":\"BCA\"},\"channel\":{\"id\":\"VIRTUAL_ACCOUNT_BCA\"},\"order\":{\"invoice_number\":\"JT-1772072392\",\"amount\":6000000},\"virtual_account_info\":{\"virtual_account_number\":\"1900800000233080\"},\"virtual_account_payment\":{\"date\":\"20260218135742\",\"systrace_number\":\"128311\",\"reference_number\":\"97748\",\"channel_code\":null,\"request_id\":\"820799\",\"identifier\":[{\"name\":\"REQUEST_ID\",\"value\":\"820799\"},{\"name\":\"REFERENCE\",\"value\":\"97748\"},{\"name\":\"CHANNEL_TYPE\",\"value\":\"6014\"}]},\"transaction\":{\"status\":\"SUCCESS\",\"date\":\"2026-02-18T06:57:42Z\",\"original_request_id\":\"bdf0aedd-d630-4c31-be10-6334cfb3e1f9\"},\"additional_info\":{\"origin\":{\"source\":\"direct\",\"system\":\"mid-jokul-checkout-system\",\"product\":\"CHECKOUT\",\"apiFormat\":\"JOKUL\"},\"line_items\":[{\"name\":\"Subscription Package\",\"price\":\"500000\",\"quantity\":1}]}}, Paket Platinum, uji coba tes struk pembayaran, email@email.com, 2026-02-26 09:22:29, 2026-02-26 09:22:29))","file":"C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php","line":829,"trace":"#0 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(783): Illuminate\\Database\\Connection->runQueryCallback('insert into `do...', Array, Object(Closure))
#1 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\MySqlConnection.php(34): Illuminate\\Database\\Connection->run('insert into `do...', Array, Object(Closure))
#2 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Query\\Processors\\MySqlProcessor.php(35): Illuminate\\Database\\MySqlConnection->insert('insert into `do...', Array, 'id')
#3 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Query\\Builder.php(3549): Illuminate\\Database\\Query\\Processors\\MySqlProcessor->processInsertGetId(Object(Illuminate\\Database\\Query\\Builder), 'insert into `do...', Array, 'id')
#4 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Builder.php(1982): Illuminate\\Database\\Query\\Builder->insertGetId(Array, 'id')
#5 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(1334): Illuminate\\Database\\Eloquent\\Builder->__call('insertGetId', Array)
#6 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(1299): Illuminate\\Database\\Eloquent\\Model->insertAndSetId(Object(Illuminate\\Database\\Eloquent\\Builder), Array)
#7 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(1138): Illuminate\\Database\\Eloquent\\Model->performInsert(Object(Illuminate\\Database\\Eloquent\\Builder))
#8 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Builder.php(1025): Illuminate\\Database\\Eloquent\\Model->save()
#9 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Support\\helpers.php(307): Illuminate\\Database\\Eloquent\\Builder->Illuminate\\Database\\Eloquent\\{closure}(Object(App\\Models\\DokuPaymentReceipt))
#10 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Builder.php(1024): tap(Object(App\\Models\\DokuPaymentReceipt), Object(Closure))
#11 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Support\\Traits\\ForwardsCalls.php(23): Illuminate\\Database\\Eloquent\\Builder->create(Array)
#12 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(2335): Illuminate\\Database\\Eloquent\\Model->forwardCallTo(Object(Illuminate\\Database\\Eloquent\\Builder), 'create', Array)
#13 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(2347): Illuminate\\Database\\Eloquent\\Model->__call('create', Array)
#14 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\app\\Http\\Controllers\\Api\\PaymentApiController.php(391): Illuminate\\Database\\Eloquent\\Model::__callStatic('create', Array)
#15 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Controller.php(54): App\\Http\\Controllers\\Api\\PaymentApiController->dokuWebhook(Object(Illuminate\\Http\\Request))
#16 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\ControllerDispatcher.php(43): Illuminate\\Routing\\Controller->callAction('dokuWebhook', Array)
#17 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(259): Illuminate\\Routing\\ControllerDispatcher->dispatch(Object(Illuminate\\Routing\\Route), Object(App\\Http\\Controllers\\Api\\PaymentApiController), 'dokuWebhook')
#18 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(205): Illuminate\\Routing\\Route->runController()
#19 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(806): Illuminate\\Routing\\Route->run()
#20 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(144): Illuminate\\Routing\\Router->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#21 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\app\\Http\\Middleware\\LogDokuWebhook.php(63): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#22 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): App\\Http\\Middleware\\LogDokuWebhook->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#23 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(119): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#24 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(805): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#25 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(784): Illuminate\\Routing\\Router->runRouteWithinStack(Object(Illuminate\\Routing\\Route), Object(Illuminate\\Http\\Request))
#26 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(748): Illuminate\\Routing\\Router->runRoute(Object(Illuminate\\Http\\Request), Object(Illuminate\\Routing\\Route))
#27 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(737): Illuminate\\Routing\\Router->dispatchToRoute(Object(Illuminate\\Http\\Request))
#28 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(200): Illuminate\\Routing\\Router->dispatch(Object(Illuminate\\Http\\Request))
#29 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(144): Illuminate\\Foundation\\Http\\Kernel->Illuminate\\Foundation\\Http\\{closure}(Object(Illuminate\\Http\\Request))
#30 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\beyondcode\\laravel-query-detector\\src\\QueryDetectorMiddleware.php(33): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#31 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): BeyondCode\\QueryDetector\\QueryDetectorMiddleware->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#32 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\barryvdh\\laravel-debugbar\\src\\Middleware\\InjectDebugbar.php(66): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#33 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Barryvdh\\Debugbar\\Middleware\\InjectDebugbar->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#34 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#35 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull.php(31): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#36 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#37 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#38 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TrimStrings.php(40): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#39 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\TrimStrings->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#40 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize.php(27): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#41 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#42 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance.php(99): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#43 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#44 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\HandleCors.php(62): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#45 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Http\\Middleware\\HandleCors->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#46 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\TrustProxies.php(39): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#47 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Http\\Middleware\\TrustProxies->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#48 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(119): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#49 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(175): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#50 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(144): Illuminate\\Foundation\\Http\\Kernel->sendRequestThroughRouter(Object(Illuminate\\Http\\Request))
#51 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\public\\index.php(51): Illuminate\\Foundation\\Http\\Kernel->handle(Object(Illuminate\\Http\\Request))
#52 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\resources\\server.php(16): require_once('C:\\\\Users\\\\satri\\\\...')
#53 {main}"} 
[2026-02-26 09:22:29] local.INFO: ================================================================================  
[2026-02-26 09:22:29] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-26 09:22:29] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-26 09:22:29] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"OK"}  
[2026-02-26 09:22:29] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 74.81 ms  
[2026-02-26 09:22:29] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:28:42] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:28:42] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-26 09:28:42] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-26 09:28:42  
[2026-02-26 09:28:42] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-26 09:28:42] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-26 09:28:42] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-26 09:28:42] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-26 09:28:42] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-26 09:28:42] local.INFO: [WEBHOOK REQUEST] Content-Length: 1244  
[2026-02-26 09:28:42] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-26 09:28:42] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-26 09:28:42] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1244 bytes  
[2026-02-26 09:28:42] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1772072392",
    "amount": 6000000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000233080"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-26 09:28:42] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-26 09:28:42] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1772072392",
        "amount": 6000000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000233080"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-26 09:28:42] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:28:42] local.INFO: ================================================================================  
[2026-02-26 09:28:42] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-26 09:28:42] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-26 09:28:42] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-26 09:28:42  
[2026-02-26 09:28:42] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["2110b82d-83fc-485c-a4c1-5b76c22ad51c"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1244"]} 
[2026-02-26 09:28:42] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1772072392","amount":6000000},"virtual_account_info":{"virtual_account_number":"1900800000233080"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-26 09:28:42] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-26 09:28:42] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1772072392","transaction_status":"SUCCESS","amount":6000000} 
[2026-02-26 09:28:42] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-26 09:28:42] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-26 09:28:42] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-26 09:28:42] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1772072392")->lockForUpdate()...  
[2026-02-26 09:28:42] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-26 09:28:42] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":8,"school_name":"uji coba tes struk pembayaran","school_email":"email@email.com","current_payment_status":"pending"} 
[2026-02-26 09:28:42] local.INFO: [DOKU WEBHOOK][STEP 5] Memanggil inquiry->update() â€” mengubah payment_status ke "success"...  
[2026-02-26 09:28:42] local.ERROR: [DOKU WEBHOOK] âŒ EXCEPTION TERJADI â€” DB::rollBack() dipanggil {"error":"SQLSTATE[42S22]: Column not found: 1054 Unknown column 'payment_date' in 'field list' (Connection: mysql, SQL: update `school_inquiries` set `payment_status` = success, `payment_date` = 2026-02-26 09:28:42, `school_inquiries`.`updated_at` = 2026-02-26 09:28:42 where `id` = 8)","file":"C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php","line":829,"trace":"#0 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(783): Illuminate\\Database\\Connection->runQueryCallback('update `school_...', Array, Object(Closure))
#1 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(600): Illuminate\\Database\\Connection->run('update `school_...', Array, Object(Closure))
#2 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(552): Illuminate\\Database\\Connection->affectingStatement('update `school_...', Array)
#3 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Query\\Builder.php(3602): Illuminate\\Database\\Connection->update('update `school_...', Array)
#4 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Builder.php(1061): Illuminate\\Database\\Query\\Builder->update(Array)
#5 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(1214): Illuminate\\Database\\Eloquent\\Builder->update(Array)
#6 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(1131): Illuminate\\Database\\Eloquent\\Model->performUpdate(Object(Illuminate\\Database\\Eloquent\\Builder))
#7 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(991): Illuminate\\Database\\Eloquent\\Model->save(Array)
#8 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\app\\Http\\Controllers\\Api\\PaymentApiController.php(369): Illuminate\\Database\\Eloquent\\Model->update(Array)
#9 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Controller.php(54): App\\Http\\Controllers\\Api\\PaymentApiController->dokuWebhook(Object(Illuminate\\Http\\Request))
#10 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\ControllerDispatcher.php(43): Illuminate\\Routing\\Controller->callAction('dokuWebhook', Array)
#11 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(259): Illuminate\\Routing\\ControllerDispatcher->dispatch(Object(Illuminate\\Routing\\Route), Object(App\\Http\\Controllers\\Api\\PaymentApiController), 'dokuWebhook')
#12 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(205): Illuminate\\Routing\\Route->runController()
#13 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(806): Illuminate\\Routing\\Route->run()
#14 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(144): Illuminate\\Routing\\Router->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#15 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\app\\Http\\Middleware\\LogDokuWebhook.php(63): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#16 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): App\\Http\\Middleware\\LogDokuWebhook->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#17 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(119): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#18 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(805): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#19 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(784): Illuminate\\Routing\\Router->runRouteWithinStack(Object(Illuminate\\Routing\\Route), Object(Illuminate\\Http\\Request))
#20 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(748): Illuminate\\Routing\\Router->runRoute(Object(Illuminate\\Http\\Request), Object(Illuminate\\Routing\\Route))
#21 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(737): Illuminate\\Routing\\Router->dispatchToRoute(Object(Illuminate\\Http\\Request))
#22 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(200): Illuminate\\Routing\\Router->dispatch(Object(Illuminate\\Http\\Request))
#23 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(144): Illuminate\\Foundation\\Http\\Kernel->Illuminate\\Foundation\\Http\\{closure}(Object(Illuminate\\Http\\Request))
#24 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\beyondcode\\laravel-query-detector\\src\\QueryDetectorMiddleware.php(33): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#25 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): BeyondCode\\QueryDetector\\QueryDetectorMiddleware->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#26 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\barryvdh\\laravel-debugbar\\src\\Middleware\\InjectDebugbar.php(66): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#27 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Barryvdh\\Debugbar\\Middleware\\InjectDebugbar->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#28 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#29 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull.php(31): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#30 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#31 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#32 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TrimStrings.php(40): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#33 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\TrimStrings->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#34 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize.php(27): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#35 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#36 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance.php(99): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#37 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#38 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\HandleCors.php(62): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#39 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Http\\Middleware\\HandleCors->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#40 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\TrustProxies.php(39): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#41 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Http\\Middleware\\TrustProxies->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#42 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(119): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#43 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(175): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#44 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(144): Illuminate\\Foundation\\Http\\Kernel->sendRequestThroughRouter(Object(Illuminate\\Http\\Request))
#45 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\public\\index.php(51): Illuminate\\Foundation\\Http\\Kernel->handle(Object(Illuminate\\Http\\Request))
#46 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\resources\\server.php(16): require_once('C:\\\\Users\\\\satri\\\\...')
#47 {main}"} 
[2026-02-26 09:28:42] local.INFO: ================================================================================  
[2026-02-26 09:28:42] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-26 09:28:42] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-26 09:28:42] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"OK"}  
[2026-02-26 09:28:42] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 48.07 ms  
[2026-02-26 09:28:42] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:29:12] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:29:12] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-26 09:29:12] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-26 09:29:12  
[2026-02-26 09:29:12] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-26 09:29:12] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-26 09:29:12] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-26 09:29:12] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-26 09:29:12] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-26 09:29:12] local.INFO: [WEBHOOK REQUEST] Content-Length: 1244  
[2026-02-26 09:29:12] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-26 09:29:12] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-26 09:29:12] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1244 bytes  
[2026-02-26 09:29:12] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1772072392",
    "amount": 6000000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000233080"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-26 09:29:12] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-26 09:29:12] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1772072392",
        "amount": 6000000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000233080"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-26 09:29:12] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:29:12] local.INFO: ================================================================================  
[2026-02-26 09:29:12] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-26 09:29:12] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-26 09:29:12] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-26 09:29:12  
[2026-02-26 09:29:12] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["d92f1a38-bcb7-4de2-b6ae-af1689393339"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1244"]} 
[2026-02-26 09:29:12] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1772072392","amount":6000000},"virtual_account_info":{"virtual_account_number":"1900800000233080"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-26 09:29:12] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-26 09:29:12] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1772072392","transaction_status":"SUCCESS","amount":6000000} 
[2026-02-26 09:29:12] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-26 09:29:12] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-26 09:29:12] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-26 09:29:12] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1772072392")->lockForUpdate()...  
[2026-02-26 09:29:12] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-26 09:29:12] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":8,"school_name":"uji coba tes struk pembayaran","school_email":"email@email.com","current_payment_status":"pending"} 
[2026-02-26 09:29:12] local.INFO: [DOKU WEBHOOK][STEP 5] Memanggil inquiry->update() â€” mengubah payment_status ke "success"...  
[2026-02-26 09:29:12] local.ERROR: [DOKU WEBHOOK] âŒ EXCEPTION TERJADI â€” DB::rollBack() dipanggil {"error":"SQLSTATE[42S22]: Column not found: 1054 Unknown column 'payment_date' in 'field list' (Connection: mysql, SQL: update `school_inquiries` set `payment_status` = success, `payment_date` = 2026-02-26 09:29:12, `school_inquiries`.`updated_at` = 2026-02-26 09:29:12 where `id` = 8)","file":"C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php","line":829,"trace":"#0 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(783): Illuminate\\Database\\Connection->runQueryCallback('update `school_...', Array, Object(Closure))
#1 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(600): Illuminate\\Database\\Connection->run('update `school_...', Array, Object(Closure))
#2 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(552): Illuminate\\Database\\Connection->affectingStatement('update `school_...', Array)
#3 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Query\\Builder.php(3602): Illuminate\\Database\\Connection->update('update `school_...', Array)
#4 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Builder.php(1061): Illuminate\\Database\\Query\\Builder->update(Array)
#5 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(1214): Illuminate\\Database\\Eloquent\\Builder->update(Array)
#6 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(1131): Illuminate\\Database\\Eloquent\\Model->performUpdate(Object(Illuminate\\Database\\Eloquent\\Builder))
#7 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(991): Illuminate\\Database\\Eloquent\\Model->save(Array)
#8 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\app\\Http\\Controllers\\Api\\PaymentApiController.php(369): Illuminate\\Database\\Eloquent\\Model->update(Array)
#9 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Controller.php(54): App\\Http\\Controllers\\Api\\PaymentApiController->dokuWebhook(Object(Illuminate\\Http\\Request))
#10 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\ControllerDispatcher.php(43): Illuminate\\Routing\\Controller->callAction('dokuWebhook', Array)
#11 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(259): Illuminate\\Routing\\ControllerDispatcher->dispatch(Object(Illuminate\\Routing\\Route), Object(App\\Http\\Controllers\\Api\\PaymentApiController), 'dokuWebhook')
#12 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(205): Illuminate\\Routing\\Route->runController()
#13 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(806): Illuminate\\Routing\\Route->run()
#14 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(144): Illuminate\\Routing\\Router->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#15 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\app\\Http\\Middleware\\LogDokuWebhook.php(63): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#16 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): App\\Http\\Middleware\\LogDokuWebhook->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#17 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(119): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#18 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(805): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#19 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(784): Illuminate\\Routing\\Router->runRouteWithinStack(Object(Illuminate\\Routing\\Route), Object(Illuminate\\Http\\Request))
#20 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(748): Illuminate\\Routing\\Router->runRoute(Object(Illuminate\\Http\\Request), Object(Illuminate\\Routing\\Route))
#21 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(737): Illuminate\\Routing\\Router->dispatchToRoute(Object(Illuminate\\Http\\Request))
#22 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(200): Illuminate\\Routing\\Router->dispatch(Object(Illuminate\\Http\\Request))
#23 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(144): Illuminate\\Foundation\\Http\\Kernel->Illuminate\\Foundation\\Http\\{closure}(Object(Illuminate\\Http\\Request))
#24 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\beyondcode\\laravel-query-detector\\src\\QueryDetectorMiddleware.php(33): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#25 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): BeyondCode\\QueryDetector\\QueryDetectorMiddleware->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#26 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\barryvdh\\laravel-debugbar\\src\\Middleware\\InjectDebugbar.php(66): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#27 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Barryvdh\\Debugbar\\Middleware\\InjectDebugbar->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#28 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#29 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull.php(31): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#30 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#31 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#32 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TrimStrings.php(40): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#33 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\TrimStrings->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#34 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize.php(27): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#35 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#36 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance.php(99): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#37 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#38 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\HandleCors.php(62): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#39 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Http\\Middleware\\HandleCors->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#40 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\TrustProxies.php(39): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#41 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Http\\Middleware\\TrustProxies->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#42 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(119): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#43 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(175): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#44 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(144): Illuminate\\Foundation\\Http\\Kernel->sendRequestThroughRouter(Object(Illuminate\\Http\\Request))
#45 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\public\\index.php(51): Illuminate\\Foundation\\Http\\Kernel->handle(Object(Illuminate\\Http\\Request))
#46 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\resources\\server.php(16): require_once('C:\\\\Users\\\\satri\\\\...')
#47 {main}"} 
[2026-02-26 09:29:12] local.INFO: ================================================================================  
[2026-02-26 09:29:12] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-26 09:29:12] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-26 09:29:12] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"OK"}  
[2026-02-26 09:29:12] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 39.06 ms  
[2026-02-26 09:29:12] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:32:05] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:32:05] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-26 09:32:05] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-26 09:32:05  
[2026-02-26 09:32:05] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-26 09:32:05] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-26 09:32:05] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-26 09:32:05] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-26 09:32:05] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-26 09:32:05] local.INFO: [WEBHOOK REQUEST] Content-Length: 1244  
[2026-02-26 09:32:05] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-26 09:32:05] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-26 09:32:05] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1244 bytes  
[2026-02-26 09:32:05] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1772072392",
    "amount": 6000000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000233080"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-26 09:32:05] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-26 09:32:05] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1772072392",
        "amount": 6000000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000233080"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-26 09:32:05] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:32:05] local.INFO: ================================================================================  
[2026-02-26 09:32:05] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-26 09:32:05] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-26 09:32:05] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-26 09:32:05  
[2026-02-26 09:32:05] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["998d8769-6c7c-4aa1-bd13-9e00a25c21ce"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1244"]} 
[2026-02-26 09:32:05] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1772072392","amount":6000000},"virtual_account_info":{"virtual_account_number":"1900800000233080"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-26 09:32:05] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-26 09:32:05] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1772072392","transaction_status":"SUCCESS","amount":6000000} 
[2026-02-26 09:32:05] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-26 09:32:05] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-26 09:32:05] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-26 09:32:05] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1772072392")->lockForUpdate()...  
[2026-02-26 09:32:05] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-26 09:32:05] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":8,"school_name":"uji coba tes struk pembayaran","school_email":"email@email.com","current_payment_status":"pending"} 
[2026-02-26 09:32:05] local.INFO: [DOKU WEBHOOK][STEP 5] Memanggil inquiry->update() â€” mengubah payment_status ke "success"...  
[2026-02-26 09:32:05] local.ERROR: [DOKU WEBHOOK] âŒ EXCEPTION TERJADI â€” DB::rollBack() dipanggil {"error":"SQLSTATE[42S22]: Column not found: 1054 Unknown column 'payment_date' in 'field list' (Connection: mysql, SQL: update `school_inquiries` set `payment_status` = success, `payment_date` = 2026-02-26 09:32:05, `school_inquiries`.`updated_at` = 2026-02-26 09:32:05 where `id` = 8)","file":"C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php","line":829,"trace":"#0 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(783): Illuminate\\Database\\Connection->runQueryCallback('update `school_...', Array, Object(Closure))
#1 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(600): Illuminate\\Database\\Connection->run('update `school_...', Array, Object(Closure))
#2 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(552): Illuminate\\Database\\Connection->affectingStatement('update `school_...', Array)
#3 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Query\\Builder.php(3602): Illuminate\\Database\\Connection->update('update `school_...', Array)
#4 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Builder.php(1061): Illuminate\\Database\\Query\\Builder->update(Array)
#5 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(1214): Illuminate\\Database\\Eloquent\\Builder->update(Array)
#6 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(1131): Illuminate\\Database\\Eloquent\\Model->performUpdate(Object(Illuminate\\Database\\Eloquent\\Builder))
#7 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(991): Illuminate\\Database\\Eloquent\\Model->save(Array)
#8 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\app\\Http\\Controllers\\Api\\PaymentApiController.php(369): Illuminate\\Database\\Eloquent\\Model->update(Array)
#9 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Controller.php(54): App\\Http\\Controllers\\Api\\PaymentApiController->dokuWebhook(Object(Illuminate\\Http\\Request))
#10 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\ControllerDispatcher.php(43): Illuminate\\Routing\\Controller->callAction('dokuWebhook', Array)
#11 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(259): Illuminate\\Routing\\ControllerDispatcher->dispatch(Object(Illuminate\\Routing\\Route), Object(App\\Http\\Controllers\\Api\\PaymentApiController), 'dokuWebhook')
#12 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(205): Illuminate\\Routing\\Route->runController()
#13 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(806): Illuminate\\Routing\\Route->run()
#14 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(144): Illuminate\\Routing\\Router->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#15 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\app\\Http\\Middleware\\LogDokuWebhook.php(63): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#16 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): App\\Http\\Middleware\\LogDokuWebhook->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#17 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(119): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#18 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(805): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#19 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(784): Illuminate\\Routing\\Router->runRouteWithinStack(Object(Illuminate\\Routing\\Route), Object(Illuminate\\Http\\Request))
#20 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(748): Illuminate\\Routing\\Router->runRoute(Object(Illuminate\\Http\\Request), Object(Illuminate\\Routing\\Route))
#21 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(737): Illuminate\\Routing\\Router->dispatchToRoute(Object(Illuminate\\Http\\Request))
#22 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(200): Illuminate\\Routing\\Router->dispatch(Object(Illuminate\\Http\\Request))
#23 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(144): Illuminate\\Foundation\\Http\\Kernel->Illuminate\\Foundation\\Http\\{closure}(Object(Illuminate\\Http\\Request))
#24 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\beyondcode\\laravel-query-detector\\src\\QueryDetectorMiddleware.php(33): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#25 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): BeyondCode\\QueryDetector\\QueryDetectorMiddleware->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#26 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\barryvdh\\laravel-debugbar\\src\\Middleware\\InjectDebugbar.php(66): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#27 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Barryvdh\\Debugbar\\Middleware\\InjectDebugbar->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#28 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#29 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull.php(31): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#30 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#31 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#32 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TrimStrings.php(40): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#33 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\TrimStrings->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#34 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize.php(27): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#35 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#36 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance.php(99): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#37 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#38 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\HandleCors.php(62): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#39 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Http\\Middleware\\HandleCors->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#40 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\TrustProxies.php(39): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#41 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Http\\Middleware\\TrustProxies->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#42 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(119): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#43 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(175): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#44 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(144): Illuminate\\Foundation\\Http\\Kernel->sendRequestThroughRouter(Object(Illuminate\\Http\\Request))
#45 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\public\\index.php(51): Illuminate\\Foundation\\Http\\Kernel->handle(Object(Illuminate\\Http\\Request))
#46 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\resources\\server.php(16): require_once('C:\\\\Users\\\\satri\\\\...')
#47 {main}"} 
[2026-02-26 09:32:05] local.INFO: ================================================================================  
[2026-02-26 09:32:05] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-26 09:32:05] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-26 09:32:05] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"OK"}  
[2026-02-26 09:32:05] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 77.39 ms  
[2026-02-26 09:32:05] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:32:07] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:32:07] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-26 09:32:07] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-26 09:32:07  
[2026-02-26 09:32:07] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-26 09:32:07] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-26 09:32:07] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-26 09:32:07] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-26 09:32:07] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-26 09:32:07] local.INFO: [WEBHOOK REQUEST] Content-Length: 1244  
[2026-02-26 09:32:07] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-26 09:32:07] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-26 09:32:07] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1244 bytes  
[2026-02-26 09:32:07] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1772072392",
    "amount": 6000000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000233080"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-26 09:32:07] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-26 09:32:07] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1772072392",
        "amount": 6000000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000233080"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-26 09:32:07] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:32:07] local.INFO: ================================================================================  
[2026-02-26 09:32:07] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-26 09:32:07] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-26 09:32:07] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-26 09:32:07  
[2026-02-26 09:32:07] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["9d94b142-818e-4ae1-ada6-f594b32329d4"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1244"]} 
[2026-02-26 09:32:07] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1772072392","amount":6000000},"virtual_account_info":{"virtual_account_number":"1900800000233080"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-26 09:32:07] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-26 09:32:07] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1772072392","transaction_status":"SUCCESS","amount":6000000} 
[2026-02-26 09:32:07] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-26 09:32:07] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-26 09:32:07] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-26 09:32:07] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1772072392")->lockForUpdate()...  
[2026-02-26 09:32:07] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-26 09:32:07] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":8,"school_name":"uji coba tes struk pembayaran","school_email":"email@email.com","current_payment_status":"pending"} 
[2026-02-26 09:32:07] local.INFO: [DOKU WEBHOOK][STEP 5] Memanggil inquiry->update() â€” mengubah payment_status ke "success"...  
[2026-02-26 09:32:07] local.ERROR: [DOKU WEBHOOK] âŒ EXCEPTION TERJADI â€” DB::rollBack() dipanggil {"error":"SQLSTATE[42S22]: Column not found: 1054 Unknown column 'payment_date' in 'field list' (Connection: mysql, SQL: update `school_inquiries` set `payment_status` = success, `payment_date` = 2026-02-26 09:32:07, `school_inquiries`.`updated_at` = 2026-02-26 09:32:07 where `id` = 8)","file":"C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php","line":829,"trace":"#0 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(783): Illuminate\\Database\\Connection->runQueryCallback('update `school_...', Array, Object(Closure))
#1 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(600): Illuminate\\Database\\Connection->run('update `school_...', Array, Object(Closure))
#2 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(552): Illuminate\\Database\\Connection->affectingStatement('update `school_...', Array)
#3 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Query\\Builder.php(3602): Illuminate\\Database\\Connection->update('update `school_...', Array)
#4 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Builder.php(1061): Illuminate\\Database\\Query\\Builder->update(Array)
#5 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(1214): Illuminate\\Database\\Eloquent\\Builder->update(Array)
#6 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(1131): Illuminate\\Database\\Eloquent\\Model->performUpdate(Object(Illuminate\\Database\\Eloquent\\Builder))
#7 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(991): Illuminate\\Database\\Eloquent\\Model->save(Array)
#8 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\app\\Http\\Controllers\\Api\\PaymentApiController.php(369): Illuminate\\Database\\Eloquent\\Model->update(Array)
#9 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Controller.php(54): App\\Http\\Controllers\\Api\\PaymentApiController->dokuWebhook(Object(Illuminate\\Http\\Request))
#10 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\ControllerDispatcher.php(43): Illuminate\\Routing\\Controller->callAction('dokuWebhook', Array)
#11 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(259): Illuminate\\Routing\\ControllerDispatcher->dispatch(Object(Illuminate\\Routing\\Route), Object(App\\Http\\Controllers\\Api\\PaymentApiController), 'dokuWebhook')
#12 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(205): Illuminate\\Routing\\Route->runController()
#13 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(806): Illuminate\\Routing\\Route->run()
#14 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(144): Illuminate\\Routing\\Router->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#15 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\app\\Http\\Middleware\\LogDokuWebhook.php(63): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#16 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): App\\Http\\Middleware\\LogDokuWebhook->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#17 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(119): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#18 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(805): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#19 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(784): Illuminate\\Routing\\Router->runRouteWithinStack(Object(Illuminate\\Routing\\Route), Object(Illuminate\\Http\\Request))
#20 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(748): Illuminate\\Routing\\Router->runRoute(Object(Illuminate\\Http\\Request), Object(Illuminate\\Routing\\Route))
#21 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(737): Illuminate\\Routing\\Router->dispatchToRoute(Object(Illuminate\\Http\\Request))
#22 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(200): Illuminate\\Routing\\Router->dispatch(Object(Illuminate\\Http\\Request))
#23 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(144): Illuminate\\Foundation\\Http\\Kernel->Illuminate\\Foundation\\Http\\{closure}(Object(Illuminate\\Http\\Request))
#24 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\beyondcode\\laravel-query-detector\\src\\QueryDetectorMiddleware.php(33): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#25 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): BeyondCode\\QueryDetector\\QueryDetectorMiddleware->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#26 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\barryvdh\\laravel-debugbar\\src\\Middleware\\InjectDebugbar.php(66): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#27 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Barryvdh\\Debugbar\\Middleware\\InjectDebugbar->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#28 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#29 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull.php(31): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#30 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#31 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#32 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TrimStrings.php(40): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#33 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\TrimStrings->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#34 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize.php(27): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#35 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#36 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance.php(99): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#37 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#38 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\HandleCors.php(62): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#39 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Http\\Middleware\\HandleCors->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#40 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\TrustProxies.php(39): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#41 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Http\\Middleware\\TrustProxies->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#42 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(119): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#43 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(175): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#44 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(144): Illuminate\\Foundation\\Http\\Kernel->sendRequestThroughRouter(Object(Illuminate\\Http\\Request))
#45 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\public\\index.php(51): Illuminate\\Foundation\\Http\\Kernel->handle(Object(Illuminate\\Http\\Request))
#46 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\resources\\server.php(16): require_once('C:\\\\Users\\\\satri\\\\...')
#47 {main}"} 
[2026-02-26 09:32:07] local.INFO: ================================================================================  
[2026-02-26 09:32:07] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-26 09:32:07] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-26 09:32:07] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"OK"}  
[2026-02-26 09:32:07] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 52.9 ms  
[2026-02-26 09:32:07] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:32:11] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:32:11] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-26 09:32:11] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-26 09:32:11  
[2026-02-26 09:32:11] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-26 09:32:11] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-26 09:32:11] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-26 09:32:11] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-26 09:32:11] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-26 09:32:11] local.INFO: [WEBHOOK REQUEST] Content-Length: 1244  
[2026-02-26 09:32:11] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-26 09:32:11] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-26 09:32:11] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1244 bytes  
[2026-02-26 09:32:11] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1772072392",
    "amount": 6000000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000233080"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-26 09:32:11] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-26 09:32:11] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1772072392",
        "amount": 6000000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000233080"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-26 09:32:11] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:32:11] local.INFO: ================================================================================  
[2026-02-26 09:32:11] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-26 09:32:11] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-26 09:32:11] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-26 09:32:11  
[2026-02-26 09:32:11] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["421ad98b-a904-481f-ae0f-d0b827b16559"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1244"]} 
[2026-02-26 09:32:11] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1772072392","amount":6000000},"virtual_account_info":{"virtual_account_number":"1900800000233080"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-26 09:32:11] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-26 09:32:11] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1772072392","transaction_status":"SUCCESS","amount":6000000} 
[2026-02-26 09:32:11] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-26 09:32:11] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-26 09:32:11] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-26 09:32:11] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1772072392")->lockForUpdate()...  
[2026-02-26 09:32:11] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-26 09:32:11] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":8,"school_name":"uji coba tes struk pembayaran","school_email":"email@email.com","current_payment_status":"pending"} 
[2026-02-26 09:32:11] local.INFO: [DOKU WEBHOOK][STEP 5] Memanggil inquiry->update() â€” mengubah payment_status ke "success"...  
[2026-02-26 09:32:11] local.ERROR: [DOKU WEBHOOK] âŒ EXCEPTION TERJADI â€” DB::rollBack() dipanggil {"error":"SQLSTATE[42S22]: Column not found: 1054 Unknown column 'payment_date' in 'field list' (Connection: mysql, SQL: update `school_inquiries` set `payment_status` = success, `payment_date` = 2026-02-26 09:32:11, `school_inquiries`.`updated_at` = 2026-02-26 09:32:11 where `id` = 8)","file":"C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php","line":829,"trace":"#0 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(783): Illuminate\\Database\\Connection->runQueryCallback('update `school_...', Array, Object(Closure))
#1 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(600): Illuminate\\Database\\Connection->run('update `school_...', Array, Object(Closure))
#2 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(552): Illuminate\\Database\\Connection->affectingStatement('update `school_...', Array)
#3 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Query\\Builder.php(3602): Illuminate\\Database\\Connection->update('update `school_...', Array)
#4 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Builder.php(1061): Illuminate\\Database\\Query\\Builder->update(Array)
#5 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(1214): Illuminate\\Database\\Eloquent\\Builder->update(Array)
#6 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(1131): Illuminate\\Database\\Eloquent\\Model->performUpdate(Object(Illuminate\\Database\\Eloquent\\Builder))
#7 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(991): Illuminate\\Database\\Eloquent\\Model->save(Array)
#8 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\app\\Http\\Controllers\\Api\\PaymentApiController.php(369): Illuminate\\Database\\Eloquent\\Model->update(Array)
#9 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Controller.php(54): App\\Http\\Controllers\\Api\\PaymentApiController->dokuWebhook(Object(Illuminate\\Http\\Request))
#10 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\ControllerDispatcher.php(43): Illuminate\\Routing\\Controller->callAction('dokuWebhook', Array)
#11 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(259): Illuminate\\Routing\\ControllerDispatcher->dispatch(Object(Illuminate\\Routing\\Route), Object(App\\Http\\Controllers\\Api\\PaymentApiController), 'dokuWebhook')
#12 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(205): Illuminate\\Routing\\Route->runController()
#13 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(806): Illuminate\\Routing\\Route->run()
#14 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(144): Illuminate\\Routing\\Router->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#15 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\app\\Http\\Middleware\\LogDokuWebhook.php(63): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#16 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): App\\Http\\Middleware\\LogDokuWebhook->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#17 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(119): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#18 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(805): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#19 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(784): Illuminate\\Routing\\Router->runRouteWithinStack(Object(Illuminate\\Routing\\Route), Object(Illuminate\\Http\\Request))
#20 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(748): Illuminate\\Routing\\Router->runRoute(Object(Illuminate\\Http\\Request), Object(Illuminate\\Routing\\Route))
#21 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(737): Illuminate\\Routing\\Router->dispatchToRoute(Object(Illuminate\\Http\\Request))
#22 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(200): Illuminate\\Routing\\Router->dispatch(Object(Illuminate\\Http\\Request))
#23 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(144): Illuminate\\Foundation\\Http\\Kernel->Illuminate\\Foundation\\Http\\{closure}(Object(Illuminate\\Http\\Request))
#24 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\beyondcode\\laravel-query-detector\\src\\QueryDetectorMiddleware.php(33): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#25 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): BeyondCode\\QueryDetector\\QueryDetectorMiddleware->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#26 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\barryvdh\\laravel-debugbar\\src\\Middleware\\InjectDebugbar.php(66): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#27 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Barryvdh\\Debugbar\\Middleware\\InjectDebugbar->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#28 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#29 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull.php(31): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#30 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#31 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#32 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TrimStrings.php(40): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#33 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\TrimStrings->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#34 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize.php(27): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#35 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#36 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance.php(99): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#37 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#38 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\HandleCors.php(62): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#39 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Http\\Middleware\\HandleCors->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#40 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\TrustProxies.php(39): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#41 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Http\\Middleware\\TrustProxies->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#42 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(119): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#43 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(175): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#44 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(144): Illuminate\\Foundation\\Http\\Kernel->sendRequestThroughRouter(Object(Illuminate\\Http\\Request))
#45 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\public\\index.php(51): Illuminate\\Foundation\\Http\\Kernel->handle(Object(Illuminate\\Http\\Request))
#46 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\resources\\server.php(16): require_once('C:\\\\Users\\\\satri\\\\...')
#47 {main}"} 
[2026-02-26 09:32:11] local.INFO: ================================================================================  
[2026-02-26 09:32:11] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-26 09:32:11] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-26 09:32:11] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"OK"}  
[2026-02-26 09:32:11] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 36.21 ms  
[2026-02-26 09:32:11] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:32:19] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:32:19] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-26 09:32:19] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-26 09:32:19  
[2026-02-26 09:32:19] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-26 09:32:19] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-26 09:32:19] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-26 09:32:19] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-26 09:32:19] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-26 09:32:19] local.INFO: [WEBHOOK REQUEST] Content-Length: 1244  
[2026-02-26 09:32:19] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-26 09:32:19] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-26 09:32:19] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1244 bytes  
[2026-02-26 09:32:19] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1772072392",
    "amount": 6000000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000233080"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-26 09:32:19] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-26 09:32:19] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1772072392",
        "amount": 6000000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000233080"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-26 09:32:19] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:32:19] local.INFO: ================================================================================  
[2026-02-26 09:32:19] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-26 09:32:19] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-26 09:32:19] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-26 09:32:19  
[2026-02-26 09:32:19] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["d90ff9c6-46d7-4e5e-934a-c9d1de6801c3"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1244"]} 
[2026-02-26 09:32:19] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1772072392","amount":6000000},"virtual_account_info":{"virtual_account_number":"1900800000233080"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-26 09:32:19] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-26 09:32:19] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1772072392","transaction_status":"SUCCESS","amount":6000000} 
[2026-02-26 09:32:19] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-26 09:32:19] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-26 09:32:19] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-26 09:32:19] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1772072392")->lockForUpdate()...  
[2026-02-26 09:32:19] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-26 09:32:19] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":8,"school_name":"uji coba tes struk pembayaran","school_email":"email@email.com","current_payment_status":"pending"} 
[2026-02-26 09:32:19] local.INFO: [DOKU WEBHOOK][STEP 5] Memanggil inquiry->update() â€” mengubah payment_status ke "success"...  
[2026-02-26 09:32:19] local.ERROR: [DOKU WEBHOOK] âŒ EXCEPTION TERJADI â€” DB::rollBack() dipanggil {"error":"SQLSTATE[42S22]: Column not found: 1054 Unknown column 'payment_date' in 'field list' (Connection: mysql, SQL: update `school_inquiries` set `payment_status` = success, `payment_date` = 2026-02-26 09:32:19, `school_inquiries`.`updated_at` = 2026-02-26 09:32:19 where `id` = 8)","file":"C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php","line":829,"trace":"#0 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(783): Illuminate\\Database\\Connection->runQueryCallback('update `school_...', Array, Object(Closure))
#1 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(600): Illuminate\\Database\\Connection->run('update `school_...', Array, Object(Closure))
#2 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(552): Illuminate\\Database\\Connection->affectingStatement('update `school_...', Array)
#3 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Query\\Builder.php(3602): Illuminate\\Database\\Connection->update('update `school_...', Array)
#4 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Builder.php(1061): Illuminate\\Database\\Query\\Builder->update(Array)
#5 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(1214): Illuminate\\Database\\Eloquent\\Builder->update(Array)
#6 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(1131): Illuminate\\Database\\Eloquent\\Model->performUpdate(Object(Illuminate\\Database\\Eloquent\\Builder))
#7 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(991): Illuminate\\Database\\Eloquent\\Model->save(Array)
#8 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\app\\Http\\Controllers\\Api\\PaymentApiController.php(369): Illuminate\\Database\\Eloquent\\Model->update(Array)
#9 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Controller.php(54): App\\Http\\Controllers\\Api\\PaymentApiController->dokuWebhook(Object(Illuminate\\Http\\Request))
#10 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\ControllerDispatcher.php(43): Illuminate\\Routing\\Controller->callAction('dokuWebhook', Array)
#11 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(259): Illuminate\\Routing\\ControllerDispatcher->dispatch(Object(Illuminate\\Routing\\Route), Object(App\\Http\\Controllers\\Api\\PaymentApiController), 'dokuWebhook')
#12 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(205): Illuminate\\Routing\\Route->runController()
#13 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(806): Illuminate\\Routing\\Route->run()
#14 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(144): Illuminate\\Routing\\Router->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#15 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\app\\Http\\Middleware\\LogDokuWebhook.php(63): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#16 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): App\\Http\\Middleware\\LogDokuWebhook->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#17 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(119): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#18 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(805): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#19 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(784): Illuminate\\Routing\\Router->runRouteWithinStack(Object(Illuminate\\Routing\\Route), Object(Illuminate\\Http\\Request))
#20 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(748): Illuminate\\Routing\\Router->runRoute(Object(Illuminate\\Http\\Request), Object(Illuminate\\Routing\\Route))
#21 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(737): Illuminate\\Routing\\Router->dispatchToRoute(Object(Illuminate\\Http\\Request))
#22 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(200): Illuminate\\Routing\\Router->dispatch(Object(Illuminate\\Http\\Request))
#23 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(144): Illuminate\\Foundation\\Http\\Kernel->Illuminate\\Foundation\\Http\\{closure}(Object(Illuminate\\Http\\Request))
#24 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\beyondcode\\laravel-query-detector\\src\\QueryDetectorMiddleware.php(33): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#25 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): BeyondCode\\QueryDetector\\QueryDetectorMiddleware->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#26 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\barryvdh\\laravel-debugbar\\src\\Middleware\\InjectDebugbar.php(66): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#27 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Barryvdh\\Debugbar\\Middleware\\InjectDebugbar->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#28 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#29 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull.php(31): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#30 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#31 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#32 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TrimStrings.php(40): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#33 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\TrimStrings->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#34 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize.php(27): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#35 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#36 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance.php(99): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#37 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#38 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\HandleCors.php(62): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#39 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Http\\Middleware\\HandleCors->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#40 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\TrustProxies.php(39): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#41 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Http\\Middleware\\TrustProxies->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#42 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(119): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#43 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(175): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#44 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(144): Illuminate\\Foundation\\Http\\Kernel->sendRequestThroughRouter(Object(Illuminate\\Http\\Request))
#45 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\public\\index.php(51): Illuminate\\Foundation\\Http\\Kernel->handle(Object(Illuminate\\Http\\Request))
#46 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\resources\\server.php(16): require_once('C:\\\\Users\\\\satri\\\\...')
#47 {main}"} 
[2026-02-26 09:32:19] local.INFO: ================================================================================  
[2026-02-26 09:32:19] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-26 09:32:19] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-26 09:32:19] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"OK"}  
[2026-02-26 09:32:19] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 66.29 ms  
[2026-02-26 09:32:19] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:33:54] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:33:54] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-26 09:33:54] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-26 09:33:54  
[2026-02-26 09:33:54] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-26 09:33:54] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-26 09:33:54] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-26 09:33:54] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-26 09:33:54] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-26 09:33:54] local.INFO: [WEBHOOK REQUEST] Content-Length: 1244  
[2026-02-26 09:33:54] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-26 09:33:54] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-26 09:33:54] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1244 bytes  
[2026-02-26 09:33:54] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1772072392",
    "amount": 6000000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000233080"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-26 09:33:54] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-26 09:33:54] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1772072392",
        "amount": 6000000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000233080"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-26 09:33:54] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:33:54] local.INFO: ================================================================================  
[2026-02-26 09:33:54] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-26 09:33:54] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-26 09:33:54] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-26 09:33:54  
[2026-02-26 09:33:54] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["87239cc9-c682-4953-8180-72d94ec8b67e"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1244"]} 
[2026-02-26 09:33:54] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1772072392","amount":6000000},"virtual_account_info":{"virtual_account_number":"1900800000233080"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-26 09:33:54] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-26 09:33:54] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1772072392","transaction_status":"SUCCESS","amount":6000000} 
[2026-02-26 09:33:54] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-26 09:33:54] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-26 09:33:54] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-26 09:33:54] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1772072392")->lockForUpdate()...  
[2026-02-26 09:33:54] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-26 09:33:54] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":8,"school_name":"uji coba tes struk pembayaran","school_email":"email@email.com","current_payment_status":"pending"} 
[2026-02-26 09:33:54] local.INFO: [DOKU WEBHOOK][STEP 5] Memanggil inquiry->update() â€” mengubah payment_status ke "success"...  
[2026-02-26 09:33:54] local.ERROR: [DOKU WEBHOOK] âŒ EXCEPTION TERJADI â€” DB::rollBack() dipanggil {"error":"SQLSTATE[42S22]: Column not found: 1054 Unknown column 'payment_date' in 'field list' (Connection: mysql, SQL: update `school_inquiries` set `payment_status` = success, `payment_date` = 2026-02-26 09:33:54, `school_inquiries`.`updated_at` = 2026-02-26 09:33:54 where `id` = 8)","file":"C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php","line":829,"trace":"#0 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(783): Illuminate\\Database\\Connection->runQueryCallback('update `school_...', Array, Object(Closure))
#1 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(600): Illuminate\\Database\\Connection->run('update `school_...', Array, Object(Closure))
#2 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(552): Illuminate\\Database\\Connection->affectingStatement('update `school_...', Array)
#3 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Query\\Builder.php(3602): Illuminate\\Database\\Connection->update('update `school_...', Array)
#4 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Builder.php(1061): Illuminate\\Database\\Query\\Builder->update(Array)
#5 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(1214): Illuminate\\Database\\Eloquent\\Builder->update(Array)
#6 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(1131): Illuminate\\Database\\Eloquent\\Model->performUpdate(Object(Illuminate\\Database\\Eloquent\\Builder))
#7 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(991): Illuminate\\Database\\Eloquent\\Model->save(Array)
#8 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\app\\Http\\Controllers\\Api\\PaymentApiController.php(369): Illuminate\\Database\\Eloquent\\Model->update(Array)
#9 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Controller.php(54): App\\Http\\Controllers\\Api\\PaymentApiController->dokuWebhook(Object(Illuminate\\Http\\Request))
#10 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\ControllerDispatcher.php(43): Illuminate\\Routing\\Controller->callAction('dokuWebhook', Array)
#11 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(259): Illuminate\\Routing\\ControllerDispatcher->dispatch(Object(Illuminate\\Routing\\Route), Object(App\\Http\\Controllers\\Api\\PaymentApiController), 'dokuWebhook')
#12 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(205): Illuminate\\Routing\\Route->runController()
#13 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(806): Illuminate\\Routing\\Route->run()
#14 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(144): Illuminate\\Routing\\Router->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#15 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\app\\Http\\Middleware\\LogDokuWebhook.php(63): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#16 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): App\\Http\\Middleware\\LogDokuWebhook->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#17 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(119): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#18 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(805): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#19 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(784): Illuminate\\Routing\\Router->runRouteWithinStack(Object(Illuminate\\Routing\\Route), Object(Illuminate\\Http\\Request))
#20 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(748): Illuminate\\Routing\\Router->runRoute(Object(Illuminate\\Http\\Request), Object(Illuminate\\Routing\\Route))
#21 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(737): Illuminate\\Routing\\Router->dispatchToRoute(Object(Illuminate\\Http\\Request))
#22 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(200): Illuminate\\Routing\\Router->dispatch(Object(Illuminate\\Http\\Request))
#23 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(144): Illuminate\\Foundation\\Http\\Kernel->Illuminate\\Foundation\\Http\\{closure}(Object(Illuminate\\Http\\Request))
#24 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\beyondcode\\laravel-query-detector\\src\\QueryDetectorMiddleware.php(33): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#25 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): BeyondCode\\QueryDetector\\QueryDetectorMiddleware->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#26 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\barryvdh\\laravel-debugbar\\src\\Middleware\\InjectDebugbar.php(66): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#27 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Barryvdh\\Debugbar\\Middleware\\InjectDebugbar->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#28 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#29 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull.php(31): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#30 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#31 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#32 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TrimStrings.php(40): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#33 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\TrimStrings->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#34 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize.php(27): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#35 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#36 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance.php(99): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#37 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#38 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\HandleCors.php(62): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#39 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Http\\Middleware\\HandleCors->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#40 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\TrustProxies.php(39): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#41 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Http\\Middleware\\TrustProxies->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#42 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(119): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#43 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(175): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#44 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(144): Illuminate\\Foundation\\Http\\Kernel->sendRequestThroughRouter(Object(Illuminate\\Http\\Request))
#45 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\public\\index.php(51): Illuminate\\Foundation\\Http\\Kernel->handle(Object(Illuminate\\Http\\Request))
#46 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\resources\\server.php(16): require_once('C:\\\\Users\\\\satri\\\\...')
#47 {main}"} 
[2026-02-26 09:33:54] local.INFO: ================================================================================  
[2026-02-26 09:33:54] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-26 09:33:54] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-26 09:33:54] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"OK"}  
[2026-02-26 09:33:54] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 67.79 ms  
[2026-02-26 09:33:54] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:33:56] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:33:56] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-26 09:33:56] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-26 09:33:56  
[2026-02-26 09:33:56] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-26 09:33:56] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-26 09:33:56] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-26 09:33:56] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-26 09:33:56] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-26 09:33:56] local.INFO: [WEBHOOK REQUEST] Content-Length: 1244  
[2026-02-26 09:33:56] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-26 09:33:56] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-26 09:33:56] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1244 bytes  
[2026-02-26 09:33:56] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1772072392",
    "amount": 6000000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000233080"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-26 09:33:56] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-26 09:33:56] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1772072392",
        "amount": 6000000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000233080"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-26 09:33:56] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:33:56] local.INFO: ================================================================================  
[2026-02-26 09:33:56] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-26 09:33:56] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-26 09:33:56] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-26 09:33:56  
[2026-02-26 09:33:56] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["05a73f5c-175a-4dae-b405-e6fb4832906c"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1244"]} 
[2026-02-26 09:33:56] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1772072392","amount":6000000},"virtual_account_info":{"virtual_account_number":"1900800000233080"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-26 09:33:56] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-26 09:33:56] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1772072392","transaction_status":"SUCCESS","amount":6000000} 
[2026-02-26 09:33:56] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-26 09:33:56] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-26 09:33:56] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-26 09:33:56] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1772072392")->lockForUpdate()...  
[2026-02-26 09:33:56] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-26 09:33:56] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":8,"school_name":"uji coba tes struk pembayaran","school_email":"email@email.com","current_payment_status":"pending"} 
[2026-02-26 09:33:56] local.INFO: [DOKU WEBHOOK][STEP 5] Memanggil inquiry->update() â€” mengubah payment_status ke "success"...  
[2026-02-26 09:33:56] local.ERROR: [DOKU WEBHOOK] âŒ EXCEPTION TERJADI â€” DB::rollBack() dipanggil {"error":"SQLSTATE[42S22]: Column not found: 1054 Unknown column 'payment_date' in 'field list' (Connection: mysql, SQL: update `school_inquiries` set `payment_status` = success, `payment_date` = 2026-02-26 09:33:56, `school_inquiries`.`updated_at` = 2026-02-26 09:33:56 where `id` = 8)","file":"C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php","line":829,"trace":"#0 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(783): Illuminate\\Database\\Connection->runQueryCallback('update `school_...', Array, Object(Closure))
#1 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(600): Illuminate\\Database\\Connection->run('update `school_...', Array, Object(Closure))
#2 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(552): Illuminate\\Database\\Connection->affectingStatement('update `school_...', Array)
#3 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Query\\Builder.php(3602): Illuminate\\Database\\Connection->update('update `school_...', Array)
#4 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Builder.php(1061): Illuminate\\Database\\Query\\Builder->update(Array)
#5 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(1214): Illuminate\\Database\\Eloquent\\Builder->update(Array)
#6 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(1131): Illuminate\\Database\\Eloquent\\Model->performUpdate(Object(Illuminate\\Database\\Eloquent\\Builder))
#7 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(991): Illuminate\\Database\\Eloquent\\Model->save(Array)
#8 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\app\\Http\\Controllers\\Api\\PaymentApiController.php(369): Illuminate\\Database\\Eloquent\\Model->update(Array)
#9 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Controller.php(54): App\\Http\\Controllers\\Api\\PaymentApiController->dokuWebhook(Object(Illuminate\\Http\\Request))
#10 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\ControllerDispatcher.php(43): Illuminate\\Routing\\Controller->callAction('dokuWebhook', Array)
#11 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(259): Illuminate\\Routing\\ControllerDispatcher->dispatch(Object(Illuminate\\Routing\\Route), Object(App\\Http\\Controllers\\Api\\PaymentApiController), 'dokuWebhook')
#12 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(205): Illuminate\\Routing\\Route->runController()
#13 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(806): Illuminate\\Routing\\Route->run()
#14 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(144): Illuminate\\Routing\\Router->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#15 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\app\\Http\\Middleware\\LogDokuWebhook.php(63): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#16 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): App\\Http\\Middleware\\LogDokuWebhook->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#17 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(119): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#18 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(805): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#19 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(784): Illuminate\\Routing\\Router->runRouteWithinStack(Object(Illuminate\\Routing\\Route), Object(Illuminate\\Http\\Request))
#20 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(748): Illuminate\\Routing\\Router->runRoute(Object(Illuminate\\Http\\Request), Object(Illuminate\\Routing\\Route))
#21 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(737): Illuminate\\Routing\\Router->dispatchToRoute(Object(Illuminate\\Http\\Request))
#22 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(200): Illuminate\\Routing\\Router->dispatch(Object(Illuminate\\Http\\Request))
#23 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(144): Illuminate\\Foundation\\Http\\Kernel->Illuminate\\Foundation\\Http\\{closure}(Object(Illuminate\\Http\\Request))
#24 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\beyondcode\\laravel-query-detector\\src\\QueryDetectorMiddleware.php(33): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#25 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): BeyondCode\\QueryDetector\\QueryDetectorMiddleware->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#26 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\barryvdh\\laravel-debugbar\\src\\Middleware\\InjectDebugbar.php(66): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#27 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Barryvdh\\Debugbar\\Middleware\\InjectDebugbar->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#28 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#29 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull.php(31): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#30 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#31 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#32 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TrimStrings.php(40): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#33 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\TrimStrings->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#34 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize.php(27): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#35 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#36 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance.php(99): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#37 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#38 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\HandleCors.php(62): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#39 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Http\\Middleware\\HandleCors->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#40 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\TrustProxies.php(39): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#41 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Http\\Middleware\\TrustProxies->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#42 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(119): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#43 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(175): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#44 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(144): Illuminate\\Foundation\\Http\\Kernel->sendRequestThroughRouter(Object(Illuminate\\Http\\Request))
#45 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\public\\index.php(51): Illuminate\\Foundation\\Http\\Kernel->handle(Object(Illuminate\\Http\\Request))
#46 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\resources\\server.php(16): require_once('C:\\\\Users\\\\satri\\\\...')
#47 {main}"} 
[2026-02-26 09:33:56] local.INFO: ================================================================================  
[2026-02-26 09:33:56] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-26 09:33:56] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-26 09:33:56] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"OK"}  
[2026-02-26 09:33:56] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 60.98 ms  
[2026-02-26 09:33:56] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:35:05] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:35:05] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-26 09:35:05] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-26 09:35:05  
[2026-02-26 09:35:05] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-26 09:35:05] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-26 09:35:05] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-26 09:35:05] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-26 09:35:05] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-26 09:35:05] local.INFO: [WEBHOOK REQUEST] Content-Length: 1244  
[2026-02-26 09:35:05] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-26 09:35:05] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-26 09:35:05] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1244 bytes  
[2026-02-26 09:35:05] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1772072392",
    "amount": 6000000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000233080"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-26 09:35:05] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-26 09:35:05] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1772072392",
        "amount": 6000000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000233080"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-26 09:35:05] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:35:05] local.INFO: ================================================================================  
[2026-02-26 09:35:05] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-26 09:35:05] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-26 09:35:05] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-26 09:35:05  
[2026-02-26 09:35:05] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["e32a6142-e926-410b-a89b-a966ce1d8d7d"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1244"]} 
[2026-02-26 09:35:05] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1772072392","amount":6000000},"virtual_account_info":{"virtual_account_number":"1900800000233080"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-26 09:35:05] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-26 09:35:05] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1772072392","transaction_status":"SUCCESS","amount":6000000} 
[2026-02-26 09:35:05] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-26 09:35:05] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-26 09:35:05] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-26 09:35:05] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1772072392")->lockForUpdate()...  
[2026-02-26 09:35:05] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-26 09:35:05] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":8,"school_name":"uji coba tes struk pembayaran","school_email":"email@email.com","current_payment_status":"pending"} 
[2026-02-26 09:35:05] local.INFO: [DOKU WEBHOOK][STEP 5] Memanggil inquiry->update() â€” mengubah payment_status ke "success"...  
[2026-02-26 09:35:05] local.ERROR: [DOKU WEBHOOK] âŒ EXCEPTION TERJADI â€” DB::rollBack() dipanggil {"error":"SQLSTATE[42S22]: Column not found: 1054 Unknown column 'payment_date' in 'field list' (Connection: mysql, SQL: update `school_inquiries` set `payment_status` = success, `payment_date` = 2026-02-26 09:35:05, `school_inquiries`.`updated_at` = 2026-02-26 09:35:05 where `id` = 8)","file":"C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php","line":829,"trace":"#0 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(783): Illuminate\\Database\\Connection->runQueryCallback('update `school_...', Array, Object(Closure))
#1 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(600): Illuminate\\Database\\Connection->run('update `school_...', Array, Object(Closure))
#2 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php(552): Illuminate\\Database\\Connection->affectingStatement('update `school_...', Array)
#3 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Query\\Builder.php(3602): Illuminate\\Database\\Connection->update('update `school_...', Array)
#4 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Builder.php(1061): Illuminate\\Database\\Query\\Builder->update(Array)
#5 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(1214): Illuminate\\Database\\Eloquent\\Builder->update(Array)
#6 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(1131): Illuminate\\Database\\Eloquent\\Model->performUpdate(Object(Illuminate\\Database\\Eloquent\\Builder))
#7 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(991): Illuminate\\Database\\Eloquent\\Model->save(Array)
#8 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\app\\Http\\Controllers\\Api\\PaymentApiController.php(369): Illuminate\\Database\\Eloquent\\Model->update(Array)
#9 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Controller.php(54): App\\Http\\Controllers\\Api\\PaymentApiController->dokuWebhook(Object(Illuminate\\Http\\Request))
#10 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\ControllerDispatcher.php(43): Illuminate\\Routing\\Controller->callAction('dokuWebhook', Array)
#11 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(259): Illuminate\\Routing\\ControllerDispatcher->dispatch(Object(Illuminate\\Routing\\Route), Object(App\\Http\\Controllers\\Api\\PaymentApiController), 'dokuWebhook')
#12 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Route.php(205): Illuminate\\Routing\\Route->runController()
#13 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(806): Illuminate\\Routing\\Route->run()
#14 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(144): Illuminate\\Routing\\Router->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#15 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\app\\Http\\Middleware\\LogDokuWebhook.php(63): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#16 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): App\\Http\\Middleware\\LogDokuWebhook->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#17 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(119): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#18 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(805): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#19 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(784): Illuminate\\Routing\\Router->runRouteWithinStack(Object(Illuminate\\Routing\\Route), Object(Illuminate\\Http\\Request))
#20 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(748): Illuminate\\Routing\\Router->runRoute(Object(Illuminate\\Http\\Request), Object(Illuminate\\Routing\\Route))
#21 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Routing\\Router.php(737): Illuminate\\Routing\\Router->dispatchToRoute(Object(Illuminate\\Http\\Request))
#22 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(200): Illuminate\\Routing\\Router->dispatch(Object(Illuminate\\Http\\Request))
#23 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(144): Illuminate\\Foundation\\Http\\Kernel->Illuminate\\Foundation\\Http\\{closure}(Object(Illuminate\\Http\\Request))
#24 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\beyondcode\\laravel-query-detector\\src\\QueryDetectorMiddleware.php(33): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#25 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): BeyondCode\\QueryDetector\\QueryDetectorMiddleware->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#26 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\barryvdh\\laravel-debugbar\\src\\Middleware\\InjectDebugbar.php(66): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#27 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Barryvdh\\Debugbar\\Middleware\\InjectDebugbar->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#28 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#29 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull.php(31): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#30 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#31 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#32 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\TrimStrings.php(40): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#33 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\TrimStrings->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#34 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize.php(27): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#35 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#36 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance.php(99): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#37 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#38 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\HandleCors.php(62): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#39 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Http\\Middleware\\HandleCors->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#40 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Http\\Middleware\\TrustProxies.php(39): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#41 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(183): Illuminate\\Http\\Middleware\\TrustProxies->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#42 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(119): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#43 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(175): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#44 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Http\\Kernel.php(144): Illuminate\\Foundation\\Http\\Kernel->sendRequestThroughRouter(Object(Illuminate\\Http\\Request))
#45 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\public\\index.php(51): Illuminate\\Foundation\\Http\\Kernel->handle(Object(Illuminate\\Http\\Request))
#46 C:\\Users\\satri\\Downloads\\eSchool-Saas-V1.8.2\\PHP_Code\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\resources\\server.php(16): require_once('C:\\\\Users\\\\satri\\\\...')
#47 {main}"} 
[2026-02-26 09:35:05] local.INFO: ================================================================================  
[2026-02-26 09:35:05] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-26 09:35:05] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-26 09:35:05] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"OK"}  
[2026-02-26 09:35:05] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 53.83 ms  
[2026-02-26 09:35:05] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:38:47] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:38:47] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-26 09:38:47] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-26 09:38:47  
[2026-02-26 09:38:47] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-26 09:38:47] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-26 09:38:47] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-26 09:38:47] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-26 09:38:47] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-26 09:38:47] local.INFO: [WEBHOOK REQUEST] Content-Length: 1244  
[2026-02-26 09:38:47] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-26 09:38:47] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-26 09:38:47] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1244 bytes  
[2026-02-26 09:38:47] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1772072392",
    "amount": 6000000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000233080"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-26 09:38:47] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-26 09:38:47] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1772072392",
        "amount": 6000000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000233080"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-26 09:38:47] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 09:38:47] local.INFO: ================================================================================  
[2026-02-26 09:38:47] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-26 09:38:47] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-26 09:38:47] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-26 09:38:47  
[2026-02-26 09:38:47] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["9e78e307-3933-49ae-9924-78301d35bd1c"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1244"]} 
[2026-02-26 09:38:47] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1772072392","amount":6000000},"virtual_account_info":{"virtual_account_number":"1900800000233080"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-26 09:38:47] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-26 09:38:47] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1772072392","transaction_status":"SUCCESS","amount":6000000} 
[2026-02-26 09:38:47] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-26 09:38:47] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-26 09:38:47] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-26 09:38:47] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1772072392")->lockForUpdate()...  
[2026-02-26 09:38:47] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-26 09:38:47] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":8,"school_name":"uji coba tes struk pembayaran","school_email":"email@email.com","current_payment_status":"pending"} 
[2026-02-26 09:38:47] local.INFO: [DOKU WEBHOOK][STEP 5] Memanggil inquiry->update() â€” mengubah payment_status ke "success"...  
[2026-02-26 09:38:47] local.INFO: [DOKU WEBHOOK][STEP 5] Payment status TERUPDATE: {"inquiry_id":8,"new_payment_status":"success","payment_date":"2026-02-26 09:38:47"} 
[2026-02-26 09:38:47] local.INFO: [DOKU WEBHOOK][STEP 5b] Creating DokuPaymentReceipt record...  
[2026-02-26 09:38:47] local.INFO: [DOKU WEBHOOK][STEP 5b] DokuPaymentReceipt TERCIPTA: {"receipt_id":1,"invoice_number":"JT-1772072392"} 
[2026-02-26 09:38:47] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil School::where("support_email", "email@email.com") â€” cek apakah school sudah ada...  
[2026-02-26 09:38:47] local.INFO: [DOKU WEBHOOK][STEP 6] School BELUM ADA â€” memanggil School::create() untuk membuat school baru...  
[2026-02-26 09:38:47] local.INFO: [DOKU WEBHOOK][STEP 6] School BARU TERCIPTA: {"school_id":7,"name":"uji coba tes struk pembayaran","support_email":"email@email.com"} 
[2026-02-26 09:38:47] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil school->update() â€” set code dan database_name...  
[2026-02-26 09:38:47] local.INFO: [DOKU WEBHOOK][STEP 6] School TERUPDATE: {"school_id":7,"code":"SCH00007","database_name":"eschool_saas_7_uji-coba-tes-struk-pembayaran"} 
[2026-02-26 09:38:47] local.INFO: [DOKU WEBHOOK][STEP 6b] DokuPaymentReceipt school_id TERUPDATE ke: 7  
[2026-02-26 09:38:47] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil User::where("email", "email@email.com") â€” cek apakah admin sudah ada...  
[2026-02-26 09:38:47] local.INFO: [DOKU WEBHOOK][STEP 7] Admin BELUM ADA â€” memanggil User::create() untuk membuat admin baru...  
[2026-02-26 09:38:47] local.INFO: [DOKU WEBHOOK][STEP 7] Admin user TERCIPTA: {"user_id":8,"email":"email@email.com","school_id":7} 
[2026-02-26 09:38:47] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil Role::updateOrCreate() â€” assign role "School Admin"...  
[2026-02-26 09:38:47] local.INFO: [DOKU WEBHOOK][STEP 7] Role TERCIPTA/TERUPDATE: {"role_id":7,"role_name":"School Admin"} 
[2026-02-26 09:38:47] local.INFO: [DOKU WEBHOOK][STEP 7] School admin_id diupdate ke: 8  
[2026-02-26 09:38:47] local.INFO: [DOKU WEBHOOK][STEP 8] DB::commit() â€” semua data tersimpan ke database  
[2026-02-26 09:38:47] local.INFO: [DOKU WEBHOOK][STEP 9] Memanggil SetupSchoolDatabase::dispatch(...)->afterResponse() â€” membuat database sekolah di background (setelah response)...  
[2026-02-26 09:38:47] local.INFO: [DOKU WEBHOOK][STEP 9] Parameter dispatch: {"school_id":7,"package_id":3,"school_code":"SCH00007"} 
[2026-02-26 09:38:48] local.INFO: [DOKU WEBHOOK] âœ… PROSES SELESAI â€” Sekolah berhasil diaktifkan  
[2026-02-26 09:38:48] local.INFO: [DOKU WEBHOOK] Hasil yang tercipta: {"school_id":7,"school_name":"uji coba tes struk pembayaran","school_code":"SCH00007","database_name":"eschool_saas_7_uji-coba-tes-struk-pembayaran","admin_email":"email@email.com","payment_status":"success","invoice_number":"JT-1772072392"} 
[2026-02-26 09:38:48] local.INFO: ================================================================================  
[2026-02-26 09:38:48] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-26 09:38:48] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-26 09:38:48] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"OK"}  
[2026-02-26 09:38:48] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 468.17 ms  
[2026-02-26 09:38:48] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 11:05:24] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 11:05:24] local.INFO: [WEBHOOK REQUEST] ğŸ“© REQUEST MASUK KE ENDPOINT WEBHOOK DOKU  
[2026-02-26 11:05:24] local.INFO: [WEBHOOK REQUEST] Timestamp: 2026-02-26 11:05:24  
[2026-02-26 11:05:24] local.INFO: [WEBHOOK REQUEST] HTTP Method: POST  
[2026-02-26 11:05:24] local.INFO: [WEBHOOK REQUEST] URL: http://127.0.0.1:8000/api/webhook/doku  
[2026-02-26 11:05:24] local.INFO: [WEBHOOK REQUEST] IP Address: 127.0.0.1  
[2026-02-26 11:05:24] local.INFO: [WEBHOOK REQUEST] User-Agent: PostmanRuntime/7.51.1  
[2026-02-26 11:05:24] local.INFO: [WEBHOOK REQUEST] Content-Type: application/json  
[2026-02-26 11:05:24] local.INFO: [WEBHOOK REQUEST] Content-Length: 1244  
[2026-02-26 11:05:24] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ HEADERS â”€â”€â”€  
[2026-02-26 11:05:24] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ RAW BODY â”€â”€â”€  
[2026-02-26 11:05:24] local.INFO: [WEBHOOK REQUEST] Raw Body Length: 1244 bytes  
[2026-02-26 11:05:24] local.INFO: [WEBHOOK REQUEST] Raw Body: {
  "service": {
    "id": "VIRTUAL_ACCOUNT"
  },
  "acquirer": {
    "id": "BCA"
  },
  "channel": {
    "id": "VIRTUAL_ACCOUNT_BCA"
  },
  "order": {
    "invoice_number": "JT-1772078665",
    "amount": 3000000
  },
  "virtual_account_info": {
    "virtual_account_number": "1900800000233080"
  },
  "virtual_account_payment": {
    "date": "20260218135742",
    "systrace_number": "128311",
    "reference_number": "97748",
    "channel_code": "",
    "request_id": "820799",
    "identifier": [
      {
        "name": "REQUEST_ID",
        "value": "820799"
      },
      {
        "name": "REFERENCE",
        "value": "97748"
      },
      {
        "name": "CHANNEL_TYPE",
        "value": "6014"
      }
    ]
  },
  "transaction": {
    "status": "SUCCESS",
    "date": "2026-02-18T06:57:42Z",
    "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
  },
  "additional_info": {
    "origin": {
      "source": "direct",
      "system": "mid-jokul-checkout-system",
      "product": "CHECKOUT",
      "apiFormat": "JOKUL"
    },
    "line_items": [
      {
        "name": "Subscription Package",
        "price": "500000",
        "quantity": 1
      }
    ]
  }
}  
[2026-02-26 11:05:24] local.INFO: [WEBHOOK REQUEST] â”€â”€â”€ PARSED BODY â”€â”€â”€  
[2026-02-26 11:05:24] local.INFO: [WEBHOOK REQUEST] Parsed Body: {
    "service": {
        "id": "VIRTUAL_ACCOUNT"
    },
    "acquirer": {
        "id": "BCA"
    },
    "channel": {
        "id": "VIRTUAL_ACCOUNT_BCA"
    },
    "order": {
        "invoice_number": "JT-1772078665",
        "amount": 3000000
    },
    "virtual_account_info": {
        "virtual_account_number": "1900800000233080"
    },
    "virtual_account_payment": {
        "date": "20260218135742",
        "systrace_number": "128311",
        "reference_number": "97748",
        "channel_code": null,
        "request_id": "820799",
        "identifier": [
            {
                "name": "REQUEST_ID",
                "value": "820799"
            },
            {
                "name": "REFERENCE",
                "value": "97748"
            },
            {
                "name": "CHANNEL_TYPE",
                "value": "6014"
            }
        ]
    },
    "transaction": {
        "status": "SUCCESS",
        "date": "2026-02-18T06:57:42Z",
        "original_request_id": "bdf0aedd-d630-4c31-be10-6334cfb3e1f9"
    },
    "additional_info": {
        "origin": {
            "source": "direct",
            "system": "mid-jokul-checkout-system",
            "product": "CHECKOUT",
            "apiFormat": "JOKUL"
        },
        "line_items": [
            {
                "name": "Subscription Package",
                "price": "500000",
                "quantity": 1
            }
        ]
    }
}  
[2026-02-26 11:05:24] local.INFO: [WEBHOOK REQUEST] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
[2026-02-26 11:05:24] local.INFO: ================================================================================  
[2026-02-26 11:05:24] local.INFO: [DOKU WEBHOOK] NOTIFIKASI DITERIMA  
[2026-02-26 11:05:24] local.INFO: [DOKU WEBHOOK] Fungsi dipanggil: PaymentApiController::dokuWebhook()  
[2026-02-26 11:05:24] local.INFO: [DOKU WEBHOOK] Timestamp: 2026-02-26 11:05:24  
[2026-02-26 11:05:24] local.INFO: [DOKU WEBHOOK] Headers: {"content-type":["application/json"],"user-agent":["PostmanRuntime/7.51.1"],"accept":["*/*"],"cache-control":["no-cache"],"postman-token":["1ac66067-07d7-469e-98e5-7eea6003911d"],"host":["127.0.0.1:8000"],"accept-encoding":["gzip, deflate, br"],"connection":["keep-alive"],"content-length":["1244"]} 
[2026-02-26 11:05:24] local.INFO: [DOKU WEBHOOK] Body (raw payload): {"service":{"id":"VIRTUAL_ACCOUNT"},"acquirer":{"id":"BCA"},"channel":{"id":"VIRTUAL_ACCOUNT_BCA"},"order":{"invoice_number":"JT-1772078665","amount":3000000},"virtual_account_info":{"virtual_account_number":"1900800000233080"},"virtual_account_payment":{"date":"20260218135742","systrace_number":"128311","reference_number":"97748","channel_code":null,"request_id":"820799","identifier":[{"name":"REQUEST_ID","value":"820799"},{"name":"REFERENCE","value":"97748"},{"name":"CHANNEL_TYPE","value":"6014"}]},"transaction":{"status":"SUCCESS","date":"2026-02-18T06:57:42Z","original_request_id":"bdf0aedd-d630-4c31-be10-6334cfb3e1f9"},"additional_info":{"origin":{"source":"direct","system":"mid-jokul-checkout-system","product":"CHECKOUT","apiFormat":"JOKUL"},"line_items":[{"name":"Subscription Package","price":"500000","quantity":1}]}} 
[2026-02-26 11:05:24] local.INFO: [DOKU WEBHOOK][STEP 1] Parsing data dari payload DOKU...  
[2026-02-26 11:05:24] local.INFO: [DOKU WEBHOOK][STEP 1] Data yang terparsing: {"invoice_number":"JT-1772078665","transaction_status":"SUCCESS","amount":3000000} 
[2026-02-26 11:05:24] local.INFO: [DOKU WEBHOOK][STEP 2] Verifikasi signature DI-BYPASS (Sesuai Request User)  
[2026-02-26 11:05:24] local.INFO: [DOKU WEBHOOK][STEP 3] Mengecek apakah status pembayaran sukses...  
[2026-02-26 11:05:24] local.INFO: [DOKU WEBHOOK][STEP 3] Status pembayaran SUKSES: SUCCESS  
[2026-02-26 11:05:24] local.INFO: [DOKU WEBHOOK][STEP 4] Memanggil SchoolInquiry::where("invoice_number", "JT-1772078665")->lockForUpdate()...  
[2026-02-26 11:05:24] local.INFO: [DOKU WEBHOOK][STEP 4] DB::beginTransaction() dipanggil  
[2026-02-26 11:05:24] local.INFO: [DOKU WEBHOOK][STEP 4] Inquiry DITEMUKAN: {"inquiry_id":9,"school_name":"uji coba tes struk pembayaran dengan improvements","school_email":"email2@email.com","current_payment_status":"pending"} 
[2026-02-26 11:05:24] local.INFO: [DOKU WEBHOOK][STEP 5] Memanggil inquiry->update() â€” mengubah payment_status ke "success"...  
[2026-02-26 11:05:24] local.INFO: [DOKU WEBHOOK][STEP 5] Payment status TERUPDATE: {"inquiry_id":9,"new_payment_status":"success","payment_date":"2026-02-26 11:05:24"} 
[2026-02-26 11:05:24] local.INFO: [DOKU WEBHOOK][STEP 5b] Creating DokuPaymentReceipt record...  
[2026-02-26 11:05:24] local.INFO: [DOKU WEBHOOK][STEP 5b] DokuPaymentReceipt TERCIPTA: {"receipt_id":2,"invoice_number":"JT-1772078665"} 
[2026-02-26 11:05:24] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil School::where("support_email", "email2@email.com") â€” cek apakah school sudah ada...  
[2026-02-26 11:05:24] local.INFO: [DOKU WEBHOOK][STEP 6] School BELUM ADA â€” memanggil School::create() untuk membuat school baru...  
[2026-02-26 11:05:24] local.INFO: [DOKU WEBHOOK][STEP 6] School BARU TERCIPTA: {"school_id":8,"name":"uji coba tes struk pembayaran dengan improvements","support_email":"email2@email.com"} 
[2026-02-26 11:05:24] local.INFO: [DOKU WEBHOOK][STEP 6] Memanggil school->update() â€” set code dan database_name...  
[2026-02-26 11:05:24] local.INFO: [DOKU WEBHOOK][STEP 6] School TERUPDATE: {"school_id":8,"code":"SCH00008","database_name":"eschool_saas_8_uji-coba-tes-struk-pembayaran-dengan-improvements"} 
[2026-02-26 11:05:24] local.INFO: [DOKU WEBHOOK][STEP 6b] DokuPaymentReceipt school_id TERUPDATE ke: 8  
[2026-02-26 11:05:24] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil User::where("email", "email2@email.com") â€” cek apakah admin sudah ada...  
[2026-02-26 11:05:24] local.INFO: [DOKU WEBHOOK][STEP 7] Admin BELUM ADA â€” memanggil User::create() untuk membuat admin baru...  
[2026-02-26 11:05:24] local.INFO: [DOKU WEBHOOK][STEP 7] Admin user TERCIPTA: {"user_id":9,"email":"email2@email.com","school_id":8} 
[2026-02-26 11:05:24] local.INFO: [DOKU WEBHOOK][STEP 7] Memanggil Role::updateOrCreate() â€” assign role "School Admin"...  
[2026-02-26 11:05:24] local.INFO: [DOKU WEBHOOK][STEP 7] Role TERCIPTA/TERUPDATE: {"role_id":8,"role_name":"School Admin"} 
[2026-02-26 11:05:24] local.INFO: [DOKU WEBHOOK][STEP 7] School admin_id diupdate ke: 9  
[2026-02-26 11:05:24] local.INFO: [DOKU WEBHOOK][STEP 8] DB::commit() â€” semua data tersimpan ke database  
[2026-02-26 11:05:24] local.INFO: [DOKU WEBHOOK][STEP 9] Memanggil SetupSchoolDatabase::dispatch(...)->afterResponse() â€” membuat database sekolah di background (setelah response)...  
[2026-02-26 11:05:24] local.INFO: [DOKU WEBHOOK][STEP 9] Parameter dispatch: {"school_id":8,"package_id":2,"school_code":"SCH00008"} 
[2026-02-26 11:05:25] local.INFO: [DOKU WEBHOOK] âœ… PROSES SELESAI â€” Sekolah berhasil diaktifkan  
[2026-02-26 11:05:25] local.INFO: [DOKU WEBHOOK] Hasil yang tercipta: {"school_id":8,"school_name":"uji coba tes struk pembayaran dengan improvements","school_code":"SCH00008","database_name":"eschool_saas_8_uji-coba-tes-struk-pembayaran-dengan-improvements","admin_email":"email2@email.com","payment_status":"success","invoice_number":"JT-1772078665"} 
[2026-02-26 11:05:25] local.INFO: ================================================================================  
[2026-02-26 11:05:25] local.INFO: [WEBHOOK RESPONSE] â”€â”€â”€ RESPONSE â”€â”€â”€  
[2026-02-26 11:05:25] local.INFO: [WEBHOOK RESPONSE] HTTP Status Code: 200  
[2026-02-26 11:05:25] local.INFO: [WEBHOOK RESPONSE] Response Body: {"message":"OK"}  
[2026-02-26 11:05:25] local.INFO: [WEBHOOK RESPONSE] Durasi Proses: 528.31 ms  
[2026-02-26 11:05:25] local.INFO: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
